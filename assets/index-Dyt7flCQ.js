var G1=Object.defineProperty;var gb=l=>{throw TypeError(l)};var X1=(l,e,t)=>e in l?G1(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var ze=(l,e,t)=>X1(l,typeof e!="symbol"?e+"":e,t),qy=(l,e,t)=>e.has(l)||gb("Cannot "+t);var u=(l,e,t)=>(qy(l,e,"read from private field"),t?t.call(l):e.get(l)),T=(l,e,t)=>e.has(l)?gb("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(l):e.set(l,t),x=(l,e,t,i)=>(qy(l,e,"write to private field"),i?i.call(l,t):e.set(l,t),t),C=(l,e,t)=>(qy(l,e,"access private method"),t);var Qn=(l,e,t,i)=>({set _(s){x(l,e,s,t)},get _(){return u(l,e,i)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function PS(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var Gy={exports:{}},Ku={},Xy={exports:{}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mb;function K1(){if(mb)return Ue;mb=1;var l=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function w(M){return M===null||typeof M!="object"?null:(M=y&&M[y]||M["@@iterator"],typeof M=="function"?M:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,k={};function _(M,$,le){this.props=M,this.context=$,this.refs=k,this.updater=le||b}_.prototype.isReactComponent={},_.prototype.setState=function(M,$){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,$,"setState")},_.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function R(){}R.prototype=_.prototype;function D(M,$,le){this.props=M,this.context=$,this.refs=k,this.updater=le||b}var j=D.prototype=new R;j.constructor=D,A(j,_.prototype),j.isPureReactComponent=!0;var z=Array.isArray,B=Object.prototype.hasOwnProperty,F={current:null},X={key:!0,ref:!0,__self:!0,__source:!0};function Y(M,$,le){var me,Se={},Te=null,Ce=null;if($!=null)for(me in $.ref!==void 0&&(Ce=$.ref),$.key!==void 0&&(Te=""+$.key),$)B.call($,me)&&!X.hasOwnProperty(me)&&(Se[me]=$[me]);var De=arguments.length-2;if(De===1)Se.children=le;else if(1<De){for(var He=Array(De),Be=0;Be<De;Be++)He[Be]=arguments[Be+2];Se.children=He}if(M&&M.defaultProps)for(me in De=M.defaultProps,De)Se[me]===void 0&&(Se[me]=De[me]);return{$$typeof:l,type:M,key:Te,ref:Ce,props:Se,_owner:F.current}}function Q(M,$){return{$$typeof:l,type:M.type,key:$,ref:M.ref,props:M.props,_owner:M._owner}}function ne(M){return typeof M=="object"&&M!==null&&M.$$typeof===l}function oe(M){var $={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(le){return $[le]})}var _e=/\/+/g;function ge(M,$){return typeof M=="object"&&M!==null&&M.key!=null?oe(""+M.key):$.toString(36)}function de(M,$,le,me,Se){var Te=typeof M;(Te==="undefined"||Te==="boolean")&&(M=null);var Ce=!1;if(M===null)Ce=!0;else switch(Te){case"string":case"number":Ce=!0;break;case"object":switch(M.$$typeof){case l:case e:Ce=!0}}if(Ce)return Ce=M,Se=Se(Ce),M=me===""?"."+ge(Ce,0):me,z(Se)?(le="",M!=null&&(le=M.replace(_e,"$&/")+"/"),de(Se,$,le,"",function(Be){return Be})):Se!=null&&(ne(Se)&&(Se=Q(Se,le+(!Se.key||Ce&&Ce.key===Se.key?"":(""+Se.key).replace(_e,"$&/")+"/")+M)),$.push(Se)),1;if(Ce=0,me=me===""?".":me+":",z(M))for(var De=0;De<M.length;De++){Te=M[De];var He=me+ge(Te,De);Ce+=de(Te,$,le,He,Se)}else if(He=w(M),typeof He=="function")for(M=He.call(M),De=0;!(Te=M.next()).done;)Te=Te.value,He=me+ge(Te,De++),Ce+=de(Te,$,le,He,Se);else if(Te==="object")throw $=String(M),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return Ce}function ie(M,$,le){if(M==null)return M;var me=[],Se=0;return de(M,me,"","",function(Te){return $.call(le,Te,Se++)}),me}function re(M){if(M._status===-1){var $=M._result;$=$(),$.then(function(le){(M._status===0||M._status===-1)&&(M._status=1,M._result=le)},function(le){(M._status===0||M._status===-1)&&(M._status=2,M._result=le)}),M._status===-1&&(M._status=0,M._result=$)}if(M._status===1)return M._result.default;throw M._result}var Z={current:null},q={transition:null},ue={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:q,ReactCurrentOwner:F};function ae(){throw Error("act(...) is not supported in production builds of React.")}return Ue.Children={map:ie,forEach:function(M,$,le){ie(M,function(){$.apply(this,arguments)},le)},count:function(M){var $=0;return ie(M,function(){$++}),$},toArray:function(M){return ie(M,function($){return $})||[]},only:function(M){if(!ne(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Ue.Component=_,Ue.Fragment=t,Ue.Profiler=s,Ue.PureComponent=D,Ue.StrictMode=i,Ue.Suspense=f,Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ue,Ue.act=ae,Ue.cloneElement=function(M,$,le){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var me=A({},M.props),Se=M.key,Te=M.ref,Ce=M._owner;if($!=null){if($.ref!==void 0&&(Te=$.ref,Ce=F.current),$.key!==void 0&&(Se=""+$.key),M.type&&M.type.defaultProps)var De=M.type.defaultProps;for(He in $)B.call($,He)&&!X.hasOwnProperty(He)&&(me[He]=$[He]===void 0&&De!==void 0?De[He]:$[He])}var He=arguments.length-2;if(He===1)me.children=le;else if(1<He){De=Array(He);for(var Be=0;Be<He;Be++)De[Be]=arguments[Be+2];me.children=De}return{$$typeof:l,type:M.type,key:Se,ref:Te,props:me,_owner:Ce}},Ue.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:o,_context:M},M.Consumer=M},Ue.createElement=Y,Ue.createFactory=function(M){var $=Y.bind(null,M);return $.type=M,$},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(M){return{$$typeof:d,render:M}},Ue.isValidElement=ne,Ue.lazy=function(M){return{$$typeof:g,_payload:{_status:-1,_result:M},_init:re}},Ue.memo=function(M,$){return{$$typeof:p,type:M,compare:$===void 0?null:$}},Ue.startTransition=function(M){var $=q.transition;q.transition={};try{M()}finally{q.transition=$}},Ue.unstable_act=ae,Ue.useCallback=function(M,$){return Z.current.useCallback(M,$)},Ue.useContext=function(M){return Z.current.useContext(M)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(M){return Z.current.useDeferredValue(M)},Ue.useEffect=function(M,$){return Z.current.useEffect(M,$)},Ue.useId=function(){return Z.current.useId()},Ue.useImperativeHandle=function(M,$,le){return Z.current.useImperativeHandle(M,$,le)},Ue.useInsertionEffect=function(M,$){return Z.current.useInsertionEffect(M,$)},Ue.useLayoutEffect=function(M,$){return Z.current.useLayoutEffect(M,$)},Ue.useMemo=function(M,$){return Z.current.useMemo(M,$)},Ue.useReducer=function(M,$,le){return Z.current.useReducer(M,$,le)},Ue.useRef=function(M){return Z.current.useRef(M)},Ue.useState=function(M){return Z.current.useState(M)},Ue.useSyncExternalStore=function(M,$,le){return Z.current.useSyncExternalStore(M,$,le)},Ue.useTransition=function(){return Z.current.useTransition()},Ue.version="18.3.1",Ue}var yb;function F0(){return yb||(yb=1,Xy.exports=K1()),Xy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vb;function Y1(){if(vb)return Ku;vb=1;var l=F0(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(d,f,p){var g,y={},w=null,b=null;p!==void 0&&(w=""+p),f.key!==void 0&&(w=""+f.key),f.ref!==void 0&&(b=f.ref);for(g in f)i.call(f,g)&&!o.hasOwnProperty(g)&&(y[g]=f[g]);if(d&&d.defaultProps)for(g in f=d.defaultProps,f)y[g]===void 0&&(y[g]=f[g]);return{$$typeof:e,type:d,key:w,ref:b,props:y,_owner:s.current}}return Ku.Fragment=t,Ku.jsx=c,Ku.jsxs=c,Ku}var wb;function Q1(){return wb||(wb=1,Gy.exports=Y1()),Gy.exports}var P=Q1(),H=F0();const rl=PS(H);var Cp={},Ky={exports:{}},Dn={},Yy={exports:{}},Qy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ab;function J1(){return Ab||(Ab=1,(function(l){function e(q,ue){var ae=q.length;q.push(ue);e:for(;0<ae;){var M=ae-1>>>1,$=q[M];if(0<s($,ue))q[M]=ue,q[ae]=$,ae=M;else break e}}function t(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var ue=q[0],ae=q.pop();if(ae!==ue){q[0]=ae;e:for(var M=0,$=q.length,le=$>>>1;M<le;){var me=2*(M+1)-1,Se=q[me],Te=me+1,Ce=q[Te];if(0>s(Se,ae))Te<$&&0>s(Ce,Se)?(q[M]=Ce,q[Te]=ae,M=Te):(q[M]=Se,q[me]=ae,M=me);else if(Te<$&&0>s(Ce,ae))q[M]=Ce,q[Te]=ae,M=Te;else break e}}return ue}function s(q,ue){var ae=q.sortIndex-ue.sortIndex;return ae!==0?ae:q.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;l.unstable_now=function(){return o.now()}}else{var c=Date,d=c.now();l.unstable_now=function(){return c.now()-d}}var f=[],p=[],g=1,y=null,w=3,b=!1,A=!1,k=!1,_=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(q){for(var ue=t(p);ue!==null;){if(ue.callback===null)i(p);else if(ue.startTime<=q)i(p),ue.sortIndex=ue.expirationTime,e(f,ue);else break;ue=t(p)}}function z(q){if(k=!1,j(q),!A)if(t(f)!==null)A=!0,re(B);else{var ue=t(p);ue!==null&&Z(z,ue.startTime-q)}}function B(q,ue){A=!1,k&&(k=!1,R(Y),Y=-1),b=!0;var ae=w;try{for(j(ue),y=t(f);y!==null&&(!(y.expirationTime>ue)||q&&!oe());){var M=y.callback;if(typeof M=="function"){y.callback=null,w=y.priorityLevel;var $=M(y.expirationTime<=ue);ue=l.unstable_now(),typeof $=="function"?y.callback=$:y===t(f)&&i(f),j(ue)}else i(f);y=t(f)}if(y!==null)var le=!0;else{var me=t(p);me!==null&&Z(z,me.startTime-ue),le=!1}return le}finally{y=null,w=ae,b=!1}}var F=!1,X=null,Y=-1,Q=5,ne=-1;function oe(){return!(l.unstable_now()-ne<Q)}function _e(){if(X!==null){var q=l.unstable_now();ne=q;var ue=!0;try{ue=X(!0,q)}finally{ue?ge():(F=!1,X=null)}}else F=!1}var ge;if(typeof D=="function")ge=function(){D(_e)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,ie=de.port2;de.port1.onmessage=_e,ge=function(){ie.postMessage(null)}}else ge=function(){_(_e,0)};function re(q){X=q,F||(F=!0,ge())}function Z(q,ue){Y=_(function(){q(l.unstable_now())},ue)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(q){q.callback=null},l.unstable_continueExecution=function(){A||b||(A=!0,re(B))},l.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<q?Math.floor(1e3/q):5},l.unstable_getCurrentPriorityLevel=function(){return w},l.unstable_getFirstCallbackNode=function(){return t(f)},l.unstable_next=function(q){switch(w){case 1:case 2:case 3:var ue=3;break;default:ue=w}var ae=w;w=ue;try{return q()}finally{w=ae}},l.unstable_pauseExecution=function(){},l.unstable_requestPaint=function(){},l.unstable_runWithPriority=function(q,ue){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ae=w;w=q;try{return ue()}finally{w=ae}},l.unstable_scheduleCallback=function(q,ue,ae){var M=l.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?M+ae:M):ae=M,q){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=ae+$,q={id:g++,callback:ue,priorityLevel:q,startTime:ae,expirationTime:$,sortIndex:-1},ae>M?(q.sortIndex=ae,e(p,q),t(f)===null&&q===t(p)&&(k?(R(Y),Y=-1):k=!0,Z(z,ae-M))):(q.sortIndex=$,e(f,q),A||b||(A=!0,re(B))),q},l.unstable_shouldYield=oe,l.unstable_wrapCallback=function(q){var ue=w;return function(){var ae=w;w=ue;try{return q.apply(this,arguments)}finally{w=ae}}}})(Qy)),Qy}var bb;function Z1(){return bb||(bb=1,Yy.exports=J1()),Yy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sb;function eC(){if(Sb)return Dn;Sb=1;var l=F0(),e=Z1();function t(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,s={};function o(n,r){c(n,r),c(n+"Capture",r)}function c(n,r){for(s[n]=r,n=0;n<r.length;n++)i.add(r[n])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function w(n){return f.call(y,n)?!0:f.call(g,n)?!1:p.test(n)?y[n]=!0:(g[n]=!0,!1)}function b(n,r,a,h){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function A(n,r,a,h){if(r===null||typeof r>"u"||b(n,r,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function k(n,r,a,h,m,v,E){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=h,this.attributeNamespace=m,this.mustUseProperty=a,this.propertyName=n,this.type=r,this.sanitizeURL=v,this.removeEmptyString=E}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){_[n]=new k(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];_[r]=new k(r,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){_[n]=new k(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){_[n]=new k(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){_[n]=new k(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){_[n]=new k(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){_[n]=new k(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){_[n]=new k(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){_[n]=new k(n,5,!1,n.toLowerCase(),null,!1,!1)});var R=/[\-:]([a-z])/g;function D(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(R,D);_[r]=new k(r,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(R,D);_[r]=new k(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(R,D);_[r]=new k(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){_[n]=new k(n,1,!1,n.toLowerCase(),null,!1,!1)}),_.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){_[n]=new k(n,1,!1,n.toLowerCase(),null,!0,!0)});function j(n,r,a,h){var m=_.hasOwnProperty(r)?_[r]:null;(m!==null?m.type!==0:h||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(A(r,a,m,h)&&(a=null),h||m===null?w(r)&&(a===null?n.removeAttribute(r):n.setAttribute(r,""+a)):m.mustUseProperty?n[m.propertyName]=a===null?m.type===3?!1:"":a:(r=m.attributeName,h=m.attributeNamespace,a===null?n.removeAttribute(r):(m=m.type,a=m===3||m===4&&a===!0?"":""+a,h?n.setAttributeNS(h,r,a):n.setAttribute(r,a))))}var z=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,B=Symbol.for("react.element"),F=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),ne=Symbol.for("react.provider"),oe=Symbol.for("react.context"),_e=Symbol.for("react.forward_ref"),ge=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),ie=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),q=Symbol.iterator;function ue(n){return n===null||typeof n!="object"?null:(n=q&&n[q]||n["@@iterator"],typeof n=="function"?n:null)}var ae=Object.assign,M;function $(n){if(M===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);M=r&&r[1]||""}return`
`+M+n}var le=!1;function me(n,r){if(!n||le)return"";le=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(V){var h=V}Reflect.construct(n,[],r)}else{try{r.call()}catch(V){h=V}n.call(r.prototype)}else{try{throw Error()}catch(V){h=V}n()}}catch(V){if(V&&h&&typeof V.stack=="string"){for(var m=V.stack.split(`
`),v=h.stack.split(`
`),E=m.length-1,L=v.length-1;1<=E&&0<=L&&m[E]!==v[L];)L--;for(;1<=E&&0<=L;E--,L--)if(m[E]!==v[L]){if(E!==1||L!==1)do if(E--,L--,0>L||m[E]!==v[L]){var I=`
`+m[E].replace(" at new "," at ");return n.displayName&&I.includes("<anonymous>")&&(I=I.replace("<anonymous>",n.displayName)),I}while(1<=E&&0<=L);break}}}finally{le=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?$(n):""}function Se(n){switch(n.tag){case 5:return $(n.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return n=me(n.type,!1),n;case 11:return n=me(n.type.render,!1),n;case 1:return n=me(n.type,!0),n;default:return""}}function Te(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case X:return"Fragment";case F:return"Portal";case Q:return"Profiler";case Y:return"StrictMode";case ge:return"Suspense";case de:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case oe:return(n.displayName||"Context")+".Consumer";case ne:return(n._context.displayName||"Context")+".Provider";case _e:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ie:return r=n.displayName||null,r!==null?r:Te(n.type)||"Memo";case re:r=n._payload,n=n._init;try{return Te(n(r))}catch{}}return null}function Ce(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Te(r);case 8:return r===Y?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function De(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function He(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Be(n){var r=He(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),h=""+n[r];if(!n.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var m=a.get,v=a.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return m.call(this)},set:function(E){h=""+E,v.call(this,E)}}),Object.defineProperty(n,r,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(E){h=""+E},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Wn(n){n._valueTracker||(n._valueTracker=Be(n))}function vn(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),h="";return n&&(h=He(n)?n.checked?"true":"false":n.value),n=h,n!==a?(r.setValue(n),!0):!1}function qe(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Oe(n,r){var a=r.checked;return ae({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function je(n,r){var a=r.defaultValue==null?"":r.defaultValue,h=r.checked!=null?r.checked:r.defaultChecked;a=De(r.value!=null?r.value:a),n._wrapperState={initialChecked:h,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function et(n,r){r=r.checked,r!=null&&j(n,"checked",r,!1)}function Lt(n,r){et(n,r);var a=De(r.value),h=r.type;if(a!=null)h==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?kn(n,r.type,a):r.hasOwnProperty("defaultValue")&&kn(n,r.type,De(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function xt(n,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var h=r.type;if(!(h!=="submit"&&h!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,a||r===n.value||(n.value=r),n.defaultValue=r}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function kn(n,r,a){(r!=="number"||qe(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Li=Array.isArray;function gt(n,r,a,h){if(n=n.options,r){r={};for(var m=0;m<a.length;m++)r["$"+a[m]]=!0;for(a=0;a<n.length;a++)m=r.hasOwnProperty("$"+n[a].value),n[a].selected!==m&&(n[a].selected=m),m&&h&&(n[a].defaultSelected=!0)}else{for(a=""+De(a),r=null,m=0;m<n.length;m++){if(n[m].value===a){n[m].selected=!0,h&&(n[m].defaultSelected=!0);return}r!==null||n[m].disabled||(r=n[m])}r!==null&&(r.selected=!0)}}function Ir(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function ml(n,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(t(92));if(Li(a)){if(1<a.length)throw Error(t(93));a=a[0]}r=a}r==null&&(r=""),a=r}n._wrapperState={initialValue:De(a)}}function Mi(n,r){var a=De(r.value),h=De(r.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),r.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),h!=null&&(n.defaultValue=""+h)}function sr(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function or(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xt(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?or(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var hi,ar=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,h,m){MSApp.execUnsafeLocalFunction(function(){return n(r,a,h,m)})}:n})(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for(hi=hi||document.createElement("div"),hi.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=hi.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function fi(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var Rs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gf=["Webkit","ms","Moz","O"];Object.keys(Rs).forEach(function(n){gf.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),Rs[r]=Rs[n]})});function uu(n,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||Rs.hasOwnProperty(n)&&Rs[n]?(""+r).trim():r+"px"}function du(n,r){n=n.style;for(var a in r)if(r.hasOwnProperty(a)){var h=a.indexOf("--")===0,m=uu(a,r[a],h);a==="float"&&(a="cssFloat"),h?n.setProperty(a,m):n[a]=m}}var hu=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yl(n,r){if(r){if(hu[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(t(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(t(61))}if(r.style!=null&&typeof r.style!="object")throw Error(t(62))}}function Ps(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Di=null;function vl(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ko=null,Fr=null,Ls=null;function fu(n){if(n=Iu(n)){if(typeof ko!="function")throw Error(t(280));var r=n.stateNode;r&&(r=Hf(r),ko(n.stateNode,n.type,r))}}function pu(n){Fr?Ls?Ls.push(n):Ls=[n]:Fr=n}function To(){if(Fr){var n=Fr,r=Ls;if(Ls=Fr=null,fu(n),r)for(n=0;n<r.length;n++)fu(r[n])}}function wl(n,r){return n(r)}function Ro(){}var Po=!1;function Lo(n,r,a){if(Po)return n(r,a);Po=!0;try{return wl(n,r,a)}finally{Po=!1,(Fr!==null||Ls!==null)&&(Ro(),To())}}function Or(n,r){var a=n.stateNode;if(a===null)return null;var h=Hf(a);if(h===null)return null;a=h[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,r,typeof a));return a}var Ms=!1;if(d)try{var Nr={};Object.defineProperty(Nr,"passive",{get:function(){Ms=!0}}),window.addEventListener("test",Nr,Nr),window.removeEventListener("test",Nr,Nr)}catch{Ms=!1}function gu(n,r,a,h,m,v,E,L,I){var V=Array.prototype.slice.call(arguments,3);try{r.apply(a,V)}catch(ee){this.onError(ee)}}var Ds=!1,Is=null,Mo=!1,Do=null,cm={onError:function(n){Ds=!0,Is=n}};function mu(n,r,a,h,m,v,E,L,I){Ds=!1,Is=null,gu.apply(cm,arguments)}function mf(n,r,a,h,m,v,E,L,I){if(mu.apply(this,arguments),Ds){if(Ds){var V=Is;Ds=!1,Is=null}else throw Error(t(198));Mo||(Mo=!0,Do=V)}}function Ii(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function yf(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function Al(n){if(Ii(n)!==n)throw Error(t(188))}function vf(n){var r=n.alternate;if(!r){if(r=Ii(n),r===null)throw Error(t(188));return r!==n?null:n}for(var a=n,h=r;;){var m=a.return;if(m===null)break;var v=m.alternate;if(v===null){if(h=m.return,h!==null){a=h;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===a)return Al(m),n;if(v===h)return Al(m),r;v=v.sibling}throw Error(t(188))}if(a.return!==h.return)a=m,h=v;else{for(var E=!1,L=m.child;L;){if(L===a){E=!0,a=m,h=v;break}if(L===h){E=!0,h=m,a=v;break}L=L.sibling}if(!E){for(L=v.child;L;){if(L===a){E=!0,a=v,h=m;break}if(L===h){E=!0,h=v,a=m;break}L=L.sibling}if(!E)throw Error(t(189))}}if(a.alternate!==h)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:r}function bl(n){return n=vf(n),n!==null?wf(n):null}function wf(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=wf(n);if(r!==null)return r;n=n.sibling}return null}var Af=e.unstable_scheduleCallback,bf=e.unstable_cancelCallback,um=e.unstable_shouldYield,dm=e.unstable_requestPaint,mt=e.unstable_now,yu=e.unstable_getCurrentPriorityLevel,Sl=e.unstable_ImmediatePriority,vu=e.unstable_UserBlockingPriority,El=e.unstable_NormalPriority,hm=e.unstable_LowPriority,Sf=e.unstable_IdlePriority,xl=null,Vn=null;function fm(n){if(Vn&&typeof Vn.onCommitFiberRoot=="function")try{Vn.onCommitFiberRoot(xl,n,void 0,(n.current.flags&128)===128)}catch{}}var Mt=Math.clz32?Math.clz32:xf,wu=Math.log,Ef=Math.LN2;function xf(n){return n>>>=0,n===0?32:31-(wu(n)/Ef|0)|0}var Io=64,Fi=4194304;function Fo(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function _l(n,r){var a=n.pendingLanes;if(a===0)return 0;var h=0,m=n.suspendedLanes,v=n.pingedLanes,E=a&268435455;if(E!==0){var L=E&~m;L!==0?h=Fo(L):(v&=E,v!==0&&(h=Fo(v)))}else E=a&~m,E!==0?h=Fo(E):v!==0&&(h=Fo(v));if(h===0)return 0;if(r!==0&&r!==h&&(r&m)===0&&(m=h&-h,v=r&-r,m>=v||m===16&&(v&4194240)!==0))return r;if((h&4)!==0&&(h|=a&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=h;0<r;)a=31-Mt(r),m=1<<a,h|=n[a],r&=~m;return h}function pm(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gm(n,r){for(var a=n.suspendedLanes,h=n.pingedLanes,m=n.expirationTimes,v=n.pendingLanes;0<v;){var E=31-Mt(v),L=1<<E,I=m[E];I===-1?((L&a)===0||(L&h)!==0)&&(m[E]=pm(L,r)):I<=r&&(n.expiredLanes|=L),v&=~L}}function Au(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Cl(){var n=Io;return Io<<=1,(Io&4194240)===0&&(Io=64),n}function bu(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function qn(n,r,a){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-Mt(r),n[r]=a}function mm(n,r){var a=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<a;){var m=31-Mt(a),v=1<<m;r[m]=0,h[m]=-1,n[m]=-1,a&=~v}}function kl(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var h=31-Mt(a),m=1<<h;m&r|n[h]&r&&(n[h]|=r),a&=~m}}var Ke=0;function _f(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Cf,Su,Tl,Oo,Rl,No=!1,Fs=[],lr=null,Oi=null,cr=null,jo=new Map,zo=new Map,Kt=[],ym="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kf(n,r){switch(n){case"focusin":case"focusout":lr=null;break;case"dragenter":case"dragleave":Oi=null;break;case"mouseover":case"mouseout":cr=null;break;case"pointerover":case"pointerout":jo.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":zo.delete(r.pointerId)}}function Bo(n,r,a,h,m,v){return n===null||n.nativeEvent!==v?(n={blockedOn:r,domEventName:a,eventSystemFlags:h,nativeEvent:v,targetContainers:[m]},r!==null&&(r=Iu(r),r!==null&&Su(r)),n):(n.eventSystemFlags|=h,r=n.targetContainers,m!==null&&r.indexOf(m)===-1&&r.push(m),n)}function vm(n,r,a,h,m){switch(r){case"focusin":return lr=Bo(lr,n,r,a,h,m),!0;case"dragenter":return Oi=Bo(Oi,n,r,a,h,m),!0;case"mouseover":return cr=Bo(cr,n,r,a,h,m),!0;case"pointerover":var v=m.pointerId;return jo.set(v,Bo(jo.get(v)||null,n,r,a,h,m)),!0;case"gotpointercapture":return v=m.pointerId,zo.set(v,Bo(zo.get(v)||null,n,r,a,h,m)),!0}return!1}function Tf(n){var r=$o(n.target);if(r!==null){var a=Ii(r);if(a!==null){if(r=a.tag,r===13){if(r=yf(a),r!==null){n.blockedOn=r,Rl(n.priority,function(){Tl(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Pl(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=pi(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var h=new a.constructor(a.type,a);Di=h,a.target.dispatchEvent(h),Di=null}else return r=Iu(a),r!==null&&Su(r),n.blockedOn=a,!1;r.shift()}return!0}function Rf(n,r,a){Pl(n)&&a.delete(r)}function wm(){No=!1,lr!==null&&Pl(lr)&&(lr=null),Oi!==null&&Pl(Oi)&&(Oi=null),cr!==null&&Pl(cr)&&(cr=null),jo.forEach(Rf),zo.forEach(Rf)}function Ho(n,r){n.blockedOn===r&&(n.blockedOn=null,No||(No=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,wm)))}function Uo(n){function r(m){return Ho(m,n)}if(0<Fs.length){Ho(Fs[0],n);for(var a=1;a<Fs.length;a++){var h=Fs[a];h.blockedOn===n&&(h.blockedOn=null)}}for(lr!==null&&Ho(lr,n),Oi!==null&&Ho(Oi,n),cr!==null&&Ho(cr,n),jo.forEach(r),zo.forEach(r),a=0;a<Kt.length;a++)h=Kt[a],h.blockedOn===n&&(h.blockedOn=null);for(;0<Kt.length&&(a=Kt[0],a.blockedOn===null);)Tf(a),a.blockedOn===null&&Kt.shift()}var S=z.ReactCurrentBatchConfig,N=!0;function K(n,r,a,h){var m=Ke,v=S.transition;S.transition=null;try{Ke=1,xe(n,r,a,h)}finally{Ke=m,S.transition=v}}function ce(n,r,a,h){var m=Ke,v=S.transition;S.transition=null;try{Ke=4,xe(n,r,a,h)}finally{Ke=m,S.transition=v}}function xe(n,r,a,h){if(N){var m=pi(n,r,a,h);if(m===null)Om(n,r,h,tt,a),kf(n,h);else if(vm(m,n,r,a,h))h.stopPropagation();else if(kf(n,h),r&4&&-1<ym.indexOf(n)){for(;m!==null;){var v=Iu(m);if(v!==null&&Cf(v),v=pi(n,r,a,h),v===null&&Om(n,r,h,tt,a),v===m)break;m=v}m!==null&&h.stopPropagation()}else Om(n,r,h,null,a)}}var tt=null;function pi(n,r,a,h){if(tt=null,n=vl(h),n=$o(n),n!==null)if(r=Ii(n),r===null)n=null;else if(a=r.tag,a===13){if(n=yf(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return tt=n,null}function Ll(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yu()){case Sl:return 1;case vu:return 4;case El:case hm:return 16;case Sf:return 536870912;default:return 16}default:return 16}}var gi=null,Am=null,Pf=null;function nw(){if(Pf)return Pf;var n,r=Am,a=r.length,h,m="value"in gi?gi.value:gi.textContent,v=m.length;for(n=0;n<a&&r[n]===m[n];n++);var E=a-n;for(h=1;h<=E&&r[a-h]===m[v-h];h++);return Pf=m.slice(n,1<h?1-h:void 0)}function Lf(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Mf(){return!0}function iw(){return!1}function Gn(n){function r(a,h,m,v,E){this._reactName=a,this._targetInst=m,this.type=h,this.nativeEvent=v,this.target=E,this.currentTarget=null;for(var L in n)n.hasOwnProperty(L)&&(a=n[L],this[L]=a?a(v):v[L]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Mf:iw,this.isPropagationStopped=iw,this}return ae(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Mf)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Mf)},persist:function(){},isPersistent:Mf}),r}var Ml={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bm=Gn(Ml),Eu=ae({},Ml,{view:0,detail:0}),A_=Gn(Eu),Sm,Em,xu,Df=ae({},Eu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_m,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==xu&&(xu&&n.type==="mousemove"?(Sm=n.screenX-xu.screenX,Em=n.screenY-xu.screenY):Em=Sm=0,xu=n),Sm)},movementY:function(n){return"movementY"in n?n.movementY:Em}}),rw=Gn(Df),b_=ae({},Df,{dataTransfer:0}),S_=Gn(b_),E_=ae({},Eu,{relatedTarget:0}),xm=Gn(E_),x_=ae({},Ml,{animationName:0,elapsedTime:0,pseudoElement:0}),__=Gn(x_),C_=ae({},Ml,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),k_=Gn(C_),T_=ae({},Ml,{data:0}),sw=Gn(T_),R_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},P_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},L_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function M_(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=L_[n])?!!r[n]:!1}function _m(){return M_}var D_=ae({},Eu,{key:function(n){if(n.key){var r=R_[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Lf(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?P_[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_m,charCode:function(n){return n.type==="keypress"?Lf(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Lf(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),I_=Gn(D_),F_=ae({},Df,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ow=Gn(F_),O_=ae({},Eu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_m}),N_=Gn(O_),j_=ae({},Ml,{propertyName:0,elapsedTime:0,pseudoElement:0}),z_=Gn(j_),B_=ae({},Df,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),H_=Gn(B_),U_=[9,13,27,32],Cm=d&&"CompositionEvent"in window,_u=null;d&&"documentMode"in document&&(_u=document.documentMode);var $_=d&&"TextEvent"in window&&!_u,aw=d&&(!Cm||_u&&8<_u&&11>=_u),lw=" ",cw=!1;function uw(n,r){switch(n){case"keyup":return U_.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dw(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Dl=!1;function W_(n,r){switch(n){case"compositionend":return dw(r);case"keypress":return r.which!==32?null:(cw=!0,lw);case"textInput":return n=r.data,n===lw&&cw?null:n;default:return null}}function V_(n,r){if(Dl)return n==="compositionend"||!Cm&&uw(n,r)?(n=nw(),Pf=Am=gi=null,Dl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return aw&&r.locale!=="ko"?null:r.data;default:return null}}var q_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hw(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!q_[n.type]:r==="textarea"}function fw(n,r,a,h){pu(h),r=jf(r,"onChange"),0<r.length&&(a=new bm("onChange","change",null,a,h),n.push({event:a,listeners:r}))}var Cu=null,ku=null;function G_(n){Lw(n,0)}function If(n){var r=jl(n);if(vn(r))return n}function X_(n,r){if(n==="change")return r}var pw=!1;if(d){var km;if(d){var Tm="oninput"in document;if(!Tm){var gw=document.createElement("div");gw.setAttribute("oninput","return;"),Tm=typeof gw.oninput=="function"}km=Tm}else km=!1;pw=km&&(!document.documentMode||9<document.documentMode)}function mw(){Cu&&(Cu.detachEvent("onpropertychange",yw),ku=Cu=null)}function yw(n){if(n.propertyName==="value"&&If(ku)){var r=[];fw(r,ku,n,vl(n)),Lo(G_,r)}}function K_(n,r,a){n==="focusin"?(mw(),Cu=r,ku=a,Cu.attachEvent("onpropertychange",yw)):n==="focusout"&&mw()}function Y_(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return If(ku)}function Q_(n,r){if(n==="click")return If(r)}function J_(n,r){if(n==="input"||n==="change")return If(r)}function Z_(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Ni=typeof Object.is=="function"?Object.is:Z_;function Tu(n,r){if(Ni(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),h=Object.keys(r);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var m=a[h];if(!f.call(r,m)||!Ni(n[m],r[m]))return!1}return!0}function vw(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ww(n,r){var a=vw(n);n=0;for(var h;a;){if(a.nodeType===3){if(h=n+a.textContent.length,n<=r&&h>=r)return{node:a,offset:r-n};n=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=vw(a)}}function Aw(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Aw(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function bw(){for(var n=window,r=qe();r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=qe(n.document)}return r}function Rm(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function e1(n){var r=bw(),a=n.focusedElem,h=n.selectionRange;if(r!==a&&a&&a.ownerDocument&&Aw(a.ownerDocument.documentElement,a)){if(h!==null&&Rm(a)){if(r=h.start,n=h.end,n===void 0&&(n=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(n,a.value.length);else if(n=(r=a.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var m=a.textContent.length,v=Math.min(h.start,m);h=h.end===void 0?v:Math.min(h.end,m),!n.extend&&v>h&&(m=h,h=v,v=m),m=ww(a,v);var E=ww(a,h);m&&E&&(n.rangeCount!==1||n.anchorNode!==m.node||n.anchorOffset!==m.offset||n.focusNode!==E.node||n.focusOffset!==E.offset)&&(r=r.createRange(),r.setStart(m.node,m.offset),n.removeAllRanges(),v>h?(n.addRange(r),n.extend(E.node,E.offset)):(r.setEnd(E.node,E.offset),n.addRange(r)))}}for(r=[],n=a;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)n=r[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var t1=d&&"documentMode"in document&&11>=document.documentMode,Il=null,Pm=null,Ru=null,Lm=!1;function Sw(n,r,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Lm||Il==null||Il!==qe(h)||(h=Il,"selectionStart"in h&&Rm(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ru&&Tu(Ru,h)||(Ru=h,h=jf(Pm,"onSelect"),0<h.length&&(r=new bm("onSelect","select",null,r,a),n.push({event:r,listeners:h}),r.target=Il)))}function Ff(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var Fl={animationend:Ff("Animation","AnimationEnd"),animationiteration:Ff("Animation","AnimationIteration"),animationstart:Ff("Animation","AnimationStart"),transitionend:Ff("Transition","TransitionEnd")},Mm={},Ew={};d&&(Ew=document.createElement("div").style,"AnimationEvent"in window||(delete Fl.animationend.animation,delete Fl.animationiteration.animation,delete Fl.animationstart.animation),"TransitionEvent"in window||delete Fl.transitionend.transition);function Of(n){if(Mm[n])return Mm[n];if(!Fl[n])return n;var r=Fl[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in Ew)return Mm[n]=r[a];return n}var xw=Of("animationend"),_w=Of("animationiteration"),Cw=Of("animationstart"),kw=Of("transitionend"),Tw=new Map,Rw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Os(n,r){Tw.set(n,r),o(r,[n])}for(var Dm=0;Dm<Rw.length;Dm++){var Im=Rw[Dm],n1=Im.toLowerCase(),i1=Im[0].toUpperCase()+Im.slice(1);Os(n1,"on"+i1)}Os(xw,"onAnimationEnd"),Os(_w,"onAnimationIteration"),Os(Cw,"onAnimationStart"),Os("dblclick","onDoubleClick"),Os("focusin","onFocus"),Os("focusout","onBlur"),Os(kw,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),r1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pu));function Pw(n,r,a){var h=n.type||"unknown-event";n.currentTarget=a,mf(h,r,void 0,n),n.currentTarget=null}function Lw(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var h=n[a],m=h.event;h=h.listeners;e:{var v=void 0;if(r)for(var E=h.length-1;0<=E;E--){var L=h[E],I=L.instance,V=L.currentTarget;if(L=L.listener,I!==v&&m.isPropagationStopped())break e;Pw(m,L,V),v=I}else for(E=0;E<h.length;E++){if(L=h[E],I=L.instance,V=L.currentTarget,L=L.listener,I!==v&&m.isPropagationStopped())break e;Pw(m,L,V),v=I}}}if(Mo)throw n=Do,Mo=!1,Do=null,n}function ft(n,r){var a=r[Um];a===void 0&&(a=r[Um]=new Set);var h=n+"__bubble";a.has(h)||(Mw(r,n,2,!1),a.add(h))}function Fm(n,r,a){var h=0;r&&(h|=4),Mw(a,n,h,r)}var Nf="_reactListening"+Math.random().toString(36).slice(2);function Lu(n){if(!n[Nf]){n[Nf]=!0,i.forEach(function(a){a!=="selectionchange"&&(r1.has(a)||Fm(a,!1,n),Fm(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Nf]||(r[Nf]=!0,Fm("selectionchange",!1,r))}}function Mw(n,r,a,h){switch(Ll(r)){case 1:var m=K;break;case 4:m=ce;break;default:m=xe}a=m.bind(null,r,a,n),m=void 0,!Ms||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(m=!0),h?m!==void 0?n.addEventListener(r,a,{capture:!0,passive:m}):n.addEventListener(r,a,!0):m!==void 0?n.addEventListener(r,a,{passive:m}):n.addEventListener(r,a,!1)}function Om(n,r,a,h,m){var v=h;if((r&1)===0&&(r&2)===0&&h!==null)e:for(;;){if(h===null)return;var E=h.tag;if(E===3||E===4){var L=h.stateNode.containerInfo;if(L===m||L.nodeType===8&&L.parentNode===m)break;if(E===4)for(E=h.return;E!==null;){var I=E.tag;if((I===3||I===4)&&(I=E.stateNode.containerInfo,I===m||I.nodeType===8&&I.parentNode===m))return;E=E.return}for(;L!==null;){if(E=$o(L),E===null)return;if(I=E.tag,I===5||I===6){h=v=E;continue e}L=L.parentNode}}h=h.return}Lo(function(){var V=v,ee=vl(a),te=[];e:{var J=Tw.get(n);if(J!==void 0){var pe=bm,ve=n;switch(n){case"keypress":if(Lf(a)===0)break e;case"keydown":case"keyup":pe=I_;break;case"focusin":ve="focus",pe=xm;break;case"focusout":ve="blur",pe=xm;break;case"beforeblur":case"afterblur":pe=xm;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=rw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=S_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=N_;break;case xw:case _w:case Cw:pe=__;break;case kw:pe=z_;break;case"scroll":pe=A_;break;case"wheel":pe=H_;break;case"copy":case"cut":case"paste":pe=k_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=ow}var Ae=(r&4)!==0,_t=!Ae&&n==="scroll",U=Ae?J!==null?J+"Capture":null:J;Ae=[];for(var O=V,W;O!==null;){W=O;var se=W.stateNode;if(W.tag===5&&se!==null&&(W=se,U!==null&&(se=Or(O,U),se!=null&&Ae.push(Mu(O,se,W)))),_t)break;O=O.return}0<Ae.length&&(J=new pe(J,ve,null,a,ee),te.push({event:J,listeners:Ae}))}}if((r&7)===0){e:{if(J=n==="mouseover"||n==="pointerover",pe=n==="mouseout"||n==="pointerout",J&&a!==Di&&(ve=a.relatedTarget||a.fromElement)&&($o(ve)||ve[jr]))break e;if((pe||J)&&(J=ee.window===ee?ee:(J=ee.ownerDocument)?J.defaultView||J.parentWindow:window,pe?(ve=a.relatedTarget||a.toElement,pe=V,ve=ve?$o(ve):null,ve!==null&&(_t=Ii(ve),ve!==_t||ve.tag!==5&&ve.tag!==6)&&(ve=null)):(pe=null,ve=V),pe!==ve)){if(Ae=rw,se="onMouseLeave",U="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(Ae=ow,se="onPointerLeave",U="onPointerEnter",O="pointer"),_t=pe==null?J:jl(pe),W=ve==null?J:jl(ve),J=new Ae(se,O+"leave",pe,a,ee),J.target=_t,J.relatedTarget=W,se=null,$o(ee)===V&&(Ae=new Ae(U,O+"enter",ve,a,ee),Ae.target=W,Ae.relatedTarget=_t,se=Ae),_t=se,pe&&ve)t:{for(Ae=pe,U=ve,O=0,W=Ae;W;W=Ol(W))O++;for(W=0,se=U;se;se=Ol(se))W++;for(;0<O-W;)Ae=Ol(Ae),O--;for(;0<W-O;)U=Ol(U),W--;for(;O--;){if(Ae===U||U!==null&&Ae===U.alternate)break t;Ae=Ol(Ae),U=Ol(U)}Ae=null}else Ae=null;pe!==null&&Dw(te,J,pe,Ae,!1),ve!==null&&_t!==null&&Dw(te,_t,ve,Ae,!0)}}e:{if(J=V?jl(V):window,pe=J.nodeName&&J.nodeName.toLowerCase(),pe==="select"||pe==="input"&&J.type==="file")var be=X_;else if(hw(J))if(pw)be=J_;else{be=Y_;var Re=K_}else(pe=J.nodeName)&&pe.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(be=Q_);if(be&&(be=be(n,V))){fw(te,be,a,ee);break e}Re&&Re(n,J,V),n==="focusout"&&(Re=J._wrapperState)&&Re.controlled&&J.type==="number"&&kn(J,"number",J.value)}switch(Re=V?jl(V):window,n){case"focusin":(hw(Re)||Re.contentEditable==="true")&&(Il=Re,Pm=V,Ru=null);break;case"focusout":Ru=Pm=Il=null;break;case"mousedown":Lm=!0;break;case"contextmenu":case"mouseup":case"dragend":Lm=!1,Sw(te,a,ee);break;case"selectionchange":if(t1)break;case"keydown":case"keyup":Sw(te,a,ee)}var Pe;if(Cm)e:{switch(n){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else Dl?uw(n,a)&&(Ie="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ie="onCompositionStart");Ie&&(aw&&a.locale!=="ko"&&(Dl||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&Dl&&(Pe=nw()):(gi=ee,Am="value"in gi?gi.value:gi.textContent,Dl=!0)),Re=jf(V,Ie),0<Re.length&&(Ie=new sw(Ie,n,null,a,ee),te.push({event:Ie,listeners:Re}),Pe?Ie.data=Pe:(Pe=dw(a),Pe!==null&&(Ie.data=Pe)))),(Pe=$_?W_(n,a):V_(n,a))&&(V=jf(V,"onBeforeInput"),0<V.length&&(ee=new sw("onBeforeInput","beforeinput",null,a,ee),te.push({event:ee,listeners:V}),ee.data=Pe))}Lw(te,r)})}function Mu(n,r,a){return{instance:n,listener:r,currentTarget:a}}function jf(n,r){for(var a=r+"Capture",h=[];n!==null;){var m=n,v=m.stateNode;m.tag===5&&v!==null&&(m=v,v=Or(n,a),v!=null&&h.unshift(Mu(n,v,m)),v=Or(n,r),v!=null&&h.push(Mu(n,v,m))),n=n.return}return h}function Ol(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Dw(n,r,a,h,m){for(var v=r._reactName,E=[];a!==null&&a!==h;){var L=a,I=L.alternate,V=L.stateNode;if(I!==null&&I===h)break;L.tag===5&&V!==null&&(L=V,m?(I=Or(a,v),I!=null&&E.unshift(Mu(a,I,L))):m||(I=Or(a,v),I!=null&&E.push(Mu(a,I,L)))),a=a.return}E.length!==0&&n.push({event:r,listeners:E})}var s1=/\r\n?/g,o1=/\u0000|\uFFFD/g;function Iw(n){return(typeof n=="string"?n:""+n).replace(s1,`
`).replace(o1,"")}function zf(n,r,a){if(r=Iw(r),Iw(n)!==r&&a)throw Error(t(425))}function Bf(){}var Nm=null,jm=null;function zm(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Bm=typeof setTimeout=="function"?setTimeout:void 0,a1=typeof clearTimeout=="function"?clearTimeout:void 0,Fw=typeof Promise=="function"?Promise:void 0,l1=typeof queueMicrotask=="function"?queueMicrotask:typeof Fw<"u"?function(n){return Fw.resolve(null).then(n).catch(c1)}:Bm;function c1(n){setTimeout(function(){throw n})}function Hm(n,r){var a=r,h=0;do{var m=a.nextSibling;if(n.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"){if(h===0){n.removeChild(m),Uo(r);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=m}while(a);Uo(r)}function Ns(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function Ow(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return n;r--}else a==="/$"&&r++}n=n.previousSibling}return null}var Nl=Math.random().toString(36).slice(2),ur="__reactFiber$"+Nl,Du="__reactProps$"+Nl,jr="__reactContainer$"+Nl,Um="__reactEvents$"+Nl,u1="__reactListeners$"+Nl,d1="__reactHandles$"+Nl;function $o(n){var r=n[ur];if(r)return r;for(var a=n.parentNode;a;){if(r=a[jr]||a[ur]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=Ow(n);n!==null;){if(a=n[ur])return a;n=Ow(n)}return r}n=a,a=n.parentNode}return null}function Iu(n){return n=n[ur]||n[jr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function jl(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Hf(n){return n[Du]||null}var $m=[],zl=-1;function js(n){return{current:n}}function pt(n){0>zl||(n.current=$m[zl],$m[zl]=null,zl--)}function dt(n,r){zl++,$m[zl]=n.current,n.current=r}var zs={},an=js(zs),Tn=js(!1),Wo=zs;function Bl(n,r){var a=n.type.contextTypes;if(!a)return zs;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===r)return h.__reactInternalMemoizedMaskedChildContext;var m={},v;for(v in a)m[v]=r[v];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=m),m}function Rn(n){return n=n.childContextTypes,n!=null}function Uf(){pt(Tn),pt(an)}function Nw(n,r,a){if(an.current!==zs)throw Error(t(168));dt(an,r),dt(Tn,a)}function jw(n,r,a){var h=n.stateNode;if(r=r.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var m in h)if(!(m in r))throw Error(t(108,Ce(n)||"Unknown",m));return ae({},a,h)}function $f(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||zs,Wo=an.current,dt(an,n),dt(Tn,Tn.current),!0}function zw(n,r,a){var h=n.stateNode;if(!h)throw Error(t(169));a?(n=jw(n,r,Wo),h.__reactInternalMemoizedMergedChildContext=n,pt(Tn),pt(an),dt(an,n)):pt(Tn),dt(Tn,a)}var zr=null,Wf=!1,Wm=!1;function Bw(n){zr===null?zr=[n]:zr.push(n)}function h1(n){Wf=!0,Bw(n)}function Bs(){if(!Wm&&zr!==null){Wm=!0;var n=0,r=Ke;try{var a=zr;for(Ke=1;n<a.length;n++){var h=a[n];do h=h(!0);while(h!==null)}zr=null,Wf=!1}catch(m){throw zr!==null&&(zr=zr.slice(n+1)),Af(Sl,Bs),m}finally{Ke=r,Wm=!1}}return null}var Hl=[],Ul=0,Vf=null,qf=0,mi=[],yi=0,Vo=null,Br=1,Hr="";function qo(n,r){Hl[Ul++]=qf,Hl[Ul++]=Vf,Vf=n,qf=r}function Hw(n,r,a){mi[yi++]=Br,mi[yi++]=Hr,mi[yi++]=Vo,Vo=n;var h=Br;n=Hr;var m=32-Mt(h)-1;h&=~(1<<m),a+=1;var v=32-Mt(r)+m;if(30<v){var E=m-m%5;v=(h&(1<<E)-1).toString(32),h>>=E,m-=E,Br=1<<32-Mt(r)+m|a<<m|h,Hr=v+n}else Br=1<<v|a<<m|h,Hr=n}function Vm(n){n.return!==null&&(qo(n,1),Hw(n,1,0))}function qm(n){for(;n===Vf;)Vf=Hl[--Ul],Hl[Ul]=null,qf=Hl[--Ul],Hl[Ul]=null;for(;n===Vo;)Vo=mi[--yi],mi[yi]=null,Hr=mi[--yi],mi[yi]=null,Br=mi[--yi],mi[yi]=null}var Xn=null,Kn=null,yt=!1,ji=null;function Uw(n,r){var a=bi(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=n,r=n.deletions,r===null?(n.deletions=[a],n.flags|=16):r.push(a)}function $w(n,r){switch(n.tag){case 5:var a=n.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,Xn=n,Kn=Ns(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,Xn=n,Kn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=Vo!==null?{id:Br,overflow:Hr}:null,n.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=bi(18,null,null,0),a.stateNode=r,a.return=n,n.child=a,Xn=n,Kn=null,!0):!1;default:return!1}}function Gm(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Xm(n){if(yt){var r=Kn;if(r){var a=r;if(!$w(n,r)){if(Gm(n))throw Error(t(418));r=Ns(a.nextSibling);var h=Xn;r&&$w(n,r)?Uw(h,a):(n.flags=n.flags&-4097|2,yt=!1,Xn=n)}}else{if(Gm(n))throw Error(t(418));n.flags=n.flags&-4097|2,yt=!1,Xn=n}}}function Ww(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Xn=n}function Gf(n){if(n!==Xn)return!1;if(!yt)return Ww(n),yt=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!zm(n.type,n.memoizedProps)),r&&(r=Kn)){if(Gm(n))throw Vw(),Error(t(418));for(;r;)Uw(n,r),r=Ns(r.nextSibling)}if(Ww(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(r===0){Kn=Ns(n.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}n=n.nextSibling}Kn=null}}else Kn=Xn?Ns(n.stateNode.nextSibling):null;return!0}function Vw(){for(var n=Kn;n;)n=Ns(n.nextSibling)}function $l(){Kn=Xn=null,yt=!1}function Km(n){ji===null?ji=[n]:ji.push(n)}var f1=z.ReactCurrentBatchConfig;function Fu(n,r,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var h=a.stateNode}if(!h)throw Error(t(147,n));var m=h,v=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===v?r.ref:(r=function(E){var L=m.refs;E===null?delete L[v]:L[v]=E},r._stringRef=v,r)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Xf(n,r){throw n=Object.prototype.toString.call(r),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function qw(n){var r=n._init;return r(n._payload)}function Gw(n){function r(U,O){if(n){var W=U.deletions;W===null?(U.deletions=[O],U.flags|=16):W.push(O)}}function a(U,O){if(!n)return null;for(;O!==null;)r(U,O),O=O.sibling;return null}function h(U,O){for(U=new Map;O!==null;)O.key!==null?U.set(O.key,O):U.set(O.index,O),O=O.sibling;return U}function m(U,O){return U=Xs(U,O),U.index=0,U.sibling=null,U}function v(U,O,W){return U.index=W,n?(W=U.alternate,W!==null?(W=W.index,W<O?(U.flags|=2,O):W):(U.flags|=2,O)):(U.flags|=1048576,O)}function E(U){return n&&U.alternate===null&&(U.flags|=2),U}function L(U,O,W,se){return O===null||O.tag!==6?(O=By(W,U.mode,se),O.return=U,O):(O=m(O,W),O.return=U,O)}function I(U,O,W,se){var be=W.type;return be===X?ee(U,O,W.props.children,se,W.key):O!==null&&(O.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===re&&qw(be)===O.type)?(se=m(O,W.props),se.ref=Fu(U,O,W),se.return=U,se):(se=vp(W.type,W.key,W.props,null,U.mode,se),se.ref=Fu(U,O,W),se.return=U,se)}function V(U,O,W,se){return O===null||O.tag!==4||O.stateNode.containerInfo!==W.containerInfo||O.stateNode.implementation!==W.implementation?(O=Hy(W,U.mode,se),O.return=U,O):(O=m(O,W.children||[]),O.return=U,O)}function ee(U,O,W,se,be){return O===null||O.tag!==7?(O=ea(W,U.mode,se,be),O.return=U,O):(O=m(O,W),O.return=U,O)}function te(U,O,W){if(typeof O=="string"&&O!==""||typeof O=="number")return O=By(""+O,U.mode,W),O.return=U,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case B:return W=vp(O.type,O.key,O.props,null,U.mode,W),W.ref=Fu(U,null,O),W.return=U,W;case F:return O=Hy(O,U.mode,W),O.return=U,O;case re:var se=O._init;return te(U,se(O._payload),W)}if(Li(O)||ue(O))return O=ea(O,U.mode,W,null),O.return=U,O;Xf(U,O)}return null}function J(U,O,W,se){var be=O!==null?O.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return be!==null?null:L(U,O,""+W,se);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case B:return W.key===be?I(U,O,W,se):null;case F:return W.key===be?V(U,O,W,se):null;case re:return be=W._init,J(U,O,be(W._payload),se)}if(Li(W)||ue(W))return be!==null?null:ee(U,O,W,se,null);Xf(U,W)}return null}function pe(U,O,W,se,be){if(typeof se=="string"&&se!==""||typeof se=="number")return U=U.get(W)||null,L(O,U,""+se,be);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case B:return U=U.get(se.key===null?W:se.key)||null,I(O,U,se,be);case F:return U=U.get(se.key===null?W:se.key)||null,V(O,U,se,be);case re:var Re=se._init;return pe(U,O,W,Re(se._payload),be)}if(Li(se)||ue(se))return U=U.get(W)||null,ee(O,U,se,be,null);Xf(O,se)}return null}function ve(U,O,W,se){for(var be=null,Re=null,Pe=O,Ie=O=0,Wt=null;Pe!==null&&Ie<W.length;Ie++){Pe.index>Ie?(Wt=Pe,Pe=null):Wt=Pe.sibling;var Je=J(U,Pe,W[Ie],se);if(Je===null){Pe===null&&(Pe=Wt);break}n&&Pe&&Je.alternate===null&&r(U,Pe),O=v(Je,O,Ie),Re===null?be=Je:Re.sibling=Je,Re=Je,Pe=Wt}if(Ie===W.length)return a(U,Pe),yt&&qo(U,Ie),be;if(Pe===null){for(;Ie<W.length;Ie++)Pe=te(U,W[Ie],se),Pe!==null&&(O=v(Pe,O,Ie),Re===null?be=Pe:Re.sibling=Pe,Re=Pe);return yt&&qo(U,Ie),be}for(Pe=h(U,Pe);Ie<W.length;Ie++)Wt=pe(Pe,U,Ie,W[Ie],se),Wt!==null&&(n&&Wt.alternate!==null&&Pe.delete(Wt.key===null?Ie:Wt.key),O=v(Wt,O,Ie),Re===null?be=Wt:Re.sibling=Wt,Re=Wt);return n&&Pe.forEach(function(Ks){return r(U,Ks)}),yt&&qo(U,Ie),be}function Ae(U,O,W,se){var be=ue(W);if(typeof be!="function")throw Error(t(150));if(W=be.call(W),W==null)throw Error(t(151));for(var Re=be=null,Pe=O,Ie=O=0,Wt=null,Je=W.next();Pe!==null&&!Je.done;Ie++,Je=W.next()){Pe.index>Ie?(Wt=Pe,Pe=null):Wt=Pe.sibling;var Ks=J(U,Pe,Je.value,se);if(Ks===null){Pe===null&&(Pe=Wt);break}n&&Pe&&Ks.alternate===null&&r(U,Pe),O=v(Ks,O,Ie),Re===null?be=Ks:Re.sibling=Ks,Re=Ks,Pe=Wt}if(Je.done)return a(U,Pe),yt&&qo(U,Ie),be;if(Pe===null){for(;!Je.done;Ie++,Je=W.next())Je=te(U,Je.value,se),Je!==null&&(O=v(Je,O,Ie),Re===null?be=Je:Re.sibling=Je,Re=Je);return yt&&qo(U,Ie),be}for(Pe=h(U,Pe);!Je.done;Ie++,Je=W.next())Je=pe(Pe,U,Ie,Je.value,se),Je!==null&&(n&&Je.alternate!==null&&Pe.delete(Je.key===null?Ie:Je.key),O=v(Je,O,Ie),Re===null?be=Je:Re.sibling=Je,Re=Je);return n&&Pe.forEach(function(q1){return r(U,q1)}),yt&&qo(U,Ie),be}function _t(U,O,W,se){if(typeof W=="object"&&W!==null&&W.type===X&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case B:e:{for(var be=W.key,Re=O;Re!==null;){if(Re.key===be){if(be=W.type,be===X){if(Re.tag===7){a(U,Re.sibling),O=m(Re,W.props.children),O.return=U,U=O;break e}}else if(Re.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===re&&qw(be)===Re.type){a(U,Re.sibling),O=m(Re,W.props),O.ref=Fu(U,Re,W),O.return=U,U=O;break e}a(U,Re);break}else r(U,Re);Re=Re.sibling}W.type===X?(O=ea(W.props.children,U.mode,se,W.key),O.return=U,U=O):(se=vp(W.type,W.key,W.props,null,U.mode,se),se.ref=Fu(U,O,W),se.return=U,U=se)}return E(U);case F:e:{for(Re=W.key;O!==null;){if(O.key===Re)if(O.tag===4&&O.stateNode.containerInfo===W.containerInfo&&O.stateNode.implementation===W.implementation){a(U,O.sibling),O=m(O,W.children||[]),O.return=U,U=O;break e}else{a(U,O);break}else r(U,O);O=O.sibling}O=Hy(W,U.mode,se),O.return=U,U=O}return E(U);case re:return Re=W._init,_t(U,O,Re(W._payload),se)}if(Li(W))return ve(U,O,W,se);if(ue(W))return Ae(U,O,W,se);Xf(U,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,O!==null&&O.tag===6?(a(U,O.sibling),O=m(O,W),O.return=U,U=O):(a(U,O),O=By(W,U.mode,se),O.return=U,U=O),E(U)):a(U,O)}return _t}var Wl=Gw(!0),Xw=Gw(!1),Kf=js(null),Yf=null,Vl=null,Ym=null;function Qm(){Ym=Vl=Yf=null}function Jm(n){var r=Kf.current;pt(Kf),n._currentValue=r}function Zm(n,r,a){for(;n!==null;){var h=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,h!==null&&(h.childLanes|=r)):h!==null&&(h.childLanes&r)!==r&&(h.childLanes|=r),n===a)break;n=n.return}}function ql(n,r){Yf=n,Ym=Vl=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&r)!==0&&(Pn=!0),n.firstContext=null)}function vi(n){var r=n._currentValue;if(Ym!==n)if(n={context:n,memoizedValue:r,next:null},Vl===null){if(Yf===null)throw Error(t(308));Vl=n,Yf.dependencies={lanes:0,firstContext:n}}else Vl=Vl.next=n;return r}var Go=null;function ey(n){Go===null?Go=[n]:Go.push(n)}function Kw(n,r,a,h){var m=r.interleaved;return m===null?(a.next=a,ey(r)):(a.next=m.next,m.next=a),r.interleaved=a,Ur(n,h)}function Ur(n,r){n.lanes|=r;var a=n.alternate;for(a!==null&&(a.lanes|=r),a=n,n=n.return;n!==null;)n.childLanes|=r,a=n.alternate,a!==null&&(a.childLanes|=r),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Hs=!1;function ty(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yw(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function $r(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function Us(n,r,a){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(Ye&2)!==0){var m=h.pending;return m===null?r.next=r:(r.next=m.next,m.next=r),h.pending=r,Ur(n,a)}return m=h.interleaved,m===null?(r.next=r,ey(h)):(r.next=m.next,m.next=r),h.interleaved=r,Ur(n,a)}function Qf(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var h=r.lanes;h&=n.pendingLanes,a|=h,r.lanes=a,kl(n,a)}}function Qw(n,r){var a=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var m=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var E={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};v===null?m=v=E:v=v.next=E,a=a.next}while(a!==null);v===null?m=v=r:v=v.next=r}else m=v=r;a={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:h.shared,effects:h.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}function Jf(n,r,a,h){var m=n.updateQueue;Hs=!1;var v=m.firstBaseUpdate,E=m.lastBaseUpdate,L=m.shared.pending;if(L!==null){m.shared.pending=null;var I=L,V=I.next;I.next=null,E===null?v=V:E.next=V,E=I;var ee=n.alternate;ee!==null&&(ee=ee.updateQueue,L=ee.lastBaseUpdate,L!==E&&(L===null?ee.firstBaseUpdate=V:L.next=V,ee.lastBaseUpdate=I))}if(v!==null){var te=m.baseState;E=0,ee=V=I=null,L=v;do{var J=L.lane,pe=L.eventTime;if((h&J)===J){ee!==null&&(ee=ee.next={eventTime:pe,lane:0,tag:L.tag,payload:L.payload,callback:L.callback,next:null});e:{var ve=n,Ae=L;switch(J=r,pe=a,Ae.tag){case 1:if(ve=Ae.payload,typeof ve=="function"){te=ve.call(pe,te,J);break e}te=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Ae.payload,J=typeof ve=="function"?ve.call(pe,te,J):ve,J==null)break e;te=ae({},te,J);break e;case 2:Hs=!0}}L.callback!==null&&L.lane!==0&&(n.flags|=64,J=m.effects,J===null?m.effects=[L]:J.push(L))}else pe={eventTime:pe,lane:J,tag:L.tag,payload:L.payload,callback:L.callback,next:null},ee===null?(V=ee=pe,I=te):ee=ee.next=pe,E|=J;if(L=L.next,L===null){if(L=m.shared.pending,L===null)break;J=L,L=J.next,J.next=null,m.lastBaseUpdate=J,m.shared.pending=null}}while(!0);if(ee===null&&(I=te),m.baseState=I,m.firstBaseUpdate=V,m.lastBaseUpdate=ee,r=m.shared.interleaved,r!==null){m=r;do E|=m.lane,m=m.next;while(m!==r)}else v===null&&(m.shared.lanes=0);Yo|=E,n.lanes=E,n.memoizedState=te}}function Jw(n,r,a){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var h=n[r],m=h.callback;if(m!==null){if(h.callback=null,h=a,typeof m!="function")throw Error(t(191,m));m.call(h)}}}var Ou={},dr=js(Ou),Nu=js(Ou),ju=js(Ou);function Xo(n){if(n===Ou)throw Error(t(174));return n}function ny(n,r){switch(dt(ju,r),dt(Nu,n),dt(dr,Ou),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Xt(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=Xt(r,n)}pt(dr),dt(dr,r)}function Gl(){pt(dr),pt(Nu),pt(ju)}function Zw(n){Xo(ju.current);var r=Xo(dr.current),a=Xt(r,n.type);r!==a&&(dt(Nu,n),dt(dr,a))}function iy(n){Nu.current===n&&(pt(dr),pt(Nu))}var vt=js(0);function Zf(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ry=[];function sy(){for(var n=0;n<ry.length;n++)ry[n]._workInProgressVersionPrimary=null;ry.length=0}var ep=z.ReactCurrentDispatcher,oy=z.ReactCurrentBatchConfig,Ko=0,wt=null,Dt=null,Ut=null,tp=!1,zu=!1,Bu=0,p1=0;function ln(){throw Error(t(321))}function ay(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!Ni(n[a],r[a]))return!1;return!0}function ly(n,r,a,h,m,v){if(Ko=v,wt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ep.current=n===null||n.memoizedState===null?v1:w1,n=a(h,m),zu){v=0;do{if(zu=!1,Bu=0,25<=v)throw Error(t(301));v+=1,Ut=Dt=null,r.updateQueue=null,ep.current=A1,n=a(h,m)}while(zu)}if(ep.current=rp,r=Dt!==null&&Dt.next!==null,Ko=0,Ut=Dt=wt=null,tp=!1,r)throw Error(t(300));return n}function cy(){var n=Bu!==0;return Bu=0,n}function hr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?wt.memoizedState=Ut=n:Ut=Ut.next=n,Ut}function wi(){if(Dt===null){var n=wt.alternate;n=n!==null?n.memoizedState:null}else n=Dt.next;var r=Ut===null?wt.memoizedState:Ut.next;if(r!==null)Ut=r,Dt=n;else{if(n===null)throw Error(t(310));Dt=n,n={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},Ut===null?wt.memoizedState=Ut=n:Ut=Ut.next=n}return Ut}function Hu(n,r){return typeof r=="function"?r(n):r}function uy(n){var r=wi(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var h=Dt,m=h.baseQueue,v=a.pending;if(v!==null){if(m!==null){var E=m.next;m.next=v.next,v.next=E}h.baseQueue=m=v,a.pending=null}if(m!==null){v=m.next,h=h.baseState;var L=E=null,I=null,V=v;do{var ee=V.lane;if((Ko&ee)===ee)I!==null&&(I=I.next={lane:0,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),h=V.hasEagerState?V.eagerState:n(h,V.action);else{var te={lane:ee,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null};I===null?(L=I=te,E=h):I=I.next=te,wt.lanes|=ee,Yo|=ee}V=V.next}while(V!==null&&V!==v);I===null?E=h:I.next=L,Ni(h,r.memoizedState)||(Pn=!0),r.memoizedState=h,r.baseState=E,r.baseQueue=I,a.lastRenderedState=h}if(n=a.interleaved,n!==null){m=n;do v=m.lane,wt.lanes|=v,Yo|=v,m=m.next;while(m!==n)}else m===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function dy(n){var r=wi(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var h=a.dispatch,m=a.pending,v=r.memoizedState;if(m!==null){a.pending=null;var E=m=m.next;do v=n(v,E.action),E=E.next;while(E!==m);Ni(v,r.memoizedState)||(Pn=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),a.lastRenderedState=v}return[v,h]}function eA(){}function tA(n,r){var a=wt,h=wi(),m=r(),v=!Ni(h.memoizedState,m);if(v&&(h.memoizedState=m,Pn=!0),h=h.queue,hy(rA.bind(null,a,h,n),[n]),h.getSnapshot!==r||v||Ut!==null&&Ut.memoizedState.tag&1){if(a.flags|=2048,Uu(9,iA.bind(null,a,h,m,r),void 0,null),$t===null)throw Error(t(349));(Ko&30)!==0||nA(a,r,m)}return m}function nA(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=wt.updateQueue,r===null?(r={lastEffect:null,stores:null},wt.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function iA(n,r,a,h){r.value=a,r.getSnapshot=h,sA(r)&&oA(n)}function rA(n,r,a){return a(function(){sA(r)&&oA(n)})}function sA(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!Ni(n,a)}catch{return!0}}function oA(n){var r=Ur(n,1);r!==null&&Ui(r,n,1,-1)}function aA(n){var r=hr();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hu,lastRenderedState:n},r.queue=n,n=n.dispatch=y1.bind(null,wt,n),[r.memoizedState,n]}function Uu(n,r,a,h){return n={tag:n,create:r,destroy:a,deps:h,next:null},r=wt.updateQueue,r===null?(r={lastEffect:null,stores:null},wt.updateQueue=r,r.lastEffect=n.next=n):(a=r.lastEffect,a===null?r.lastEffect=n.next=n:(h=a.next,a.next=n,n.next=h,r.lastEffect=n)),n}function lA(){return wi().memoizedState}function np(n,r,a,h){var m=hr();wt.flags|=n,m.memoizedState=Uu(1|r,a,void 0,h===void 0?null:h)}function ip(n,r,a,h){var m=wi();h=h===void 0?null:h;var v=void 0;if(Dt!==null){var E=Dt.memoizedState;if(v=E.destroy,h!==null&&ay(h,E.deps)){m.memoizedState=Uu(r,a,v,h);return}}wt.flags|=n,m.memoizedState=Uu(1|r,a,v,h)}function cA(n,r){return np(8390656,8,n,r)}function hy(n,r){return ip(2048,8,n,r)}function uA(n,r){return ip(4,2,n,r)}function dA(n,r){return ip(4,4,n,r)}function hA(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function fA(n,r,a){return a=a!=null?a.concat([n]):null,ip(4,4,hA.bind(null,r,n),a)}function fy(){}function pA(n,r){var a=wi();r=r===void 0?null:r;var h=a.memoizedState;return h!==null&&r!==null&&ay(r,h[1])?h[0]:(a.memoizedState=[n,r],n)}function gA(n,r){var a=wi();r=r===void 0?null:r;var h=a.memoizedState;return h!==null&&r!==null&&ay(r,h[1])?h[0]:(n=n(),a.memoizedState=[n,r],n)}function mA(n,r,a){return(Ko&21)===0?(n.baseState&&(n.baseState=!1,Pn=!0),n.memoizedState=a):(Ni(a,r)||(a=Cl(),wt.lanes|=a,Yo|=a,n.baseState=!0),r)}function g1(n,r){var a=Ke;Ke=a!==0&&4>a?a:4,n(!0);var h=oy.transition;oy.transition={};try{n(!1),r()}finally{Ke=a,oy.transition=h}}function yA(){return wi().memoizedState}function m1(n,r,a){var h=qs(n);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},vA(n))wA(r,a);else if(a=Kw(n,r,a,h),a!==null){var m=An();Ui(a,n,h,m),AA(a,r,h)}}function y1(n,r,a){var h=qs(n),m={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(vA(n))wA(r,m);else{var v=n.alternate;if(n.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var E=r.lastRenderedState,L=v(E,a);if(m.hasEagerState=!0,m.eagerState=L,Ni(L,E)){var I=r.interleaved;I===null?(m.next=m,ey(r)):(m.next=I.next,I.next=m),r.interleaved=m;return}}catch{}finally{}a=Kw(n,r,m,h),a!==null&&(m=An(),Ui(a,n,h,m),AA(a,r,h))}}function vA(n){var r=n.alternate;return n===wt||r!==null&&r===wt}function wA(n,r){zu=tp=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function AA(n,r,a){if((a&4194240)!==0){var h=r.lanes;h&=n.pendingLanes,a|=h,r.lanes=a,kl(n,a)}}var rp={readContext:vi,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useInsertionEffect:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useSyncExternalStore:ln,useId:ln,unstable_isNewReconciler:!1},v1={readContext:vi,useCallback:function(n,r){return hr().memoizedState=[n,r===void 0?null:r],n},useContext:vi,useEffect:cA,useImperativeHandle:function(n,r,a){return a=a!=null?a.concat([n]):null,np(4194308,4,hA.bind(null,r,n),a)},useLayoutEffect:function(n,r){return np(4194308,4,n,r)},useInsertionEffect:function(n,r){return np(4,2,n,r)},useMemo:function(n,r){var a=hr();return r=r===void 0?null:r,n=n(),a.memoizedState=[n,r],n},useReducer:function(n,r,a){var h=hr();return r=a!==void 0?a(r):r,h.memoizedState=h.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},h.queue=n,n=n.dispatch=m1.bind(null,wt,n),[h.memoizedState,n]},useRef:function(n){var r=hr();return n={current:n},r.memoizedState=n},useState:aA,useDebugValue:fy,useDeferredValue:function(n){return hr().memoizedState=n},useTransition:function(){var n=aA(!1),r=n[0];return n=g1.bind(null,n[1]),hr().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,a){var h=wt,m=hr();if(yt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=r(),$t===null)throw Error(t(349));(Ko&30)!==0||nA(h,r,a)}m.memoizedState=a;var v={value:a,getSnapshot:r};return m.queue=v,cA(rA.bind(null,h,v,n),[n]),h.flags|=2048,Uu(9,iA.bind(null,h,v,a,r),void 0,null),a},useId:function(){var n=hr(),r=$t.identifierPrefix;if(yt){var a=Hr,h=Br;a=(h&~(1<<32-Mt(h)-1)).toString(32)+a,r=":"+r+"R"+a,a=Bu++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=p1++,r=":"+r+"r"+a.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},w1={readContext:vi,useCallback:pA,useContext:vi,useEffect:hy,useImperativeHandle:fA,useInsertionEffect:uA,useLayoutEffect:dA,useMemo:gA,useReducer:uy,useRef:lA,useState:function(){return uy(Hu)},useDebugValue:fy,useDeferredValue:function(n){var r=wi();return mA(r,Dt.memoizedState,n)},useTransition:function(){var n=uy(Hu)[0],r=wi().memoizedState;return[n,r]},useMutableSource:eA,useSyncExternalStore:tA,useId:yA,unstable_isNewReconciler:!1},A1={readContext:vi,useCallback:pA,useContext:vi,useEffect:hy,useImperativeHandle:fA,useInsertionEffect:uA,useLayoutEffect:dA,useMemo:gA,useReducer:dy,useRef:lA,useState:function(){return dy(Hu)},useDebugValue:fy,useDeferredValue:function(n){var r=wi();return Dt===null?r.memoizedState=n:mA(r,Dt.memoizedState,n)},useTransition:function(){var n=dy(Hu)[0],r=wi().memoizedState;return[n,r]},useMutableSource:eA,useSyncExternalStore:tA,useId:yA,unstable_isNewReconciler:!1};function zi(n,r){if(n&&n.defaultProps){r=ae({},r),n=n.defaultProps;for(var a in n)r[a]===void 0&&(r[a]=n[a]);return r}return r}function py(n,r,a,h){r=n.memoizedState,a=a(h,r),a=a==null?r:ae({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var sp={isMounted:function(n){return(n=n._reactInternals)?Ii(n)===n:!1},enqueueSetState:function(n,r,a){n=n._reactInternals;var h=An(),m=qs(n),v=$r(h,m);v.payload=r,a!=null&&(v.callback=a),r=Us(n,v,m),r!==null&&(Ui(r,n,m,h),Qf(r,n,m))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var h=An(),m=qs(n),v=$r(h,m);v.tag=1,v.payload=r,a!=null&&(v.callback=a),r=Us(n,v,m),r!==null&&(Ui(r,n,m,h),Qf(r,n,m))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=An(),h=qs(n),m=$r(a,h);m.tag=2,r!=null&&(m.callback=r),r=Us(n,m,h),r!==null&&(Ui(r,n,h,a),Qf(r,n,h))}};function bA(n,r,a,h,m,v,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,v,E):r.prototype&&r.prototype.isPureReactComponent?!Tu(a,h)||!Tu(m,v):!0}function SA(n,r,a){var h=!1,m=zs,v=r.contextType;return typeof v=="object"&&v!==null?v=vi(v):(m=Rn(r)?Wo:an.current,h=r.contextTypes,v=(h=h!=null)?Bl(n,m):zs),r=new r(a,v),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=sp,n.stateNode=r,r._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=m,n.__reactInternalMemoizedMaskedChildContext=v),r}function EA(n,r,a,h){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,h),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,h),r.state!==n&&sp.enqueueReplaceState(r,r.state,null)}function gy(n,r,a,h){var m=n.stateNode;m.props=a,m.state=n.memoizedState,m.refs={},ty(n);var v=r.contextType;typeof v=="object"&&v!==null?m.context=vi(v):(v=Rn(r)?Wo:an.current,m.context=Bl(n,v)),m.state=n.memoizedState,v=r.getDerivedStateFromProps,typeof v=="function"&&(py(n,r,v,a),m.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(r=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),r!==m.state&&sp.enqueueReplaceState(m,m.state,null),Jf(n,a,m,h),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308)}function Xl(n,r){try{var a="",h=r;do a+=Se(h),h=h.return;while(h);var m=a}catch(v){m=`
Error generating stack: `+v.message+`
`+v.stack}return{value:n,source:r,stack:m,digest:null}}function my(n,r,a){return{value:n,source:null,stack:a??null,digest:r??null}}function yy(n,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var b1=typeof WeakMap=="function"?WeakMap:Map;function xA(n,r,a){a=$r(-1,a),a.tag=3,a.payload={element:null};var h=r.value;return a.callback=function(){hp||(hp=!0,My=h),yy(n,r)},a}function _A(n,r,a){a=$r(-1,a),a.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var m=r.value;a.payload=function(){return h(m)},a.callback=function(){yy(n,r)}}var v=n.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(a.callback=function(){yy(n,r),typeof h!="function"&&(Ws===null?Ws=new Set([this]):Ws.add(this));var E=r.stack;this.componentDidCatch(r.value,{componentStack:E!==null?E:""})}),a}function CA(n,r,a){var h=n.pingCache;if(h===null){h=n.pingCache=new b1;var m=new Set;h.set(r,m)}else m=h.get(r),m===void 0&&(m=new Set,h.set(r,m));m.has(a)||(m.add(a),n=F1.bind(null,n,r,a),r.then(n,n))}function kA(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function TA(n,r,a,h,m){return(n.mode&1)===0?(n===r?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=$r(-1,1),r.tag=2,Us(a,r,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=m,n)}var S1=z.ReactCurrentOwner,Pn=!1;function wn(n,r,a,h){r.child=n===null?Xw(r,null,a,h):Wl(r,n.child,a,h)}function RA(n,r,a,h,m){a=a.render;var v=r.ref;return ql(r,m),h=ly(n,r,a,h,v,m),a=cy(),n!==null&&!Pn?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~m,Wr(n,r,m)):(yt&&a&&Vm(r),r.flags|=1,wn(n,r,h,m),r.child)}function PA(n,r,a,h,m){if(n===null){var v=a.type;return typeof v=="function"&&!zy(v)&&v.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=v,LA(n,r,v,h,m)):(n=vp(a.type,null,h,r,r.mode,m),n.ref=r.ref,n.return=r,r.child=n)}if(v=n.child,(n.lanes&m)===0){var E=v.memoizedProps;if(a=a.compare,a=a!==null?a:Tu,a(E,h)&&n.ref===r.ref)return Wr(n,r,m)}return r.flags|=1,n=Xs(v,h),n.ref=r.ref,n.return=r,r.child=n}function LA(n,r,a,h,m){if(n!==null){var v=n.memoizedProps;if(Tu(v,h)&&n.ref===r.ref)if(Pn=!1,r.pendingProps=h=v,(n.lanes&m)!==0)(n.flags&131072)!==0&&(Pn=!0);else return r.lanes=n.lanes,Wr(n,r,m)}return vy(n,r,a,h,m)}function MA(n,r,a){var h=r.pendingProps,m=h.children,v=n!==null?n.memoizedState:null;if(h.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},dt(Yl,Yn),Yn|=a;else{if((a&1073741824)===0)return n=v!==null?v.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,dt(Yl,Yn),Yn|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=v!==null?v.baseLanes:a,dt(Yl,Yn),Yn|=h}else v!==null?(h=v.baseLanes|a,r.memoizedState=null):h=a,dt(Yl,Yn),Yn|=h;return wn(n,r,m,a),r.child}function DA(n,r){var a=r.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function vy(n,r,a,h,m){var v=Rn(a)?Wo:an.current;return v=Bl(r,v),ql(r,m),a=ly(n,r,a,h,v,m),h=cy(),n!==null&&!Pn?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~m,Wr(n,r,m)):(yt&&h&&Vm(r),r.flags|=1,wn(n,r,a,m),r.child)}function IA(n,r,a,h,m){if(Rn(a)){var v=!0;$f(r)}else v=!1;if(ql(r,m),r.stateNode===null)ap(n,r),SA(r,a,h),gy(r,a,h,m),h=!0;else if(n===null){var E=r.stateNode,L=r.memoizedProps;E.props=L;var I=E.context,V=a.contextType;typeof V=="object"&&V!==null?V=vi(V):(V=Rn(a)?Wo:an.current,V=Bl(r,V));var ee=a.getDerivedStateFromProps,te=typeof ee=="function"||typeof E.getSnapshotBeforeUpdate=="function";te||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(L!==h||I!==V)&&EA(r,E,h,V),Hs=!1;var J=r.memoizedState;E.state=J,Jf(r,h,E,m),I=r.memoizedState,L!==h||J!==I||Tn.current||Hs?(typeof ee=="function"&&(py(r,a,ee,h),I=r.memoizedState),(L=Hs||bA(r,a,L,h,J,I,V))?(te||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(r.flags|=4194308)):(typeof E.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=h,r.memoizedState=I),E.props=h,E.state=I,E.context=V,h=L):(typeof E.componentDidMount=="function"&&(r.flags|=4194308),h=!1)}else{E=r.stateNode,Yw(n,r),L=r.memoizedProps,V=r.type===r.elementType?L:zi(r.type,L),E.props=V,te=r.pendingProps,J=E.context,I=a.contextType,typeof I=="object"&&I!==null?I=vi(I):(I=Rn(a)?Wo:an.current,I=Bl(r,I));var pe=a.getDerivedStateFromProps;(ee=typeof pe=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(L!==te||J!==I)&&EA(r,E,h,I),Hs=!1,J=r.memoizedState,E.state=J,Jf(r,h,E,m);var ve=r.memoizedState;L!==te||J!==ve||Tn.current||Hs?(typeof pe=="function"&&(py(r,a,pe,h),ve=r.memoizedState),(V=Hs||bA(r,a,V,h,J,ve,I)||!1)?(ee||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,ve,I),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,ve,I)),typeof E.componentDidUpdate=="function"&&(r.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof E.componentDidUpdate!="function"||L===n.memoizedProps&&J===n.memoizedState||(r.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||L===n.memoizedProps&&J===n.memoizedState||(r.flags|=1024),r.memoizedProps=h,r.memoizedState=ve),E.props=h,E.state=ve,E.context=I,h=V):(typeof E.componentDidUpdate!="function"||L===n.memoizedProps&&J===n.memoizedState||(r.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||L===n.memoizedProps&&J===n.memoizedState||(r.flags|=1024),h=!1)}return wy(n,r,a,h,v,m)}function wy(n,r,a,h,m,v){DA(n,r);var E=(r.flags&128)!==0;if(!h&&!E)return m&&zw(r,a,!1),Wr(n,r,v);h=r.stateNode,S1.current=r;var L=E&&typeof a.getDerivedStateFromError!="function"?null:h.render();return r.flags|=1,n!==null&&E?(r.child=Wl(r,n.child,null,v),r.child=Wl(r,null,L,v)):wn(n,r,L,v),r.memoizedState=h.state,m&&zw(r,a,!0),r.child}function FA(n){var r=n.stateNode;r.pendingContext?Nw(n,r.pendingContext,r.pendingContext!==r.context):r.context&&Nw(n,r.context,!1),ny(n,r.containerInfo)}function OA(n,r,a,h,m){return $l(),Km(m),r.flags|=256,wn(n,r,a,h),r.child}var Ay={dehydrated:null,treeContext:null,retryLane:0};function by(n){return{baseLanes:n,cachePool:null,transitions:null}}function NA(n,r,a){var h=r.pendingProps,m=vt.current,v=!1,E=(r.flags&128)!==0,L;if((L=E)||(L=n!==null&&n.memoizedState===null?!1:(m&2)!==0),L?(v=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(m|=1),dt(vt,m&1),n===null)return Xm(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((r.mode&1)===0?r.lanes=1:n.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(E=h.children,n=h.fallback,v?(h=r.mode,v=r.child,E={mode:"hidden",children:E},(h&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=E):v=wp(E,h,0,null),n=ea(n,h,a,null),v.return=r,n.return=r,v.sibling=n,r.child=v,r.child.memoizedState=by(a),r.memoizedState=Ay,n):Sy(r,E));if(m=n.memoizedState,m!==null&&(L=m.dehydrated,L!==null))return E1(n,r,E,h,L,m,a);if(v){v=h.fallback,E=r.mode,m=n.child,L=m.sibling;var I={mode:"hidden",children:h.children};return(E&1)===0&&r.child!==m?(h=r.child,h.childLanes=0,h.pendingProps=I,r.deletions=null):(h=Xs(m,I),h.subtreeFlags=m.subtreeFlags&14680064),L!==null?v=Xs(L,v):(v=ea(v,E,a,null),v.flags|=2),v.return=r,h.return=r,h.sibling=v,r.child=h,h=v,v=r.child,E=n.child.memoizedState,E=E===null?by(a):{baseLanes:E.baseLanes|a,cachePool:null,transitions:E.transitions},v.memoizedState=E,v.childLanes=n.childLanes&~a,r.memoizedState=Ay,h}return v=n.child,n=v.sibling,h=Xs(v,{mode:"visible",children:h.children}),(r.mode&1)===0&&(h.lanes=a),h.return=r,h.sibling=null,n!==null&&(a=r.deletions,a===null?(r.deletions=[n],r.flags|=16):a.push(n)),r.child=h,r.memoizedState=null,h}function Sy(n,r){return r=wp({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function op(n,r,a,h){return h!==null&&Km(h),Wl(r,n.child,null,a),n=Sy(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function E1(n,r,a,h,m,v,E){if(a)return r.flags&256?(r.flags&=-257,h=my(Error(t(422))),op(n,r,E,h)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(v=h.fallback,m=r.mode,h=wp({mode:"visible",children:h.children},m,0,null),v=ea(v,m,E,null),v.flags|=2,h.return=r,v.return=r,h.sibling=v,r.child=h,(r.mode&1)!==0&&Wl(r,n.child,null,E),r.child.memoizedState=by(E),r.memoizedState=Ay,v);if((r.mode&1)===0)return op(n,r,E,null);if(m.data==="$!"){if(h=m.nextSibling&&m.nextSibling.dataset,h)var L=h.dgst;return h=L,v=Error(t(419)),h=my(v,h,void 0),op(n,r,E,h)}if(L=(E&n.childLanes)!==0,Pn||L){if(h=$t,h!==null){switch(E&-E){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(h.suspendedLanes|E))!==0?0:m,m!==0&&m!==v.retryLane&&(v.retryLane=m,Ur(n,m),Ui(h,n,m,-1))}return jy(),h=my(Error(t(421))),op(n,r,E,h)}return m.data==="$?"?(r.flags|=128,r.child=n.child,r=O1.bind(null,n),m._reactRetry=r,null):(n=v.treeContext,Kn=Ns(m.nextSibling),Xn=r,yt=!0,ji=null,n!==null&&(mi[yi++]=Br,mi[yi++]=Hr,mi[yi++]=Vo,Br=n.id,Hr=n.overflow,Vo=r),r=Sy(r,h.children),r.flags|=4096,r)}function jA(n,r,a){n.lanes|=r;var h=n.alternate;h!==null&&(h.lanes|=r),Zm(n.return,r,a)}function Ey(n,r,a,h,m){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:m}:(v.isBackwards=r,v.rendering=null,v.renderingStartTime=0,v.last=h,v.tail=a,v.tailMode=m)}function zA(n,r,a){var h=r.pendingProps,m=h.revealOrder,v=h.tail;if(wn(n,r,h.children,a),h=vt.current,(h&2)!==0)h=h&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&jA(n,a,r);else if(n.tag===19)jA(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(dt(vt,h),(r.mode&1)===0)r.memoizedState=null;else switch(m){case"forwards":for(a=r.child,m=null;a!==null;)n=a.alternate,n!==null&&Zf(n)===null&&(m=a),a=a.sibling;a=m,a===null?(m=r.child,r.child=null):(m=a.sibling,a.sibling=null),Ey(r,!1,m,a,v);break;case"backwards":for(a=null,m=r.child,r.child=null;m!==null;){if(n=m.alternate,n!==null&&Zf(n)===null){r.child=m;break}n=m.sibling,m.sibling=a,a=m,m=n}Ey(r,!0,a,null,v);break;case"together":Ey(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function ap(n,r){(r.mode&1)===0&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function Wr(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),Yo|=r.lanes,(a&r.childLanes)===0)return null;if(n!==null&&r.child!==n.child)throw Error(t(153));if(r.child!==null){for(n=r.child,a=Xs(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=Xs(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function x1(n,r,a){switch(r.tag){case 3:FA(r),$l();break;case 5:Zw(r);break;case 1:Rn(r.type)&&$f(r);break;case 4:ny(r,r.stateNode.containerInfo);break;case 10:var h=r.type._context,m=r.memoizedProps.value;dt(Kf,h._currentValue),h._currentValue=m;break;case 13:if(h=r.memoizedState,h!==null)return h.dehydrated!==null?(dt(vt,vt.current&1),r.flags|=128,null):(a&r.child.childLanes)!==0?NA(n,r,a):(dt(vt,vt.current&1),n=Wr(n,r,a),n!==null?n.sibling:null);dt(vt,vt.current&1);break;case 19:if(h=(a&r.childLanes)!==0,(n.flags&128)!==0){if(h)return zA(n,r,a);r.flags|=128}if(m=r.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),dt(vt,vt.current),h)break;return null;case 22:case 23:return r.lanes=0,MA(n,r,a)}return Wr(n,r,a)}var BA,xy,HA,UA;BA=function(n,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},xy=function(){},HA=function(n,r,a,h){var m=n.memoizedProps;if(m!==h){n=r.stateNode,Xo(dr.current);var v=null;switch(a){case"input":m=Oe(n,m),h=Oe(n,h),v=[];break;case"select":m=ae({},m,{value:void 0}),h=ae({},h,{value:void 0}),v=[];break;case"textarea":m=Ir(n,m),h=Ir(n,h),v=[];break;default:typeof m.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=Bf)}yl(a,h);var E;a=null;for(V in m)if(!h.hasOwnProperty(V)&&m.hasOwnProperty(V)&&m[V]!=null)if(V==="style"){var L=m[V];for(E in L)L.hasOwnProperty(E)&&(a||(a={}),a[E]="")}else V!=="dangerouslySetInnerHTML"&&V!=="children"&&V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&V!=="autoFocus"&&(s.hasOwnProperty(V)?v||(v=[]):(v=v||[]).push(V,null));for(V in h){var I=h[V];if(L=m!=null?m[V]:void 0,h.hasOwnProperty(V)&&I!==L&&(I!=null||L!=null))if(V==="style")if(L){for(E in L)!L.hasOwnProperty(E)||I&&I.hasOwnProperty(E)||(a||(a={}),a[E]="");for(E in I)I.hasOwnProperty(E)&&L[E]!==I[E]&&(a||(a={}),a[E]=I[E])}else a||(v||(v=[]),v.push(V,a)),a=I;else V==="dangerouslySetInnerHTML"?(I=I?I.__html:void 0,L=L?L.__html:void 0,I!=null&&L!==I&&(v=v||[]).push(V,I)):V==="children"?typeof I!="string"&&typeof I!="number"||(v=v||[]).push(V,""+I):V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&(s.hasOwnProperty(V)?(I!=null&&V==="onScroll"&&ft("scroll",n),v||L===I||(v=[])):(v=v||[]).push(V,I))}a&&(v=v||[]).push("style",a);var V=v;(r.updateQueue=V)&&(r.flags|=4)}},UA=function(n,r,a,h){a!==h&&(r.flags|=4)};function $u(n,r){if(!yt)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function cn(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,h=0;if(r)for(var m=n.child;m!==null;)a|=m.lanes|m.childLanes,h|=m.subtreeFlags&14680064,h|=m.flags&14680064,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)a|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=h,n.childLanes=a,r}function _1(n,r,a){var h=r.pendingProps;switch(qm(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(r),null;case 1:return Rn(r.type)&&Uf(),cn(r),null;case 3:return h=r.stateNode,Gl(),pt(Tn),pt(an),sy(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(Gf(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,ji!==null&&(Fy(ji),ji=null))),xy(n,r),cn(r),null;case 5:iy(r);var m=Xo(ju.current);if(a=r.type,n!==null&&r.stateNode!=null)HA(n,r,a,h,m),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!h){if(r.stateNode===null)throw Error(t(166));return cn(r),null}if(n=Xo(dr.current),Gf(r)){h=r.stateNode,a=r.type;var v=r.memoizedProps;switch(h[ur]=r,h[Du]=v,n=(r.mode&1)!==0,a){case"dialog":ft("cancel",h),ft("close",h);break;case"iframe":case"object":case"embed":ft("load",h);break;case"video":case"audio":for(m=0;m<Pu.length;m++)ft(Pu[m],h);break;case"source":ft("error",h);break;case"img":case"image":case"link":ft("error",h),ft("load",h);break;case"details":ft("toggle",h);break;case"input":je(h,v),ft("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!v.multiple},ft("invalid",h);break;case"textarea":ml(h,v),ft("invalid",h)}yl(a,v),m=null;for(var E in v)if(v.hasOwnProperty(E)){var L=v[E];E==="children"?typeof L=="string"?h.textContent!==L&&(v.suppressHydrationWarning!==!0&&zf(h.textContent,L,n),m=["children",L]):typeof L=="number"&&h.textContent!==""+L&&(v.suppressHydrationWarning!==!0&&zf(h.textContent,L,n),m=["children",""+L]):s.hasOwnProperty(E)&&L!=null&&E==="onScroll"&&ft("scroll",h)}switch(a){case"input":Wn(h),xt(h,v,!0);break;case"textarea":Wn(h),sr(h);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(h.onclick=Bf)}h=m,r.updateQueue=h,h!==null&&(r.flags|=4)}else{E=m.nodeType===9?m:m.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=or(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=E.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=E.createElement(a,{is:h.is}):(n=E.createElement(a),a==="select"&&(E=n,h.multiple?E.multiple=!0:h.size&&(E.size=h.size))):n=E.createElementNS(n,a),n[ur]=r,n[Du]=h,BA(n,r,!1,!1),r.stateNode=n;e:{switch(E=Ps(a,h),a){case"dialog":ft("cancel",n),ft("close",n),m=h;break;case"iframe":case"object":case"embed":ft("load",n),m=h;break;case"video":case"audio":for(m=0;m<Pu.length;m++)ft(Pu[m],n);m=h;break;case"source":ft("error",n),m=h;break;case"img":case"image":case"link":ft("error",n),ft("load",n),m=h;break;case"details":ft("toggle",n),m=h;break;case"input":je(n,h),m=Oe(n,h),ft("invalid",n);break;case"option":m=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},m=ae({},h,{value:void 0}),ft("invalid",n);break;case"textarea":ml(n,h),m=Ir(n,h),ft("invalid",n);break;default:m=h}yl(a,m),L=m;for(v in L)if(L.hasOwnProperty(v)){var I=L[v];v==="style"?du(n,I):v==="dangerouslySetInnerHTML"?(I=I?I.__html:void 0,I!=null&&ar(n,I)):v==="children"?typeof I=="string"?(a!=="textarea"||I!=="")&&fi(n,I):typeof I=="number"&&fi(n,""+I):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(s.hasOwnProperty(v)?I!=null&&v==="onScroll"&&ft("scroll",n):I!=null&&j(n,v,I,E))}switch(a){case"input":Wn(n),xt(n,h,!1);break;case"textarea":Wn(n),sr(n);break;case"option":h.value!=null&&n.setAttribute("value",""+De(h.value));break;case"select":n.multiple=!!h.multiple,v=h.value,v!=null?gt(n,!!h.multiple,v,!1):h.defaultValue!=null&&gt(n,!!h.multiple,h.defaultValue,!0);break;default:typeof m.onClick=="function"&&(n.onclick=Bf)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return cn(r),null;case 6:if(n&&r.stateNode!=null)UA(n,r,n.memoizedProps,h);else{if(typeof h!="string"&&r.stateNode===null)throw Error(t(166));if(a=Xo(ju.current),Xo(dr.current),Gf(r)){if(h=r.stateNode,a=r.memoizedProps,h[ur]=r,(v=h.nodeValue!==a)&&(n=Xn,n!==null))switch(n.tag){case 3:zf(h.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&zf(h.nodeValue,a,(n.mode&1)!==0)}v&&(r.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[ur]=r,r.stateNode=h}return cn(r),null;case 13:if(pt(vt),h=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(yt&&Kn!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Vw(),$l(),r.flags|=98560,v=!1;else if(v=Gf(r),h!==null&&h.dehydrated!==null){if(n===null){if(!v)throw Error(t(318));if(v=r.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[ur]=r}else $l(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;cn(r),v=!1}else ji!==null&&(Fy(ji),ji=null),v=!0;if(!v)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=a,r):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(r.child.flags|=8192,(r.mode&1)!==0&&(n===null||(vt.current&1)!==0?It===0&&(It=3):jy())),r.updateQueue!==null&&(r.flags|=4),cn(r),null);case 4:return Gl(),xy(n,r),n===null&&Lu(r.stateNode.containerInfo),cn(r),null;case 10:return Jm(r.type._context),cn(r),null;case 17:return Rn(r.type)&&Uf(),cn(r),null;case 19:if(pt(vt),v=r.memoizedState,v===null)return cn(r),null;if(h=(r.flags&128)!==0,E=v.rendering,E===null)if(h)$u(v,!1);else{if(It!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(E=Zf(n),E!==null){for(r.flags|=128,$u(v,!1),h=E.updateQueue,h!==null&&(r.updateQueue=h,r.flags|=4),r.subtreeFlags=0,h=a,a=r.child;a!==null;)v=a,n=h,v.flags&=14680066,E=v.alternate,E===null?(v.childLanes=0,v.lanes=n,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=E.childLanes,v.lanes=E.lanes,v.child=E.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=E.memoizedProps,v.memoizedState=E.memoizedState,v.updateQueue=E.updateQueue,v.type=E.type,n=E.dependencies,v.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return dt(vt,vt.current&1|2),r.child}n=n.sibling}v.tail!==null&&mt()>Ql&&(r.flags|=128,h=!0,$u(v,!1),r.lanes=4194304)}else{if(!h)if(n=Zf(E),n!==null){if(r.flags|=128,h=!0,a=n.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),$u(v,!0),v.tail===null&&v.tailMode==="hidden"&&!E.alternate&&!yt)return cn(r),null}else 2*mt()-v.renderingStartTime>Ql&&a!==1073741824&&(r.flags|=128,h=!0,$u(v,!1),r.lanes=4194304);v.isBackwards?(E.sibling=r.child,r.child=E):(a=v.last,a!==null?a.sibling=E:r.child=E,v.last=E)}return v.tail!==null?(r=v.tail,v.rendering=r,v.tail=r.sibling,v.renderingStartTime=mt(),r.sibling=null,a=vt.current,dt(vt,h?a&1|2:a&1),r):(cn(r),null);case 22:case 23:return Ny(),h=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(r.flags|=8192),h&&(r.mode&1)!==0?(Yn&1073741824)!==0&&(cn(r),r.subtreeFlags&6&&(r.flags|=8192)):cn(r),null;case 24:return null;case 25:return null}throw Error(t(156,r.tag))}function C1(n,r){switch(qm(r),r.tag){case 1:return Rn(r.type)&&Uf(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Gl(),pt(Tn),pt(an),sy(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 5:return iy(r),null;case 13:if(pt(vt),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(t(340));$l()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return pt(vt),null;case 4:return Gl(),null;case 10:return Jm(r.type._context),null;case 22:case 23:return Ny(),null;case 24:return null;default:return null}}var lp=!1,un=!1,k1=typeof WeakSet=="function"?WeakSet:Set,ye=null;function Kl(n,r){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){St(n,r,h)}else a.current=null}function _y(n,r,a){try{a()}catch(h){St(n,r,h)}}var $A=!1;function T1(n,r){if(Nm=N,n=bw(),Rm(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var m=h.anchorOffset,v=h.focusNode;h=h.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var E=0,L=-1,I=-1,V=0,ee=0,te=n,J=null;t:for(;;){for(var pe;te!==a||m!==0&&te.nodeType!==3||(L=E+m),te!==v||h!==0&&te.nodeType!==3||(I=E+h),te.nodeType===3&&(E+=te.nodeValue.length),(pe=te.firstChild)!==null;)J=te,te=pe;for(;;){if(te===n)break t;if(J===a&&++V===m&&(L=E),J===v&&++ee===h&&(I=E),(pe=te.nextSibling)!==null)break;te=J,J=te.parentNode}te=pe}a=L===-1||I===-1?null:{start:L,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(jm={focusedElem:n,selectionRange:a},N=!1,ye=r;ye!==null;)if(r=ye,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,ye=n;else for(;ye!==null;){r=ye;try{var ve=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ve!==null){var Ae=ve.memoizedProps,_t=ve.memoizedState,U=r.stateNode,O=U.getSnapshotBeforeUpdate(r.elementType===r.type?Ae:zi(r.type,Ae),_t);U.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var W=r.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(se){St(r,r.return,se)}if(n=r.sibling,n!==null){n.return=r.return,ye=n;break}ye=r.return}return ve=$A,$A=!1,ve}function Wu(n,r,a){var h=r.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var m=h=h.next;do{if((m.tag&n)===n){var v=m.destroy;m.destroy=void 0,v!==void 0&&_y(r,a,v)}m=m.next}while(m!==h)}}function cp(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&n)===n){var h=a.create;a.destroy=h()}a=a.next}while(a!==r)}}function Cy(n){var r=n.ref;if(r!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof r=="function"?r(n):r.current=n}}function WA(n){var r=n.alternate;r!==null&&(n.alternate=null,WA(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[ur],delete r[Du],delete r[Um],delete r[u1],delete r[d1])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function VA(n){return n.tag===5||n.tag===3||n.tag===4}function qA(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||VA(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ky(n,r,a){var h=n.tag;if(h===5||h===6)n=n.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(n,r):a.insertBefore(n,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(n,a)):(r=a,r.appendChild(n)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Bf));else if(h!==4&&(n=n.child,n!==null))for(ky(n,r,a),n=n.sibling;n!==null;)ky(n,r,a),n=n.sibling}function Ty(n,r,a){var h=n.tag;if(h===5||h===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(Ty(n,r,a),n=n.sibling;n!==null;)Ty(n,r,a),n=n.sibling}var Yt=null,Bi=!1;function $s(n,r,a){for(a=a.child;a!==null;)GA(n,r,a),a=a.sibling}function GA(n,r,a){if(Vn&&typeof Vn.onCommitFiberUnmount=="function")try{Vn.onCommitFiberUnmount(xl,a)}catch{}switch(a.tag){case 5:un||Kl(a,r);case 6:var h=Yt,m=Bi;Yt=null,$s(n,r,a),Yt=h,Bi=m,Yt!==null&&(Bi?(n=Yt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Yt.removeChild(a.stateNode));break;case 18:Yt!==null&&(Bi?(n=Yt,a=a.stateNode,n.nodeType===8?Hm(n.parentNode,a):n.nodeType===1&&Hm(n,a),Uo(n)):Hm(Yt,a.stateNode));break;case 4:h=Yt,m=Bi,Yt=a.stateNode.containerInfo,Bi=!0,$s(n,r,a),Yt=h,Bi=m;break;case 0:case 11:case 14:case 15:if(!un&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){m=h=h.next;do{var v=m,E=v.destroy;v=v.tag,E!==void 0&&((v&2)!==0||(v&4)!==0)&&_y(a,r,E),m=m.next}while(m!==h)}$s(n,r,a);break;case 1:if(!un&&(Kl(a,r),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(L){St(a,r,L)}$s(n,r,a);break;case 21:$s(n,r,a);break;case 22:a.mode&1?(un=(h=un)||a.memoizedState!==null,$s(n,r,a),un=h):$s(n,r,a);break;default:$s(n,r,a)}}function XA(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new k1),r.forEach(function(h){var m=N1.bind(null,n,h);a.has(h)||(a.add(h),h.then(m,m))})}}function Hi(n,r){var a=r.deletions;if(a!==null)for(var h=0;h<a.length;h++){var m=a[h];try{var v=n,E=r,L=E;e:for(;L!==null;){switch(L.tag){case 5:Yt=L.stateNode,Bi=!1;break e;case 3:Yt=L.stateNode.containerInfo,Bi=!0;break e;case 4:Yt=L.stateNode.containerInfo,Bi=!0;break e}L=L.return}if(Yt===null)throw Error(t(160));GA(v,E,m),Yt=null,Bi=!1;var I=m.alternate;I!==null&&(I.return=null),m.return=null}catch(V){St(m,r,V)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)KA(r,n),r=r.sibling}function KA(n,r){var a=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Hi(r,n),fr(n),h&4){try{Wu(3,n,n.return),cp(3,n)}catch(Ae){St(n,n.return,Ae)}try{Wu(5,n,n.return)}catch(Ae){St(n,n.return,Ae)}}break;case 1:Hi(r,n),fr(n),h&512&&a!==null&&Kl(a,a.return);break;case 5:if(Hi(r,n),fr(n),h&512&&a!==null&&Kl(a,a.return),n.flags&32){var m=n.stateNode;try{fi(m,"")}catch(Ae){St(n,n.return,Ae)}}if(h&4&&(m=n.stateNode,m!=null)){var v=n.memoizedProps,E=a!==null?a.memoizedProps:v,L=n.type,I=n.updateQueue;if(n.updateQueue=null,I!==null)try{L==="input"&&v.type==="radio"&&v.name!=null&&et(m,v),Ps(L,E);var V=Ps(L,v);for(E=0;E<I.length;E+=2){var ee=I[E],te=I[E+1];ee==="style"?du(m,te):ee==="dangerouslySetInnerHTML"?ar(m,te):ee==="children"?fi(m,te):j(m,ee,te,V)}switch(L){case"input":Lt(m,v);break;case"textarea":Mi(m,v);break;case"select":var J=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!v.multiple;var pe=v.value;pe!=null?gt(m,!!v.multiple,pe,!1):J!==!!v.multiple&&(v.defaultValue!=null?gt(m,!!v.multiple,v.defaultValue,!0):gt(m,!!v.multiple,v.multiple?[]:"",!1))}m[Du]=v}catch(Ae){St(n,n.return,Ae)}}break;case 6:if(Hi(r,n),fr(n),h&4){if(n.stateNode===null)throw Error(t(162));m=n.stateNode,v=n.memoizedProps;try{m.nodeValue=v}catch(Ae){St(n,n.return,Ae)}}break;case 3:if(Hi(r,n),fr(n),h&4&&a!==null&&a.memoizedState.isDehydrated)try{Uo(r.containerInfo)}catch(Ae){St(n,n.return,Ae)}break;case 4:Hi(r,n),fr(n);break;case 13:Hi(r,n),fr(n),m=n.child,m.flags&8192&&(v=m.memoizedState!==null,m.stateNode.isHidden=v,!v||m.alternate!==null&&m.alternate.memoizedState!==null||(Ly=mt())),h&4&&XA(n);break;case 22:if(ee=a!==null&&a.memoizedState!==null,n.mode&1?(un=(V=un)||ee,Hi(r,n),un=V):Hi(r,n),fr(n),h&8192){if(V=n.memoizedState!==null,(n.stateNode.isHidden=V)&&!ee&&(n.mode&1)!==0)for(ye=n,ee=n.child;ee!==null;){for(te=ye=ee;ye!==null;){switch(J=ye,pe=J.child,J.tag){case 0:case 11:case 14:case 15:Wu(4,J,J.return);break;case 1:Kl(J,J.return);var ve=J.stateNode;if(typeof ve.componentWillUnmount=="function"){h=J,a=J.return;try{r=h,ve.props=r.memoizedProps,ve.state=r.memoizedState,ve.componentWillUnmount()}catch(Ae){St(h,a,Ae)}}break;case 5:Kl(J,J.return);break;case 22:if(J.memoizedState!==null){JA(te);continue}}pe!==null?(pe.return=J,ye=pe):JA(te)}ee=ee.sibling}e:for(ee=null,te=n;;){if(te.tag===5){if(ee===null){ee=te;try{m=te.stateNode,V?(v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(L=te.stateNode,I=te.memoizedProps.style,E=I!=null&&I.hasOwnProperty("display")?I.display:null,L.style.display=uu("display",E))}catch(Ae){St(n,n.return,Ae)}}}else if(te.tag===6){if(ee===null)try{te.stateNode.nodeValue=V?"":te.memoizedProps}catch(Ae){St(n,n.return,Ae)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===n)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===n)break e;for(;te.sibling===null;){if(te.return===null||te.return===n)break e;ee===te&&(ee=null),te=te.return}ee===te&&(ee=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:Hi(r,n),fr(n),h&4&&XA(n);break;case 21:break;default:Hi(r,n),fr(n)}}function fr(n){var r=n.flags;if(r&2){try{e:{for(var a=n.return;a!==null;){if(VA(a)){var h=a;break e}a=a.return}throw Error(t(160))}switch(h.tag){case 5:var m=h.stateNode;h.flags&32&&(fi(m,""),h.flags&=-33);var v=qA(n);Ty(n,v,m);break;case 3:case 4:var E=h.stateNode.containerInfo,L=qA(n);ky(n,L,E);break;default:throw Error(t(161))}}catch(I){St(n,n.return,I)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function R1(n,r,a){ye=n,YA(n)}function YA(n,r,a){for(var h=(n.mode&1)!==0;ye!==null;){var m=ye,v=m.child;if(m.tag===22&&h){var E=m.memoizedState!==null||lp;if(!E){var L=m.alternate,I=L!==null&&L.memoizedState!==null||un;L=lp;var V=un;if(lp=E,(un=I)&&!V)for(ye=m;ye!==null;)E=ye,I=E.child,E.tag===22&&E.memoizedState!==null?ZA(m):I!==null?(I.return=E,ye=I):ZA(m);for(;v!==null;)ye=v,YA(v),v=v.sibling;ye=m,lp=L,un=V}QA(n)}else(m.subtreeFlags&8772)!==0&&v!==null?(v.return=m,ye=v):QA(n)}}function QA(n){for(;ye!==null;){var r=ye;if((r.flags&8772)!==0){var a=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:un||cp(5,r);break;case 1:var h=r.stateNode;if(r.flags&4&&!un)if(a===null)h.componentDidMount();else{var m=r.elementType===r.type?a.memoizedProps:zi(r.type,a.memoizedProps);h.componentDidUpdate(m,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var v=r.updateQueue;v!==null&&Jw(r,v,h);break;case 3:var E=r.updateQueue;if(E!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}Jw(r,E,a)}break;case 5:var L=r.stateNode;if(a===null&&r.flags&4){a=L;var I=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":I.autoFocus&&a.focus();break;case"img":I.src&&(a.src=I.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var V=r.alternate;if(V!==null){var ee=V.memoizedState;if(ee!==null){var te=ee.dehydrated;te!==null&&Uo(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}un||r.flags&512&&Cy(r)}catch(J){St(r,r.return,J)}}if(r===n){ye=null;break}if(a=r.sibling,a!==null){a.return=r.return,ye=a;break}ye=r.return}}function JA(n){for(;ye!==null;){var r=ye;if(r===n){ye=null;break}var a=r.sibling;if(a!==null){a.return=r.return,ye=a;break}ye=r.return}}function ZA(n){for(;ye!==null;){var r=ye;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{cp(4,r)}catch(I){St(r,a,I)}break;case 1:var h=r.stateNode;if(typeof h.componentDidMount=="function"){var m=r.return;try{h.componentDidMount()}catch(I){St(r,m,I)}}var v=r.return;try{Cy(r)}catch(I){St(r,v,I)}break;case 5:var E=r.return;try{Cy(r)}catch(I){St(r,E,I)}}}catch(I){St(r,r.return,I)}if(r===n){ye=null;break}var L=r.sibling;if(L!==null){L.return=r.return,ye=L;break}ye=r.return}}var P1=Math.ceil,up=z.ReactCurrentDispatcher,Ry=z.ReactCurrentOwner,Ai=z.ReactCurrentBatchConfig,Ye=0,$t=null,Tt=null,Qt=0,Yn=0,Yl=js(0),It=0,Vu=null,Yo=0,dp=0,Py=0,qu=null,Ln=null,Ly=0,Ql=1/0,Vr=null,hp=!1,My=null,Ws=null,fp=!1,Vs=null,pp=0,Gu=0,Dy=null,gp=-1,mp=0;function An(){return(Ye&6)!==0?mt():gp!==-1?gp:gp=mt()}function qs(n){return(n.mode&1)===0?1:(Ye&2)!==0&&Qt!==0?Qt&-Qt:f1.transition!==null?(mp===0&&(mp=Cl()),mp):(n=Ke,n!==0||(n=window.event,n=n===void 0?16:Ll(n.type)),n)}function Ui(n,r,a,h){if(50<Gu)throw Gu=0,Dy=null,Error(t(185));qn(n,a,h),((Ye&2)===0||n!==$t)&&(n===$t&&((Ye&2)===0&&(dp|=a),It===4&&Gs(n,Qt)),Mn(n,h),a===1&&Ye===0&&(r.mode&1)===0&&(Ql=mt()+500,Wf&&Bs()))}function Mn(n,r){var a=n.callbackNode;gm(n,r);var h=_l(n,n===$t?Qt:0);if(h===0)a!==null&&bf(a),n.callbackNode=null,n.callbackPriority=0;else if(r=h&-h,n.callbackPriority!==r){if(a!=null&&bf(a),r===1)n.tag===0?h1(tb.bind(null,n)):Bw(tb.bind(null,n)),l1(function(){(Ye&6)===0&&Bs()}),a=null;else{switch(_f(h)){case 1:a=Sl;break;case 4:a=vu;break;case 16:a=El;break;case 536870912:a=Sf;break;default:a=El}a=cb(a,eb.bind(null,n))}n.callbackPriority=r,n.callbackNode=a}}function eb(n,r){if(gp=-1,mp=0,(Ye&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Jl()&&n.callbackNode!==a)return null;var h=_l(n,n===$t?Qt:0);if(h===0)return null;if((h&30)!==0||(h&n.expiredLanes)!==0||r)r=yp(n,h);else{r=h;var m=Ye;Ye|=2;var v=ib();($t!==n||Qt!==r)&&(Vr=null,Ql=mt()+500,Jo(n,r));do try{D1();break}catch(L){nb(n,L)}while(!0);Qm(),up.current=v,Ye=m,Tt!==null?r=0:($t=null,Qt=0,r=It)}if(r!==0){if(r===2&&(m=Au(n),m!==0&&(h=m,r=Iy(n,m))),r===1)throw a=Vu,Jo(n,0),Gs(n,h),Mn(n,mt()),a;if(r===6)Gs(n,h);else{if(m=n.current.alternate,(h&30)===0&&!L1(m)&&(r=yp(n,h),r===2&&(v=Au(n),v!==0&&(h=v,r=Iy(n,v))),r===1))throw a=Vu,Jo(n,0),Gs(n,h),Mn(n,mt()),a;switch(n.finishedWork=m,n.finishedLanes=h,r){case 0:case 1:throw Error(t(345));case 2:Zo(n,Ln,Vr);break;case 3:if(Gs(n,h),(h&130023424)===h&&(r=Ly+500-mt(),10<r)){if(_l(n,0)!==0)break;if(m=n.suspendedLanes,(m&h)!==h){An(),n.pingedLanes|=n.suspendedLanes&m;break}n.timeoutHandle=Bm(Zo.bind(null,n,Ln,Vr),r);break}Zo(n,Ln,Vr);break;case 4:if(Gs(n,h),(h&4194240)===h)break;for(r=n.eventTimes,m=-1;0<h;){var E=31-Mt(h);v=1<<E,E=r[E],E>m&&(m=E),h&=~v}if(h=m,h=mt()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*P1(h/1960))-h,10<h){n.timeoutHandle=Bm(Zo.bind(null,n,Ln,Vr),h);break}Zo(n,Ln,Vr);break;case 5:Zo(n,Ln,Vr);break;default:throw Error(t(329))}}}return Mn(n,mt()),n.callbackNode===a?eb.bind(null,n):null}function Iy(n,r){var a=qu;return n.current.memoizedState.isDehydrated&&(Jo(n,r).flags|=256),n=yp(n,r),n!==2&&(r=Ln,Ln=a,r!==null&&Fy(r)),n}function Fy(n){Ln===null?Ln=n:Ln.push.apply(Ln,n)}function L1(n){for(var r=n;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var m=a[h],v=m.getSnapshot;m=m.value;try{if(!Ni(v(),m))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Gs(n,r){for(r&=~Py,r&=~dp,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var a=31-Mt(r),h=1<<a;n[a]=-1,r&=~h}}function tb(n){if((Ye&6)!==0)throw Error(t(327));Jl();var r=_l(n,0);if((r&1)===0)return Mn(n,mt()),null;var a=yp(n,r);if(n.tag!==0&&a===2){var h=Au(n);h!==0&&(r=h,a=Iy(n,h))}if(a===1)throw a=Vu,Jo(n,0),Gs(n,r),Mn(n,mt()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,Zo(n,Ln,Vr),Mn(n,mt()),null}function Oy(n,r){var a=Ye;Ye|=1;try{return n(r)}finally{Ye=a,Ye===0&&(Ql=mt()+500,Wf&&Bs())}}function Qo(n){Vs!==null&&Vs.tag===0&&(Ye&6)===0&&Jl();var r=Ye;Ye|=1;var a=Ai.transition,h=Ke;try{if(Ai.transition=null,Ke=1,n)return n()}finally{Ke=h,Ai.transition=a,Ye=r,(Ye&6)===0&&Bs()}}function Ny(){Yn=Yl.current,pt(Yl)}function Jo(n,r){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,a1(a)),Tt!==null)for(a=Tt.return;a!==null;){var h=a;switch(qm(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Uf();break;case 3:Gl(),pt(Tn),pt(an),sy();break;case 5:iy(h);break;case 4:Gl();break;case 13:pt(vt);break;case 19:pt(vt);break;case 10:Jm(h.type._context);break;case 22:case 23:Ny()}a=a.return}if($t=n,Tt=n=Xs(n.current,null),Qt=Yn=r,It=0,Vu=null,Py=dp=Yo=0,Ln=qu=null,Go!==null){for(r=0;r<Go.length;r++)if(a=Go[r],h=a.interleaved,h!==null){a.interleaved=null;var m=h.next,v=a.pending;if(v!==null){var E=v.next;v.next=m,h.next=E}a.pending=h}Go=null}return n}function nb(n,r){do{var a=Tt;try{if(Qm(),ep.current=rp,tp){for(var h=wt.memoizedState;h!==null;){var m=h.queue;m!==null&&(m.pending=null),h=h.next}tp=!1}if(Ko=0,Ut=Dt=wt=null,zu=!1,Bu=0,Ry.current=null,a===null||a.return===null){It=1,Vu=r,Tt=null;break}e:{var v=n,E=a.return,L=a,I=r;if(r=Qt,L.flags|=32768,I!==null&&typeof I=="object"&&typeof I.then=="function"){var V=I,ee=L,te=ee.tag;if((ee.mode&1)===0&&(te===0||te===11||te===15)){var J=ee.alternate;J?(ee.updateQueue=J.updateQueue,ee.memoizedState=J.memoizedState,ee.lanes=J.lanes):(ee.updateQueue=null,ee.memoizedState=null)}var pe=kA(E);if(pe!==null){pe.flags&=-257,TA(pe,E,L,v,r),pe.mode&1&&CA(v,V,r),r=pe,I=V;var ve=r.updateQueue;if(ve===null){var Ae=new Set;Ae.add(I),r.updateQueue=Ae}else ve.add(I);break e}else{if((r&1)===0){CA(v,V,r),jy();break e}I=Error(t(426))}}else if(yt&&L.mode&1){var _t=kA(E);if(_t!==null){(_t.flags&65536)===0&&(_t.flags|=256),TA(_t,E,L,v,r),Km(Xl(I,L));break e}}v=I=Xl(I,L),It!==4&&(It=2),qu===null?qu=[v]:qu.push(v),v=E;do{switch(v.tag){case 3:v.flags|=65536,r&=-r,v.lanes|=r;var U=xA(v,I,r);Qw(v,U);break e;case 1:L=I;var O=v.type,W=v.stateNode;if((v.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(Ws===null||!Ws.has(W)))){v.flags|=65536,r&=-r,v.lanes|=r;var se=_A(v,L,r);Qw(v,se);break e}}v=v.return}while(v!==null)}sb(a)}catch(be){r=be,Tt===a&&a!==null&&(Tt=a=a.return);continue}break}while(!0)}function ib(){var n=up.current;return up.current=rp,n===null?rp:n}function jy(){(It===0||It===3||It===2)&&(It=4),$t===null||(Yo&268435455)===0&&(dp&268435455)===0||Gs($t,Qt)}function yp(n,r){var a=Ye;Ye|=2;var h=ib();($t!==n||Qt!==r)&&(Vr=null,Jo(n,r));do try{M1();break}catch(m){nb(n,m)}while(!0);if(Qm(),Ye=a,up.current=h,Tt!==null)throw Error(t(261));return $t=null,Qt=0,It}function M1(){for(;Tt!==null;)rb(Tt)}function D1(){for(;Tt!==null&&!um();)rb(Tt)}function rb(n){var r=lb(n.alternate,n,Yn);n.memoizedProps=n.pendingProps,r===null?sb(n):Tt=r,Ry.current=null}function sb(n){var r=n;do{var a=r.alternate;if(n=r.return,(r.flags&32768)===0){if(a=_1(a,r,Yn),a!==null){Tt=a;return}}else{if(a=C1(a,r),a!==null){a.flags&=32767,Tt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{It=6,Tt=null;return}}if(r=r.sibling,r!==null){Tt=r;return}Tt=r=n}while(r!==null);It===0&&(It=5)}function Zo(n,r,a){var h=Ke,m=Ai.transition;try{Ai.transition=null,Ke=1,I1(n,r,a,h)}finally{Ai.transition=m,Ke=h}return null}function I1(n,r,a,h){do Jl();while(Vs!==null);if((Ye&6)!==0)throw Error(t(327));a=n.finishedWork;var m=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var v=a.lanes|a.childLanes;if(mm(n,v),n===$t&&(Tt=$t=null,Qt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||fp||(fp=!0,cb(El,function(){return Jl(),null})),v=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||v){v=Ai.transition,Ai.transition=null;var E=Ke;Ke=1;var L=Ye;Ye|=4,Ry.current=null,T1(n,a),KA(a,n),e1(jm),N=!!Nm,jm=Nm=null,n.current=a,R1(a),dm(),Ye=L,Ke=E,Ai.transition=v}else n.current=a;if(fp&&(fp=!1,Vs=n,pp=m),v=n.pendingLanes,v===0&&(Ws=null),fm(a.stateNode),Mn(n,mt()),r!==null)for(h=n.onRecoverableError,a=0;a<r.length;a++)m=r[a],h(m.value,{componentStack:m.stack,digest:m.digest});if(hp)throw hp=!1,n=My,My=null,n;return(pp&1)!==0&&n.tag!==0&&Jl(),v=n.pendingLanes,(v&1)!==0?n===Dy?Gu++:(Gu=0,Dy=n):Gu=0,Bs(),null}function Jl(){if(Vs!==null){var n=_f(pp),r=Ai.transition,a=Ke;try{if(Ai.transition=null,Ke=16>n?16:n,Vs===null)var h=!1;else{if(n=Vs,Vs=null,pp=0,(Ye&6)!==0)throw Error(t(331));var m=Ye;for(Ye|=4,ye=n.current;ye!==null;){var v=ye,E=v.child;if((ye.flags&16)!==0){var L=v.deletions;if(L!==null){for(var I=0;I<L.length;I++){var V=L[I];for(ye=V;ye!==null;){var ee=ye;switch(ee.tag){case 0:case 11:case 15:Wu(8,ee,v)}var te=ee.child;if(te!==null)te.return=ee,ye=te;else for(;ye!==null;){ee=ye;var J=ee.sibling,pe=ee.return;if(WA(ee),ee===V){ye=null;break}if(J!==null){J.return=pe,ye=J;break}ye=pe}}}var ve=v.alternate;if(ve!==null){var Ae=ve.child;if(Ae!==null){ve.child=null;do{var _t=Ae.sibling;Ae.sibling=null,Ae=_t}while(Ae!==null)}}ye=v}}if((v.subtreeFlags&2064)!==0&&E!==null)E.return=v,ye=E;else e:for(;ye!==null;){if(v=ye,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:Wu(9,v,v.return)}var U=v.sibling;if(U!==null){U.return=v.return,ye=U;break e}ye=v.return}}var O=n.current;for(ye=O;ye!==null;){E=ye;var W=E.child;if((E.subtreeFlags&2064)!==0&&W!==null)W.return=E,ye=W;else e:for(E=O;ye!==null;){if(L=ye,(L.flags&2048)!==0)try{switch(L.tag){case 0:case 11:case 15:cp(9,L)}}catch(be){St(L,L.return,be)}if(L===E){ye=null;break e}var se=L.sibling;if(se!==null){se.return=L.return,ye=se;break e}ye=L.return}}if(Ye=m,Bs(),Vn&&typeof Vn.onPostCommitFiberRoot=="function")try{Vn.onPostCommitFiberRoot(xl,n)}catch{}h=!0}return h}finally{Ke=a,Ai.transition=r}}return!1}function ob(n,r,a){r=Xl(a,r),r=xA(n,r,1),n=Us(n,r,1),r=An(),n!==null&&(qn(n,1,r),Mn(n,r))}function St(n,r,a){if(n.tag===3)ob(n,n,a);else for(;r!==null;){if(r.tag===3){ob(r,n,a);break}else if(r.tag===1){var h=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ws===null||!Ws.has(h))){n=Xl(a,n),n=_A(r,n,1),r=Us(r,n,1),n=An(),r!==null&&(qn(r,1,n),Mn(r,n));break}}r=r.return}}function F1(n,r,a){var h=n.pingCache;h!==null&&h.delete(r),r=An(),n.pingedLanes|=n.suspendedLanes&a,$t===n&&(Qt&a)===a&&(It===4||It===3&&(Qt&130023424)===Qt&&500>mt()-Ly?Jo(n,0):Py|=a),Mn(n,r)}function ab(n,r){r===0&&((n.mode&1)===0?r=1:(r=Fi,Fi<<=1,(Fi&130023424)===0&&(Fi=4194304)));var a=An();n=Ur(n,r),n!==null&&(qn(n,r,a),Mn(n,a))}function O1(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),ab(n,a)}function N1(n,r){var a=0;switch(n.tag){case 13:var h=n.stateNode,m=n.memoizedState;m!==null&&(a=m.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(r),ab(n,a)}var lb;lb=function(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps||Tn.current)Pn=!0;else{if((n.lanes&a)===0&&(r.flags&128)===0)return Pn=!1,x1(n,r,a);Pn=(n.flags&131072)!==0}else Pn=!1,yt&&(r.flags&1048576)!==0&&Hw(r,qf,r.index);switch(r.lanes=0,r.tag){case 2:var h=r.type;ap(n,r),n=r.pendingProps;var m=Bl(r,an.current);ql(r,a),m=ly(null,r,h,n,m,a);var v=cy();return r.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Rn(h)?(v=!0,$f(r)):v=!1,r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,ty(r),m.updater=sp,r.stateNode=m,m._reactInternals=r,gy(r,h,n,a),r=wy(null,r,h,!0,v,a)):(r.tag=0,yt&&v&&Vm(r),wn(null,r,m,a),r=r.child),r;case 16:h=r.elementType;e:{switch(ap(n,r),n=r.pendingProps,m=h._init,h=m(h._payload),r.type=h,m=r.tag=z1(h),n=zi(h,n),m){case 0:r=vy(null,r,h,n,a);break e;case 1:r=IA(null,r,h,n,a);break e;case 11:r=RA(null,r,h,n,a);break e;case 14:r=PA(null,r,h,zi(h.type,n),a);break e}throw Error(t(306,h,""))}return r;case 0:return h=r.type,m=r.pendingProps,m=r.elementType===h?m:zi(h,m),vy(n,r,h,m,a);case 1:return h=r.type,m=r.pendingProps,m=r.elementType===h?m:zi(h,m),IA(n,r,h,m,a);case 3:e:{if(FA(r),n===null)throw Error(t(387));h=r.pendingProps,v=r.memoizedState,m=v.element,Yw(n,r),Jf(r,h,null,a);var E=r.memoizedState;if(h=E.element,v.isDehydrated)if(v={element:h,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){m=Xl(Error(t(423)),r),r=OA(n,r,h,a,m);break e}else if(h!==m){m=Xl(Error(t(424)),r),r=OA(n,r,h,a,m);break e}else for(Kn=Ns(r.stateNode.containerInfo.firstChild),Xn=r,yt=!0,ji=null,a=Xw(r,null,h,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if($l(),h===m){r=Wr(n,r,a);break e}wn(n,r,h,a)}r=r.child}return r;case 5:return Zw(r),n===null&&Xm(r),h=r.type,m=r.pendingProps,v=n!==null?n.memoizedProps:null,E=m.children,zm(h,m)?E=null:v!==null&&zm(h,v)&&(r.flags|=32),DA(n,r),wn(n,r,E,a),r.child;case 6:return n===null&&Xm(r),null;case 13:return NA(n,r,a);case 4:return ny(r,r.stateNode.containerInfo),h=r.pendingProps,n===null?r.child=Wl(r,null,h,a):wn(n,r,h,a),r.child;case 11:return h=r.type,m=r.pendingProps,m=r.elementType===h?m:zi(h,m),RA(n,r,h,m,a);case 7:return wn(n,r,r.pendingProps,a),r.child;case 8:return wn(n,r,r.pendingProps.children,a),r.child;case 12:return wn(n,r,r.pendingProps.children,a),r.child;case 10:e:{if(h=r.type._context,m=r.pendingProps,v=r.memoizedProps,E=m.value,dt(Kf,h._currentValue),h._currentValue=E,v!==null)if(Ni(v.value,E)){if(v.children===m.children&&!Tn.current){r=Wr(n,r,a);break e}}else for(v=r.child,v!==null&&(v.return=r);v!==null;){var L=v.dependencies;if(L!==null){E=v.child;for(var I=L.firstContext;I!==null;){if(I.context===h){if(v.tag===1){I=$r(-1,a&-a),I.tag=2;var V=v.updateQueue;if(V!==null){V=V.shared;var ee=V.pending;ee===null?I.next=I:(I.next=ee.next,ee.next=I),V.pending=I}}v.lanes|=a,I=v.alternate,I!==null&&(I.lanes|=a),Zm(v.return,a,r),L.lanes|=a;break}I=I.next}}else if(v.tag===10)E=v.type===r.type?null:v.child;else if(v.tag===18){if(E=v.return,E===null)throw Error(t(341));E.lanes|=a,L=E.alternate,L!==null&&(L.lanes|=a),Zm(E,a,r),E=v.sibling}else E=v.child;if(E!==null)E.return=v;else for(E=v;E!==null;){if(E===r){E=null;break}if(v=E.sibling,v!==null){v.return=E.return,E=v;break}E=E.return}v=E}wn(n,r,m.children,a),r=r.child}return r;case 9:return m=r.type,h=r.pendingProps.children,ql(r,a),m=vi(m),h=h(m),r.flags|=1,wn(n,r,h,a),r.child;case 14:return h=r.type,m=zi(h,r.pendingProps),m=zi(h.type,m),PA(n,r,h,m,a);case 15:return LA(n,r,r.type,r.pendingProps,a);case 17:return h=r.type,m=r.pendingProps,m=r.elementType===h?m:zi(h,m),ap(n,r),r.tag=1,Rn(h)?(n=!0,$f(r)):n=!1,ql(r,a),SA(r,h,m),gy(r,h,m,a),wy(null,r,h,!0,n,a);case 19:return zA(n,r,a);case 22:return MA(n,r,a)}throw Error(t(156,r.tag))};function cb(n,r){return Af(n,r)}function j1(n,r,a,h){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bi(n,r,a,h){return new j1(n,r,a,h)}function zy(n){return n=n.prototype,!(!n||!n.isReactComponent)}function z1(n){if(typeof n=="function")return zy(n)?1:0;if(n!=null){if(n=n.$$typeof,n===_e)return 11;if(n===ie)return 14}return 2}function Xs(n,r){var a=n.alternate;return a===null?(a=bi(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function vp(n,r,a,h,m,v){var E=2;if(h=n,typeof n=="function")zy(n)&&(E=1);else if(typeof n=="string")E=5;else e:switch(n){case X:return ea(a.children,m,v,r);case Y:E=8,m|=8;break;case Q:return n=bi(12,a,r,m|2),n.elementType=Q,n.lanes=v,n;case ge:return n=bi(13,a,r,m),n.elementType=ge,n.lanes=v,n;case de:return n=bi(19,a,r,m),n.elementType=de,n.lanes=v,n;case Z:return wp(a,m,v,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ne:E=10;break e;case oe:E=9;break e;case _e:E=11;break e;case ie:E=14;break e;case re:E=16,h=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return r=bi(E,a,r,m),r.elementType=n,r.type=h,r.lanes=v,r}function ea(n,r,a,h){return n=bi(7,n,h,r),n.lanes=a,n}function wp(n,r,a,h){return n=bi(22,n,h,r),n.elementType=Z,n.lanes=a,n.stateNode={isHidden:!1},n}function By(n,r,a){return n=bi(6,n,null,r),n.lanes=a,n}function Hy(n,r,a){return r=bi(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function B1(n,r,a,h,m){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bu(0),this.expirationTimes=bu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bu(0),this.identifierPrefix=h,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Uy(n,r,a,h,m,v,E,L,I){return n=new B1(n,r,a,L,I),r===1?(r=1,v===!0&&(r|=8)):r=0,v=bi(3,null,null,r),n.current=v,v.stateNode=n,v.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},ty(v),n}function H1(n,r,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:h==null?null:""+h,children:n,containerInfo:r,implementation:a}}function ub(n){if(!n)return zs;n=n._reactInternals;e:{if(Ii(n)!==n||n.tag!==1)throw Error(t(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Rn(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Rn(a))return jw(n,a,r)}return r}function db(n,r,a,h,m,v,E,L,I){return n=Uy(a,h,!0,n,m,v,E,L,I),n.context=ub(null),a=n.current,h=An(),m=qs(a),v=$r(h,m),v.callback=r??null,Us(a,v,m),n.current.lanes=m,qn(n,m,h),Mn(n,h),n}function Ap(n,r,a,h){var m=r.current,v=An(),E=qs(m);return a=ub(a),r.context===null?r.context=a:r.pendingContext=a,r=$r(v,E),r.payload={element:n},h=h===void 0?null:h,h!==null&&(r.callback=h),n=Us(m,r,E),n!==null&&(Ui(n,m,E,v),Qf(n,m,E)),E}function bp(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function hb(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function $y(n,r){hb(n,r),(n=n.alternate)&&hb(n,r)}function U1(){return null}var fb=typeof reportError=="function"?reportError:function(n){console.error(n)};function Wy(n){this._internalRoot=n}Sp.prototype.render=Wy.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(t(409));Ap(n,r,null,null)},Sp.prototype.unmount=Wy.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;Qo(function(){Ap(null,n,null,null)}),r[jr]=null}};function Sp(n){this._internalRoot=n}Sp.prototype.unstable_scheduleHydration=function(n){if(n){var r=Oo();n={blockedOn:null,target:n,priority:r};for(var a=0;a<Kt.length&&r!==0&&r<Kt[a].priority;a++);Kt.splice(a,0,n),a===0&&Tf(n)}};function Vy(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Ep(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function pb(){}function $1(n,r,a,h,m){if(m){if(typeof h=="function"){var v=h;h=function(){var V=bp(E);v.call(V)}}var E=db(r,h,n,0,null,!1,!1,"",pb);return n._reactRootContainer=E,n[jr]=E.current,Lu(n.nodeType===8?n.parentNode:n),Qo(),E}for(;m=n.lastChild;)n.removeChild(m);if(typeof h=="function"){var L=h;h=function(){var V=bp(I);L.call(V)}}var I=Uy(n,0,!1,null,null,!1,!1,"",pb);return n._reactRootContainer=I,n[jr]=I.current,Lu(n.nodeType===8?n.parentNode:n),Qo(function(){Ap(r,I,a,h)}),I}function xp(n,r,a,h,m){var v=a._reactRootContainer;if(v){var E=v;if(typeof m=="function"){var L=m;m=function(){var I=bp(E);L.call(I)}}Ap(r,E,n,m)}else E=$1(a,r,n,m,h);return bp(E)}Cf=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var a=Fo(r.pendingLanes);a!==0&&(kl(r,a|1),Mn(r,mt()),(Ye&6)===0&&(Ql=mt()+500,Bs()))}break;case 13:Qo(function(){var h=Ur(n,1);if(h!==null){var m=An();Ui(h,n,1,m)}}),$y(n,1)}},Su=function(n){if(n.tag===13){var r=Ur(n,134217728);if(r!==null){var a=An();Ui(r,n,134217728,a)}$y(n,134217728)}},Tl=function(n){if(n.tag===13){var r=qs(n),a=Ur(n,r);if(a!==null){var h=An();Ui(a,n,r,h)}$y(n,r)}},Oo=function(){return Ke},Rl=function(n,r){var a=Ke;try{return Ke=n,r()}finally{Ke=a}},ko=function(n,r,a){switch(r){case"input":if(Lt(n,a),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var h=a[r];if(h!==n&&h.form===n.form){var m=Hf(h);if(!m)throw Error(t(90));vn(h),Lt(h,m)}}}break;case"textarea":Mi(n,a);break;case"select":r=a.value,r!=null&&gt(n,!!a.multiple,r,!1)}},wl=Oy,Ro=Qo;var W1={usingClientEntryPoint:!1,Events:[Iu,jl,Hf,pu,To,Oy]},Xu={findFiberByHostInstance:$o,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},V1={bundleType:Xu.bundleType,version:Xu.version,rendererPackageName:Xu.rendererPackageName,rendererConfig:Xu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:z.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=bl(n),n===null?null:n.stateNode},findFiberByHostInstance:Xu.findFiberByHostInstance||U1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_p.isDisabled&&_p.supportsFiber)try{xl=_p.inject(V1),Vn=_p}catch{}}return Dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W1,Dn.createPortal=function(n,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vy(r))throw Error(t(200));return H1(n,r,null,a)},Dn.createRoot=function(n,r){if(!Vy(n))throw Error(t(299));var a=!1,h="",m=fb;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onRecoverableError!==void 0&&(m=r.onRecoverableError)),r=Uy(n,1,!1,null,null,a,!1,h,m),n[jr]=r.current,Lu(n.nodeType===8?n.parentNode:n),new Wy(r)},Dn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=bl(r),n=n===null?null:n.stateNode,n},Dn.flushSync=function(n){return Qo(n)},Dn.hydrate=function(n,r,a){if(!Ep(r))throw Error(t(200));return xp(null,n,r,!0,a)},Dn.hydrateRoot=function(n,r,a){if(!Vy(n))throw Error(t(405));var h=a!=null&&a.hydratedSources||null,m=!1,v="",E=fb;if(a!=null&&(a.unstable_strictMode===!0&&(m=!0),a.identifierPrefix!==void 0&&(v=a.identifierPrefix),a.onRecoverableError!==void 0&&(E=a.onRecoverableError)),r=db(r,null,n,1,a??null,m,!1,v,E),n[jr]=r.current,Lu(n),h)for(n=0;n<h.length;n++)a=h[n],m=a._getVersion,m=m(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,m]:r.mutableSourceEagerHydrationData.push(a,m);return new Sp(r)},Dn.render=function(n,r,a){if(!Ep(r))throw Error(t(200));return xp(null,n,r,!1,a)},Dn.unmountComponentAtNode=function(n){if(!Ep(n))throw Error(t(40));return n._reactRootContainer?(Qo(function(){xp(null,null,n,!1,function(){n._reactRootContainer=null,n[jr]=null})}),!0):!1},Dn.unstable_batchedUpdates=Oy,Dn.unstable_renderSubtreeIntoContainer=function(n,r,a,h){if(!Ep(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return xp(n,r,a,!1,h)},Dn.version="18.3.1-next-f1338f8080-20240426",Dn}var Eb;function tC(){if(Eb)return Ky.exports;Eb=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(e){console.error(e)}}return l(),Ky.exports=eC(),Ky.exports}var xb;function nC(){if(xb)return Cp;xb=1;var l=tC();return Cp.createRoot=l.createRoot,Cp.hydrateRoot=l.hydrateRoot,Cp}var iC=nC();function rC(l={}){const{nonce:e,locale:t,onScriptLoadSuccess:i,onScriptLoadError:s}=l,[o,c]=H.useState(!1),d=H.useRef(i);d.current=i;const f=H.useRef(s);return f.current=s,H.useEffect(()=>{const p=document.createElement("script");return p.src="https://accounts.google.com/gsi/client",t&&(p.src+=`?hl=${t}`),p.async=!0,p.defer=!0,p.nonce=e,p.onload=()=>{var g;c(!0),(g=d.current)===null||g===void 0||g.call(d)},p.onerror=()=>{var g;c(!1),(g=f.current)===null||g===void 0||g.call(f)},document.body.appendChild(p),()=>{document.body.removeChild(p)}},[e]),o}const LS=H.createContext(null);function sC({clientId:l,nonce:e,locale:t,onScriptLoadSuccess:i,onScriptLoadError:s,children:o}){const c=rC({nonce:e,onScriptLoadSuccess:i,onScriptLoadError:s,locale:t}),d=H.useMemo(()=>({locale:t,clientId:l,scriptLoadedSuccessfully:c}),[l,c]);return rl.createElement(LS.Provider,{value:d},o)}function oC(){const l=H.useContext(LS);if(!l)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return l}function aC(){var l,e,t;(t=(e=(l=window==null?void 0:window.google)===null||l===void 0?void 0:l.accounts)===null||e===void 0?void 0:e.id)===null||t===void 0||t.disableAutoSelect()}function lC({flow:l="implicit",scope:e="",onSuccess:t,onError:i,onNonOAuthError:s,overrideScope:o,state:c,...d}){const{clientId:f,scriptLoadedSuccessfully:p}=oC(),g=H.useRef(),y=H.useRef(t);y.current=t;const w=H.useRef(i);w.current=i;const b=H.useRef(s);b.current=s,H.useEffect(()=>{var _,R;if(!p)return;const D=l==="implicit"?"initTokenClient":"initCodeClient",j=(R=(_=window==null?void 0:window.google)===null||_===void 0?void 0:_.accounts)===null||R===void 0?void 0:R.oauth2[D]({client_id:f,scope:o?e:`openid profile email ${e}`,callback:z=>{var B,F;if(z.error)return(B=w.current)===null||B===void 0?void 0:B.call(w,z);(F=y.current)===null||F===void 0||F.call(y,z)},error_callback:z=>{var B;(B=b.current)===null||B===void 0||B.call(b,z)},state:c,...d});g.current=j},[f,p,l,e,c]);const A=H.useCallback(_=>{var R;return(R=g.current)===null||R===void 0?void 0:R.requestAccessToken(_)},[]),k=H.useCallback(()=>{var _;return(_=g.current)===null||_===void 0?void 0:_.requestCode()},[]);return l==="implicit"?A:k}function MS(l,e){return function(){return l.apply(e,arguments)}}const{toString:cC}=Object.prototype,{getPrototypeOf:O0}=Object,{iterator:$g,toStringTag:DS}=Symbol,Wg=(l=>e=>{const t=cC.call(e);return l[t]||(l[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),rr=l=>(l=l.toLowerCase(),e=>Wg(e)===l),Vg=l=>e=>typeof e===l,{isArray:cu}=Array,au=Vg("undefined");function rf(l){return l!==null&&!au(l)&&l.constructor!==null&&!au(l.constructor)&&Hn(l.constructor.isBuffer)&&l.constructor.isBuffer(l)}const IS=rr("ArrayBuffer");function uC(l){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(l):e=l&&l.buffer&&IS(l.buffer),e}const dC=Vg("string"),Hn=Vg("function"),FS=Vg("number"),sf=l=>l!==null&&typeof l=="object",hC=l=>l===!0||l===!1,zp=l=>{if(Wg(l)!=="object")return!1;const e=O0(l);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(DS in l)&&!($g in l)},fC=l=>{if(!sf(l)||rf(l))return!1;try{return Object.keys(l).length===0&&Object.getPrototypeOf(l)===Object.prototype}catch{return!1}},pC=rr("Date"),gC=rr("File"),mC=rr("Blob"),yC=rr("FileList"),vC=l=>sf(l)&&Hn(l.pipe),wC=l=>{let e;return l&&(typeof FormData=="function"&&l instanceof FormData||Hn(l.append)&&((e=Wg(l))==="formdata"||e==="object"&&Hn(l.toString)&&l.toString()==="[object FormData]"))},AC=rr("URLSearchParams"),[bC,SC,EC,xC]=["ReadableStream","Request","Response","Headers"].map(rr),_C=l=>l.trim?l.trim():l.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function of(l,e,{allOwnKeys:t=!1}={}){if(l===null||typeof l>"u")return;let i,s;if(typeof l!="object"&&(l=[l]),cu(l))for(i=0,s=l.length;i<s;i++)e.call(null,l[i],i,l);else{if(rf(l))return;const o=t?Object.getOwnPropertyNames(l):Object.keys(l),c=o.length;let d;for(i=0;i<c;i++)d=o[i],e.call(null,l[d],d,l)}}function OS(l,e){if(rf(l))return null;e=e.toLowerCase();const t=Object.keys(l);let i=t.length,s;for(;i-- >0;)if(s=t[i],e===s.toLowerCase())return s;return null}const la=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,NS=l=>!au(l)&&l!==la;function fv(){const{caseless:l,skipUndefined:e}=NS(this)&&this||{},t={},i=(s,o)=>{if(o==="__proto__"||o==="constructor"||o==="prototype")return;const c=l&&OS(t,o)||o;zp(t[c])&&zp(s)?t[c]=fv(t[c],s):zp(s)?t[c]=fv({},s):cu(s)?t[c]=s.slice():(!e||!au(s))&&(t[c]=s)};for(let s=0,o=arguments.length;s<o;s++)arguments[s]&&of(arguments[s],i);return t}const CC=(l,e,t,{allOwnKeys:i}={})=>(of(e,(s,o)=>{t&&Hn(s)?Object.defineProperty(l,o,{value:MS(s,t),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(l,o,{value:s,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:i}),l),kC=l=>(l.charCodeAt(0)===65279&&(l=l.slice(1)),l),TC=(l,e,t,i)=>{l.prototype=Object.create(e.prototype,i),Object.defineProperty(l.prototype,"constructor",{value:l,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(l,"super",{value:e.prototype}),t&&Object.assign(l.prototype,t)},RC=(l,e,t,i)=>{let s,o,c;const d={};if(e=e||{},l==null)return e;do{for(s=Object.getOwnPropertyNames(l),o=s.length;o-- >0;)c=s[o],(!i||i(c,l,e))&&!d[c]&&(e[c]=l[c],d[c]=!0);l=t!==!1&&O0(l)}while(l&&(!t||t(l,e))&&l!==Object.prototype);return e},PC=(l,e,t)=>{l=String(l),(t===void 0||t>l.length)&&(t=l.length),t-=e.length;const i=l.indexOf(e,t);return i!==-1&&i===t},LC=l=>{if(!l)return null;if(cu(l))return l;let e=l.length;if(!FS(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=l[e];return t},MC=(l=>e=>l&&e instanceof l)(typeof Uint8Array<"u"&&O0(Uint8Array)),DC=(l,e)=>{const i=(l&&l[$g]).call(l);let s;for(;(s=i.next())&&!s.done;){const o=s.value;e.call(l,o[0],o[1])}},IC=(l,e)=>{let t;const i=[];for(;(t=l.exec(e))!==null;)i.push(t);return i},FC=rr("HTMLFormElement"),OC=l=>l.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,s){return i.toUpperCase()+s}),_b=(({hasOwnProperty:l})=>(e,t)=>l.call(e,t))(Object.prototype),NC=rr("RegExp"),jS=(l,e)=>{const t=Object.getOwnPropertyDescriptors(l),i={};of(t,(s,o)=>{let c;(c=e(s,o,l))!==!1&&(i[o]=c||s)}),Object.defineProperties(l,i)},jC=l=>{jS(l,(e,t)=>{if(Hn(l)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=l[t];if(Hn(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},zC=(l,e)=>{const t={},i=s=>{s.forEach(o=>{t[o]=!0})};return cu(l)?i(l):i(String(l).split(e)),t},BC=()=>{},HC=(l,e)=>l!=null&&Number.isFinite(l=+l)?l:e;function UC(l){return!!(l&&Hn(l.append)&&l[DS]==="FormData"&&l[$g])}const $C=l=>{const e=new Array(10),t=(i,s)=>{if(sf(i)){if(e.indexOf(i)>=0)return;if(rf(i))return i;if(!("toJSON"in i)){e[s]=i;const o=cu(i)?[]:{};return of(i,(c,d)=>{const f=t(c,s+1);!au(f)&&(o[d]=f)}),e[s]=void 0,o}}return i};return t(l,0)},WC=rr("AsyncFunction"),VC=l=>l&&(sf(l)||Hn(l))&&Hn(l.then)&&Hn(l.catch),zS=((l,e)=>l?setImmediate:e?((t,i)=>(la.addEventListener("message",({source:s,data:o})=>{s===la&&o===t&&i.length&&i.shift()()},!1),s=>{i.push(s),la.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Hn(la.postMessage)),qC=typeof queueMicrotask<"u"?queueMicrotask.bind(la):typeof process<"u"&&process.nextTick||zS,GC=l=>l!=null&&Hn(l[$g]),G={isArray:cu,isArrayBuffer:IS,isBuffer:rf,isFormData:wC,isArrayBufferView:uC,isString:dC,isNumber:FS,isBoolean:hC,isObject:sf,isPlainObject:zp,isEmptyObject:fC,isReadableStream:bC,isRequest:SC,isResponse:EC,isHeaders:xC,isUndefined:au,isDate:pC,isFile:gC,isBlob:mC,isRegExp:NC,isFunction:Hn,isStream:vC,isURLSearchParams:AC,isTypedArray:MC,isFileList:yC,forEach:of,merge:fv,extend:CC,trim:_C,stripBOM:kC,inherits:TC,toFlatObject:RC,kindOf:Wg,kindOfTest:rr,endsWith:PC,toArray:LC,forEachEntry:DC,matchAll:IC,isHTMLForm:FC,hasOwnProperty:_b,hasOwnProp:_b,reduceDescriptors:jS,freezeMethods:jC,toObjectSet:zC,toCamelCase:OC,noop:BC,toFiniteNumber:HC,findKey:OS,global:la,isContextDefined:NS,isSpecCompliantForm:UC,toJSONObject:$C,isAsyncFn:WC,isThenable:VC,setImmediate:zS,asap:qC,isIterable:GC};let Me=class BS extends Error{static from(e,t,i,s,o,c){const d=new BS(e.message,t||e.code,i,s,o);return d.cause=e,d.name=e.name,c&&Object.assign(d,c),d}constructor(e,t,i,s,o){super(e),this.name="AxiosError",this.isAxiosError=!0,t&&(this.code=t),i&&(this.config=i),s&&(this.request=s),o&&(this.response=o,this.status=o.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:G.toJSONObject(this.config),code:this.code,status:this.status}}};Me.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";Me.ERR_BAD_OPTION="ERR_BAD_OPTION";Me.ECONNABORTED="ECONNABORTED";Me.ETIMEDOUT="ETIMEDOUT";Me.ERR_NETWORK="ERR_NETWORK";Me.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";Me.ERR_DEPRECATED="ERR_DEPRECATED";Me.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";Me.ERR_BAD_REQUEST="ERR_BAD_REQUEST";Me.ERR_CANCELED="ERR_CANCELED";Me.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";Me.ERR_INVALID_URL="ERR_INVALID_URL";const XC=null;function pv(l){return G.isPlainObject(l)||G.isArray(l)}function HS(l){return G.endsWith(l,"[]")?l.slice(0,-2):l}function Cb(l,e,t){return l?l.concat(e).map(function(s,o){return s=HS(s),!t&&o?"["+s+"]":s}).join(t?".":""):e}function KC(l){return G.isArray(l)&&!l.some(pv)}const YC=G.toFlatObject(G,{},null,function(e){return/^is[A-Z]/.test(e)});function qg(l,e,t){if(!G.isObject(l))throw new TypeError("target must be an object");e=e||new FormData,t=G.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(k,_){return!G.isUndefined(_[k])});const i=t.metaTokens,s=t.visitor||g,o=t.dots,c=t.indexes,f=(t.Blob||typeof Blob<"u"&&Blob)&&G.isSpecCompliantForm(e);if(!G.isFunction(s))throw new TypeError("visitor must be a function");function p(A){if(A===null)return"";if(G.isDate(A))return A.toISOString();if(G.isBoolean(A))return A.toString();if(!f&&G.isBlob(A))throw new Me("Blob is not supported. Use a Buffer instead.");return G.isArrayBuffer(A)||G.isTypedArray(A)?f&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function g(A,k,_){let R=A;if(A&&!_&&typeof A=="object"){if(G.endsWith(k,"{}"))k=i?k:k.slice(0,-2),A=JSON.stringify(A);else if(G.isArray(A)&&KC(A)||(G.isFileList(A)||G.endsWith(k,"[]"))&&(R=G.toArray(A)))return k=HS(k),R.forEach(function(j,z){!(G.isUndefined(j)||j===null)&&e.append(c===!0?Cb([k],z,o):c===null?k:k+"[]",p(j))}),!1}return pv(A)?!0:(e.append(Cb(_,k,o),p(A)),!1)}const y=[],w=Object.assign(YC,{defaultVisitor:g,convertValue:p,isVisitable:pv});function b(A,k){if(!G.isUndefined(A)){if(y.indexOf(A)!==-1)throw Error("Circular reference detected in "+k.join("."));y.push(A),G.forEach(A,function(R,D){(!(G.isUndefined(R)||R===null)&&s.call(e,R,G.isString(D)?D.trim():D,k,w))===!0&&b(R,k?k.concat(D):[D])}),y.pop()}}if(!G.isObject(l))throw new TypeError("data must be an object");return b(l),e}function kb(l){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(l).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function N0(l,e){this._pairs=[],l&&qg(l,this,e)}const US=N0.prototype;US.append=function(e,t){this._pairs.push([e,t])};US.toString=function(e){const t=e?function(i){return e.call(this,i,kb)}:kb;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function QC(l){return encodeURIComponent(l).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function $S(l,e,t){if(!e)return l;const i=t&&t.encode||QC,s=G.isFunction(t)?{serialize:t}:t,o=s&&s.serialize;let c;if(o?c=o(e,s):c=G.isURLSearchParams(e)?e.toString():new N0(e,s).toString(i),c){const d=l.indexOf("#");d!==-1&&(l=l.slice(0,d)),l+=(l.indexOf("?")===-1?"?":"&")+c}return l}class Tb{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){G.forEach(this.handlers,function(i){i!==null&&e(i)})}}const j0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},JC=typeof URLSearchParams<"u"?URLSearchParams:N0,ZC=typeof FormData<"u"?FormData:null,ek=typeof Blob<"u"?Blob:null,tk={isBrowser:!0,classes:{URLSearchParams:JC,FormData:ZC,Blob:ek},protocols:["http","https","file","blob","url","data"]},z0=typeof window<"u"&&typeof document<"u",gv=typeof navigator=="object"&&navigator||void 0,nk=z0&&(!gv||["ReactNative","NativeScript","NS"].indexOf(gv.product)<0),ik=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",rk=z0&&window.location.href||"http://localhost",sk=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:z0,hasStandardBrowserEnv:nk,hasStandardBrowserWebWorkerEnv:ik,navigator:gv,origin:rk},Symbol.toStringTag,{value:"Module"})),gn={...sk,...tk};function ok(l,e){return qg(l,new gn.classes.URLSearchParams,{visitor:function(t,i,s,o){return gn.isNode&&G.isBuffer(t)?(this.append(i,t.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...e})}function ak(l){return G.matchAll(/\w+|\[(\w*)]/g,l).map(e=>e[0]==="[]"?"":e[1]||e[0])}function lk(l){const e={},t=Object.keys(l);let i;const s=t.length;let o;for(i=0;i<s;i++)o=t[i],e[o]=l[o];return e}function WS(l){function e(t,i,s,o){let c=t[o++];if(c==="__proto__")return!0;const d=Number.isFinite(+c),f=o>=t.length;return c=!c&&G.isArray(s)?s.length:c,f?(G.hasOwnProp(s,c)?s[c]=[s[c],i]:s[c]=i,!d):((!s[c]||!G.isObject(s[c]))&&(s[c]=[]),e(t,i,s[c],o)&&G.isArray(s[c])&&(s[c]=lk(s[c])),!d)}if(G.isFormData(l)&&G.isFunction(l.entries)){const t={};return G.forEachEntry(l,(i,s)=>{e(ak(i),s,t,0)}),t}return null}function ck(l,e,t){if(G.isString(l))try{return(e||JSON.parse)(l),G.trim(l)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(l)}const af={transitional:j0,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",s=i.indexOf("application/json")>-1,o=G.isObject(e);if(o&&G.isHTMLForm(e)&&(e=new FormData(e)),G.isFormData(e))return s?JSON.stringify(WS(e)):e;if(G.isArrayBuffer(e)||G.isBuffer(e)||G.isStream(e)||G.isFile(e)||G.isBlob(e)||G.isReadableStream(e))return e;if(G.isArrayBufferView(e))return e.buffer;if(G.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(o){if(i.indexOf("application/x-www-form-urlencoded")>-1)return ok(e,this.formSerializer).toString();if((d=G.isFileList(e))||i.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return qg(d?{"files[]":e}:e,f&&new f,this.formSerializer)}}return o||s?(t.setContentType("application/json",!1),ck(e)):e}],transformResponse:[function(e){const t=this.transitional||af.transitional,i=t&&t.forcedJSONParsing,s=this.responseType==="json";if(G.isResponse(e)||G.isReadableStream(e))return e;if(e&&G.isString(e)&&(i&&!this.responseType||s)){const c=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(d){if(c)throw d.name==="SyntaxError"?Me.from(d,Me.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:gn.classes.FormData,Blob:gn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};G.forEach(["delete","get","head","post","put","patch"],l=>{af.headers[l]={}});const uk=G.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),dk=l=>{const e={};let t,i,s;return l&&l.split(`
`).forEach(function(c){s=c.indexOf(":"),t=c.substring(0,s).trim().toLowerCase(),i=c.substring(s+1).trim(),!(!t||e[t]&&uk[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},Rb=Symbol("internals");function Yu(l){return l&&String(l).trim().toLowerCase()}function Bp(l){return l===!1||l==null?l:G.isArray(l)?l.map(Bp):String(l)}function hk(l){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(l);)e[i[1]]=i[2];return e}const fk=l=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(l.trim());function Jy(l,e,t,i,s){if(G.isFunction(i))return i.call(this,e,t);if(s&&(e=t),!!G.isString(e)){if(G.isString(i))return e.indexOf(i)!==-1;if(G.isRegExp(i))return i.test(e)}}function pk(l){return l.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function gk(l,e){const t=G.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(l,i+t,{value:function(s,o,c){return this[i].call(this,e,s,o,c)},configurable:!0})})}let Un=class{constructor(e){e&&this.set(e)}set(e,t,i){const s=this;function o(d,f,p){const g=Yu(f);if(!g)throw new Error("header name must be a non-empty string");const y=G.findKey(s,g);(!y||s[y]===void 0||p===!0||p===void 0&&s[y]!==!1)&&(s[y||f]=Bp(d))}const c=(d,f)=>G.forEach(d,(p,g)=>o(p,g,f));if(G.isPlainObject(e)||e instanceof this.constructor)c(e,t);else if(G.isString(e)&&(e=e.trim())&&!fk(e))c(dk(e),t);else if(G.isObject(e)&&G.isIterable(e)){let d={},f,p;for(const g of e){if(!G.isArray(g))throw TypeError("Object iterator must return a key-value pair");d[p=g[0]]=(f=d[p])?G.isArray(f)?[...f,g[1]]:[f,g[1]]:g[1]}c(d,t)}else e!=null&&o(t,e,i);return this}get(e,t){if(e=Yu(e),e){const i=G.findKey(this,e);if(i){const s=this[i];if(!t)return s;if(t===!0)return hk(s);if(G.isFunction(t))return t.call(this,s,i);if(G.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Yu(e),e){const i=G.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||Jy(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let s=!1;function o(c){if(c=Yu(c),c){const d=G.findKey(i,c);d&&(!t||Jy(i,i[d],d,t))&&(delete i[d],s=!0)}}return G.isArray(e)?e.forEach(o):o(e),s}clear(e){const t=Object.keys(this);let i=t.length,s=!1;for(;i--;){const o=t[i];(!e||Jy(this,this[o],o,e,!0))&&(delete this[o],s=!0)}return s}normalize(e){const t=this,i={};return G.forEach(this,(s,o)=>{const c=G.findKey(i,o);if(c){t[c]=Bp(s),delete t[o];return}const d=e?pk(o):String(o).trim();d!==o&&delete t[o],t[d]=Bp(s),i[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return G.forEach(this,(i,s)=>{i!=null&&i!==!1&&(t[s]=e&&G.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(s=>i.set(s)),i}static accessor(e){const i=(this[Rb]=this[Rb]={accessors:{}}).accessors,s=this.prototype;function o(c){const d=Yu(c);i[d]||(gk(s,c),i[d]=!0)}return G.isArray(e)?e.forEach(o):o(e),this}};Un.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);G.reduceDescriptors(Un.prototype,({value:l},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>l,set(i){this[t]=i}}});G.freezeMethods(Un);function Zy(l,e){const t=this||af,i=e||t,s=Un.from(i.headers);let o=i.data;return G.forEach(l,function(d){o=d.call(t,o,s.normalize(),e?e.status:void 0)}),s.normalize(),o}function VS(l){return!!(l&&l.__CANCEL__)}let lf=class extends Me{constructor(e,t,i){super(e??"canceled",Me.ERR_CANCELED,t,i),this.name="CanceledError",this.__CANCEL__=!0}};function qS(l,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?l(t):e(new Me("Request failed with status code "+t.status,[Me.ERR_BAD_REQUEST,Me.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function mk(l){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(l);return e&&e[1]||""}function yk(l,e){l=l||10;const t=new Array(l),i=new Array(l);let s=0,o=0,c;return e=e!==void 0?e:1e3,function(f){const p=Date.now(),g=i[o];c||(c=p),t[s]=f,i[s]=p;let y=o,w=0;for(;y!==s;)w+=t[y++],y=y%l;if(s=(s+1)%l,s===o&&(o=(o+1)%l),p-c<e)return;const b=g&&p-g;return b?Math.round(w*1e3/b):void 0}}function vk(l,e){let t=0,i=1e3/e,s,o;const c=(p,g=Date.now())=>{t=g,s=null,o&&(clearTimeout(o),o=null),l(...p)};return[(...p)=>{const g=Date.now(),y=g-t;y>=i?c(p,g):(s=p,o||(o=setTimeout(()=>{o=null,c(s)},i-y)))},()=>s&&c(s)]}const pg=(l,e,t=3)=>{let i=0;const s=yk(50,250);return vk(o=>{const c=o.loaded,d=o.lengthComputable?o.total:void 0,f=c-i,p=s(f),g=c<=d;i=c;const y={loaded:c,total:d,progress:d?c/d:void 0,bytes:f,rate:p||void 0,estimated:p&&d&&g?(d-c)/p:void 0,event:o,lengthComputable:d!=null,[e?"download":"upload"]:!0};l(y)},t)},Pb=(l,e)=>{const t=l!=null;return[i=>e[0]({lengthComputable:t,total:l,loaded:i}),e[1]]},Lb=l=>(...e)=>G.asap(()=>l(...e)),wk=gn.hasStandardBrowserEnv?((l,e)=>t=>(t=new URL(t,gn.origin),l.protocol===t.protocol&&l.host===t.host&&(e||l.port===t.port)))(new URL(gn.origin),gn.navigator&&/(msie|trident)/i.test(gn.navigator.userAgent)):()=>!0,Ak=gn.hasStandardBrowserEnv?{write(l,e,t,i,s,o,c){if(typeof document>"u")return;const d=[`${l}=${encodeURIComponent(e)}`];G.isNumber(t)&&d.push(`expires=${new Date(t).toUTCString()}`),G.isString(i)&&d.push(`path=${i}`),G.isString(s)&&d.push(`domain=${s}`),o===!0&&d.push("secure"),G.isString(c)&&d.push(`SameSite=${c}`),document.cookie=d.join("; ")},read(l){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+l+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(l){this.write(l,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function bk(l){return typeof l!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(l)}function Sk(l,e){return e?l.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):l}function GS(l,e,t){let i=!bk(e);return l&&(i||t==!1)?Sk(l,e):e}const Mb=l=>l instanceof Un?{...l}:l;function ol(l,e){e=e||{};const t={};function i(p,g,y,w){return G.isPlainObject(p)&&G.isPlainObject(g)?G.merge.call({caseless:w},p,g):G.isPlainObject(g)?G.merge({},g):G.isArray(g)?g.slice():g}function s(p,g,y,w){if(G.isUndefined(g)){if(!G.isUndefined(p))return i(void 0,p,y,w)}else return i(p,g,y,w)}function o(p,g){if(!G.isUndefined(g))return i(void 0,g)}function c(p,g){if(G.isUndefined(g)){if(!G.isUndefined(p))return i(void 0,p)}else return i(void 0,g)}function d(p,g,y){if(y in e)return i(p,g);if(y in l)return i(void 0,p)}const f={url:o,method:o,data:o,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:d,headers:(p,g,y)=>s(Mb(p),Mb(g),y,!0)};return G.forEach(Object.keys({...l,...e}),function(g){if(g==="__proto__"||g==="constructor"||g==="prototype")return;const y=G.hasOwnProp(f,g)?f[g]:s,w=y(l[g],e[g],g);G.isUndefined(w)&&y!==d||(t[g]=w)}),t}const XS=l=>{const e=ol({},l);let{data:t,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:o,headers:c,auth:d}=e;if(e.headers=c=Un.from(c),e.url=$S(GS(e.baseURL,e.url,e.allowAbsoluteUrls),l.params,l.paramsSerializer),d&&c.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),G.isFormData(t)){if(gn.hasStandardBrowserEnv||gn.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if(G.isFunction(t.getHeaders)){const f=t.getHeaders(),p=["content-type","content-length"];Object.entries(f).forEach(([g,y])=>{p.includes(g.toLowerCase())&&c.set(g,y)})}}if(gn.hasStandardBrowserEnv&&(i&&G.isFunction(i)&&(i=i(e)),i||i!==!1&&wk(e.url))){const f=s&&o&&Ak.read(o);f&&c.set(s,f)}return e},Ek=typeof XMLHttpRequest<"u",xk=Ek&&function(l){return new Promise(function(t,i){const s=XS(l);let o=s.data;const c=Un.from(s.headers).normalize();let{responseType:d,onUploadProgress:f,onDownloadProgress:p}=s,g,y,w,b,A;function k(){b&&b(),A&&A(),s.cancelToken&&s.cancelToken.unsubscribe(g),s.signal&&s.signal.removeEventListener("abort",g)}let _=new XMLHttpRequest;_.open(s.method.toUpperCase(),s.url,!0),_.timeout=s.timeout;function R(){if(!_)return;const j=Un.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),B={data:!d||d==="text"||d==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:j,config:l,request:_};qS(function(X){t(X),k()},function(X){i(X),k()},B),_=null}"onloadend"in _?_.onloadend=R:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(R)},_.onabort=function(){_&&(i(new Me("Request aborted",Me.ECONNABORTED,l,_)),_=null)},_.onerror=function(z){const B=z&&z.message?z.message:"Network Error",F=new Me(B,Me.ERR_NETWORK,l,_);F.event=z||null,i(F),_=null},_.ontimeout=function(){let z=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const B=s.transitional||j0;s.timeoutErrorMessage&&(z=s.timeoutErrorMessage),i(new Me(z,B.clarifyTimeoutError?Me.ETIMEDOUT:Me.ECONNABORTED,l,_)),_=null},o===void 0&&c.setContentType(null),"setRequestHeader"in _&&G.forEach(c.toJSON(),function(z,B){_.setRequestHeader(B,z)}),G.isUndefined(s.withCredentials)||(_.withCredentials=!!s.withCredentials),d&&d!=="json"&&(_.responseType=s.responseType),p&&([w,A]=pg(p,!0),_.addEventListener("progress",w)),f&&_.upload&&([y,b]=pg(f),_.upload.addEventListener("progress",y),_.upload.addEventListener("loadend",b)),(s.cancelToken||s.signal)&&(g=j=>{_&&(i(!j||j.type?new lf(null,l,_):j),_.abort(),_=null)},s.cancelToken&&s.cancelToken.subscribe(g),s.signal&&(s.signal.aborted?g():s.signal.addEventListener("abort",g)));const D=mk(s.url);if(D&&gn.protocols.indexOf(D)===-1){i(new Me("Unsupported protocol "+D+":",Me.ERR_BAD_REQUEST,l));return}_.send(o||null)})},_k=(l,e)=>{const{length:t}=l=l?l.filter(Boolean):[];if(e||t){let i=new AbortController,s;const o=function(p){if(!s){s=!0,d();const g=p instanceof Error?p:this.reason;i.abort(g instanceof Me?g:new lf(g instanceof Error?g.message:g))}};let c=e&&setTimeout(()=>{c=null,o(new Me(`timeout of ${e}ms exceeded`,Me.ETIMEDOUT))},e);const d=()=>{l&&(c&&clearTimeout(c),c=null,l.forEach(p=>{p.unsubscribe?p.unsubscribe(o):p.removeEventListener("abort",o)}),l=null)};l.forEach(p=>p.addEventListener("abort",o));const{signal:f}=i;return f.unsubscribe=()=>G.asap(d),f}},Ck=function*(l,e){let t=l.byteLength;if(t<e){yield l;return}let i=0,s;for(;i<t;)s=i+e,yield l.slice(i,s),i=s},kk=async function*(l,e){for await(const t of Tk(l))yield*Ck(t,e)},Tk=async function*(l){if(l[Symbol.asyncIterator]){yield*l;return}const e=l.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},Db=(l,e,t,i)=>{const s=kk(l,e);let o=0,c,d=f=>{c||(c=!0,i&&i(f))};return new ReadableStream({async pull(f){try{const{done:p,value:g}=await s.next();if(p){d(),f.close();return}let y=g.byteLength;if(t){let w=o+=y;t(w)}f.enqueue(new Uint8Array(g))}catch(p){throw d(p),p}},cancel(f){return d(f),s.return()}},{highWaterMark:2})},Ib=64*1024,{isFunction:kp}=G,Rk=(({Request:l,Response:e})=>({Request:l,Response:e}))(G.global),{ReadableStream:Fb,TextEncoder:Ob}=G.global,Nb=(l,...e)=>{try{return!!l(...e)}catch{return!1}},Pk=l=>{l=G.merge.call({skipUndefined:!0},Rk,l);const{fetch:e,Request:t,Response:i}=l,s=e?kp(e):typeof fetch=="function",o=kp(t),c=kp(i);if(!s)return!1;const d=s&&kp(Fb),f=s&&(typeof Ob=="function"?(A=>k=>A.encode(k))(new Ob):async A=>new Uint8Array(await new t(A).arrayBuffer())),p=o&&d&&Nb(()=>{let A=!1;const k=new t(gn.origin,{body:new Fb,method:"POST",get duplex(){return A=!0,"half"}}).headers.has("Content-Type");return A&&!k}),g=c&&d&&Nb(()=>G.isReadableStream(new i("").body)),y={stream:g&&(A=>A.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(A=>{!y[A]&&(y[A]=(k,_)=>{let R=k&&k[A];if(R)return R.call(k);throw new Me(`Response type '${A}' is not supported`,Me.ERR_NOT_SUPPORT,_)})});const w=async A=>{if(A==null)return 0;if(G.isBlob(A))return A.size;if(G.isSpecCompliantForm(A))return(await new t(gn.origin,{method:"POST",body:A}).arrayBuffer()).byteLength;if(G.isArrayBufferView(A)||G.isArrayBuffer(A))return A.byteLength;if(G.isURLSearchParams(A)&&(A=A+""),G.isString(A))return(await f(A)).byteLength},b=async(A,k)=>{const _=G.toFiniteNumber(A.getContentLength());return _??w(k)};return async A=>{let{url:k,method:_,data:R,signal:D,cancelToken:j,timeout:z,onDownloadProgress:B,onUploadProgress:F,responseType:X,headers:Y,withCredentials:Q="same-origin",fetchOptions:ne}=XS(A),oe=e||fetch;X=X?(X+"").toLowerCase():"text";let _e=_k([D,j&&j.toAbortSignal()],z),ge=null;const de=_e&&_e.unsubscribe&&(()=>{_e.unsubscribe()});let ie;try{if(F&&p&&_!=="get"&&_!=="head"&&(ie=await b(Y,R))!==0){let M=new t(k,{method:"POST",body:R,duplex:"half"}),$;if(G.isFormData(R)&&($=M.headers.get("content-type"))&&Y.setContentType($),M.body){const[le,me]=Pb(ie,pg(Lb(F)));R=Db(M.body,Ib,le,me)}}G.isString(Q)||(Q=Q?"include":"omit");const re=o&&"credentials"in t.prototype,Z={...ne,signal:_e,method:_.toUpperCase(),headers:Y.normalize().toJSON(),body:R,duplex:"half",credentials:re?Q:void 0};ge=o&&new t(k,Z);let q=await(o?oe(ge,ne):oe(k,Z));const ue=g&&(X==="stream"||X==="response");if(g&&(B||ue&&de)){const M={};["status","statusText","headers"].forEach(Se=>{M[Se]=q[Se]});const $=G.toFiniteNumber(q.headers.get("content-length")),[le,me]=B&&Pb($,pg(Lb(B),!0))||[];q=new i(Db(q.body,Ib,le,()=>{me&&me(),de&&de()}),M)}X=X||"text";let ae=await y[G.findKey(y,X)||"text"](q,A);return!ue&&de&&de(),await new Promise((M,$)=>{qS(M,$,{data:ae,headers:Un.from(q.headers),status:q.status,statusText:q.statusText,config:A,request:ge})})}catch(re){throw de&&de(),re&&re.name==="TypeError"&&/Load failed|fetch/i.test(re.message)?Object.assign(new Me("Network Error",Me.ERR_NETWORK,A,ge,re&&re.response),{cause:re.cause||re}):Me.from(re,re&&re.code,A,ge,re&&re.response)}}},Lk=new Map,KS=l=>{let e=l&&l.env||{};const{fetch:t,Request:i,Response:s}=e,o=[i,s,t];let c=o.length,d=c,f,p,g=Lk;for(;d--;)f=o[d],p=g.get(f),p===void 0&&g.set(f,p=d?new Map:Pk(e)),g=p;return p};KS();const B0={http:XC,xhr:xk,fetch:{get:KS}};G.forEach(B0,(l,e)=>{if(l){try{Object.defineProperty(l,"name",{value:e})}catch{}Object.defineProperty(l,"adapterName",{value:e})}});const jb=l=>`- ${l}`,Mk=l=>G.isFunction(l)||l===null||l===!1;function Dk(l,e){l=G.isArray(l)?l:[l];const{length:t}=l;let i,s;const o={};for(let c=0;c<t;c++){i=l[c];let d;if(s=i,!Mk(i)&&(s=B0[(d=String(i)).toLowerCase()],s===void 0))throw new Me(`Unknown adapter '${d}'`);if(s&&(G.isFunction(s)||(s=s.get(e))))break;o[d||"#"+c]=s}if(!s){const c=Object.entries(o).map(([f,p])=>`adapter ${f} `+(p===!1?"is not supported by the environment":"is not available in the build"));let d=t?c.length>1?`since :
`+c.map(jb).join(`
`):" "+jb(c[0]):"as no adapter specified";throw new Me("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return s}const YS={getAdapter:Dk,adapters:B0};function ev(l){if(l.cancelToken&&l.cancelToken.throwIfRequested(),l.signal&&l.signal.aborted)throw new lf(null,l)}function zb(l){return ev(l),l.headers=Un.from(l.headers),l.data=Zy.call(l,l.transformRequest),["post","put","patch"].indexOf(l.method)!==-1&&l.headers.setContentType("application/x-www-form-urlencoded",!1),YS.getAdapter(l.adapter||af.adapter,l)(l).then(function(i){return ev(l),i.data=Zy.call(l,l.transformResponse,i),i.headers=Un.from(i.headers),i},function(i){return VS(i)||(ev(l),i&&i.response&&(i.response.data=Zy.call(l,l.transformResponse,i.response),i.response.headers=Un.from(i.response.headers))),Promise.reject(i)})}const QS="1.13.5",Gg={};["object","boolean","number","function","string","symbol"].forEach((l,e)=>{Gg[l]=function(i){return typeof i===l||"a"+(e<1?"n ":" ")+l}});const Bb={};Gg.transitional=function(e,t,i){function s(o,c){return"[Axios v"+QS+"] Transitional option '"+o+"'"+c+(i?". "+i:"")}return(o,c,d)=>{if(e===!1)throw new Me(s(c," has been removed"+(t?" in "+t:"")),Me.ERR_DEPRECATED);return t&&!Bb[c]&&(Bb[c]=!0,console.warn(s(c," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,c,d):!0}};Gg.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function Ik(l,e,t){if(typeof l!="object")throw new Me("options must be an object",Me.ERR_BAD_OPTION_VALUE);const i=Object.keys(l);let s=i.length;for(;s-- >0;){const o=i[s],c=e[o];if(c){const d=l[o],f=d===void 0||c(d,o,l);if(f!==!0)throw new Me("option "+o+" must be "+f,Me.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Me("Unknown option "+o,Me.ERR_BAD_OPTION)}}const Hp={assertOptions:Ik,validators:Gg},Si=Hp.validators;let sl=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Tb,response:new Tb}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{i.stack?o&&!String(i.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+o):i.stack=o}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=ol(this.defaults,t);const{transitional:i,paramsSerializer:s,headers:o}=t;i!==void 0&&Hp.assertOptions(i,{silentJSONParsing:Si.transitional(Si.boolean),forcedJSONParsing:Si.transitional(Si.boolean),clarifyTimeoutError:Si.transitional(Si.boolean),legacyInterceptorReqResOrdering:Si.transitional(Si.boolean)},!1),s!=null&&(G.isFunction(s)?t.paramsSerializer={serialize:s}:Hp.assertOptions(s,{encode:Si.function,serialize:Si.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Hp.assertOptions(t,{baseUrl:Si.spelling("baseURL"),withXsrfToken:Si.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let c=o&&G.merge(o.common,o[t.method]);o&&G.forEach(["delete","get","head","post","put","patch","common"],A=>{delete o[A]}),t.headers=Un.concat(c,o);const d=[];let f=!0;this.interceptors.request.forEach(function(k){if(typeof k.runWhen=="function"&&k.runWhen(t)===!1)return;f=f&&k.synchronous;const _=t.transitional||j0;_&&_.legacyInterceptorReqResOrdering?d.unshift(k.fulfilled,k.rejected):d.push(k.fulfilled,k.rejected)});const p=[];this.interceptors.response.forEach(function(k){p.push(k.fulfilled,k.rejected)});let g,y=0,w;if(!f){const A=[zb.bind(this),void 0];for(A.unshift(...d),A.push(...p),w=A.length,g=Promise.resolve(t);y<w;)g=g.then(A[y++],A[y++]);return g}w=d.length;let b=t;for(;y<w;){const A=d[y++],k=d[y++];try{b=A(b)}catch(_){k.call(this,_);break}}try{g=zb.call(this,b)}catch(A){return Promise.reject(A)}for(y=0,w=p.length;y<w;)g=g.then(p[y++],p[y++]);return g}getUri(e){e=ol(this.defaults,e);const t=GS(e.baseURL,e.url,e.allowAbsoluteUrls);return $S(t,e.params,e.paramsSerializer)}};G.forEach(["delete","get","head","options"],function(e){sl.prototype[e]=function(t,i){return this.request(ol(i||{},{method:e,url:t,data:(i||{}).data}))}});G.forEach(["post","put","patch"],function(e){function t(i){return function(o,c,d){return this.request(ol(d||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:o,data:c}))}}sl.prototype[e]=t(),sl.prototype[e+"Form"]=t(!0)});let Fk=class JS{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(o){t=o});const i=this;this.promise.then(s=>{if(!i._listeners)return;let o=i._listeners.length;for(;o-- >0;)i._listeners[o](s);i._listeners=null}),this.promise.then=s=>{let o;const c=new Promise(d=>{i.subscribe(d),o=d}).then(s);return c.cancel=function(){i.unsubscribe(o)},c},e(function(o,c,d){i.reason||(i.reason=new lf(o,c,d),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new JS(function(s){e=s}),cancel:e}}};function Ok(l){return function(t){return l.apply(null,t)}}function Nk(l){return G.isObject(l)&&l.isAxiosError===!0}const mv={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(mv).forEach(([l,e])=>{mv[e]=l});function ZS(l){const e=new sl(l),t=MS(sl.prototype.request,e);return G.extend(t,sl.prototype,e,{allOwnKeys:!0}),G.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return ZS(ol(l,s))},t}const Le=ZS(af);Le.Axios=sl;Le.CanceledError=lf;Le.CancelToken=Fk;Le.isCancel=VS;Le.VERSION=QS;Le.toFormData=qg;Le.AxiosError=Me;Le.Cancel=Le.CanceledError;Le.all=function(e){return Promise.all(e)};Le.spread=Ok;Le.isAxiosError=Nk;Le.mergeConfig=ol;Le.AxiosHeaders=Un;Le.formToJSON=l=>WS(G.isHTMLForm(l)?new FormData(l):l);Le.getAdapter=YS.getAdapter;Le.HttpStatusCode=mv;Le.default=Le;const{Axios:uM,AxiosError:dM,CanceledError:hM,isCancel:fM,CancelToken:pM,VERSION:gM,all:mM,Cancel:yM,isAxiosError:vM,spread:wM,toFormData:AM,AxiosHeaders:bM,HttpStatusCode:SM,formToJSON:EM,getAdapter:xM,mergeConfig:_M}=Le;function Hb(l,e){(e==null||e>l.length)&&(e=l.length);for(var t=0,i=Array(e);t<e;t++)i[t]=l[t];return i}function jk(l){if(Array.isArray(l))return l}function zk(l,e,t){return(e=qk(e))in l?Object.defineProperty(l,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):l[e]=t,l}function Bk(l,e){var t=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(t!=null){var i,s,o,c,d=[],f=!0,p=!1;try{if(o=(t=t.call(l)).next,e!==0)for(;!(f=(i=o.call(t)).done)&&(d.push(i.value),d.length!==e);f=!0);}catch(g){p=!0,s=g}finally{try{if(!f&&t.return!=null&&(c=t.return(),Object(c)!==c))return}finally{if(p)throw s}}return d}}function Hk(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ub(l,e){var t=Object.keys(l);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(l);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(l,s).enumerable})),t.push.apply(t,i)}return t}function $b(l){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ub(Object(t),!0).forEach(function(i){zk(l,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(t)):Ub(Object(t)).forEach(function(i){Object.defineProperty(l,i,Object.getOwnPropertyDescriptor(t,i))})}return l}function Uk(l,e){if(l==null)return{};var t,i,s=$k(l,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(l);for(i=0;i<o.length;i++)t=o[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(l,t)&&(s[t]=l[t])}return s}function $k(l,e){if(l==null)return{};var t={};for(var i in l)if({}.hasOwnProperty.call(l,i)){if(e.indexOf(i)!==-1)continue;t[i]=l[i]}return t}function Wk(l,e){return jk(l)||Bk(l,e)||Gk(l,e)||Hk()}function Vk(l,e){if(typeof l!="object"||!l)return l;var t=l[Symbol.toPrimitive];if(t!==void 0){var i=t.call(l,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(l)}function qk(l){var e=Vk(l,"string");return typeof e=="symbol"?e:e+""}function Gk(l,e){if(l){if(typeof l=="string")return Hb(l,e);var t={}.toString.call(l).slice(8,-1);return t==="Object"&&l.constructor&&(t=l.constructor.name),t==="Map"||t==="Set"?Array.from(l):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Hb(l,e):void 0}}function Xk(l,e,t){return e in l?Object.defineProperty(l,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):l[e]=t,l}function Wb(l,e){var t=Object.keys(l);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(l);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(l,s).enumerable})),t.push.apply(t,i)}return t}function Vb(l){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Wb(Object(t),!0).forEach(function(i){Xk(l,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(t)):Wb(Object(t)).forEach(function(i){Object.defineProperty(l,i,Object.getOwnPropertyDescriptor(t,i))})}return l}function Kk(){for(var l=arguments.length,e=new Array(l),t=0;t<l;t++)e[t]=arguments[t];return function(i){return e.reduceRight(function(s,o){return o(s)},i)}}function id(l){return function e(){for(var t=this,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return s.length>=l.length?l.apply(this,s):function(){for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];return e.apply(t,[].concat(s,d))}}}function gg(l){return{}.toString.call(l).includes("Object")}function Yk(l){return!Object.keys(l).length}function Ed(l){return typeof l=="function"}function Qk(l,e){return Object.prototype.hasOwnProperty.call(l,e)}function Jk(l,e){return gg(e)||So("changeType"),Object.keys(e).some(function(t){return!Qk(l,t)})&&So("changeField"),e}function Zk(l){Ed(l)||So("selectorType")}function eT(l){Ed(l)||gg(l)||So("handlerType"),gg(l)&&Object.values(l).some(function(e){return!Ed(e)})&&So("handlersType")}function tT(l){l||So("initialIsRequired"),gg(l)||So("initialType"),Yk(l)&&So("initialContent")}function nT(l,e){throw new Error(l[e]||l.default)}var iT={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},So=id(nT)(iT),Tp={changes:Jk,selector:Zk,handler:eT,initial:tT};function rT(l){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Tp.initial(l),Tp.handler(e);var t={current:l},i=id(aT)(t,e),s=id(oT)(t),o=id(Tp.changes)(l),c=id(sT)(t);function d(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(g){return g};return Tp.selector(p),p(t.current)}function f(p){Kk(i,s,o,c)(p)}return[d,f]}function sT(l,e){return Ed(e)?e(l.current):e}function oT(l,e){return l.current=Vb(Vb({},l.current),e),e}function aT(l,e,t){return Ed(e)?e(l.current):Object.keys(t).forEach(function(i){var s;return(s=e[i])===null||s===void 0?void 0:s.call(e,l.current[i])}),t}var lT={create:rT},cT={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function uT(l){return function e(){for(var t=this,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return s.length>=l.length?l.apply(this,s):function(){for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];return e.apply(t,[].concat(s,d))}}}function dT(l){return{}.toString.call(l).includes("Object")}function hT(l){return l||qb("configIsRequired"),dT(l)||qb("configType"),l.urls?(fT(),{paths:{vs:l.urls.monacoBase}}):l}function fT(){console.warn(eE.deprecation)}function pT(l,e){throw new Error(l[e]||l.default)}var eE={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},qb=uT(pT)(eE),gT={config:hT},mT=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(s){return t.reduceRight(function(o,c){return c(o)},s)}};function tE(l,e){return Object.keys(e).forEach(function(t){e[t]instanceof Object&&l[t]&&Object.assign(e[t],tE(l[t],e[t]))}),$b($b({},l),e)}var yT={type:"cancelation",msg:"operation is manually canceled"};function tv(l){var e=!1,t=new Promise(function(i,s){l.then(function(o){return e?s(yT):i(o)}),l.catch(s)});return t.cancel=function(){return e=!0},t}var vT=["monaco"],wT=lT.create({config:cT,isInitialized:!1,resolve:null,reject:null,monaco:null}),nE=Wk(wT,2),cf=nE[0],Xg=nE[1];function AT(l){var e=gT.config(l),t=e.monaco,i=Uk(e,vT);Xg(function(s){return{config:tE(s.config,i),monaco:t}})}function bT(){var l=cf(function(e){var t=e.monaco,i=e.isInitialized,s=e.resolve;return{monaco:t,isInitialized:i,resolve:s}});if(!l.isInitialized){if(Xg({isInitialized:!0}),l.monaco)return l.resolve(l.monaco),tv(nv);if(window.monaco&&window.monaco.editor)return iE(window.monaco),l.resolve(window.monaco),tv(nv);mT(ST,xT)(_T)}return tv(nv)}function ST(l){return document.body.appendChild(l)}function ET(l){var e=document.createElement("script");return l&&(e.src=l),e}function xT(l){var e=cf(function(i){var s=i.config,o=i.reject;return{config:s,reject:o}}),t=ET("".concat(e.config.paths.vs,"/loader.js"));return t.onload=function(){return l()},t.onerror=e.reject,t}function _T(){var l=cf(function(t){var i=t.config,s=t.resolve,o=t.reject;return{config:i,resolve:s,reject:o}}),e=window.require;e.config(l.config),e(["vs/editor/editor.main"],function(t){var i=t.m||t;iE(i),l.resolve(i)},function(t){l.reject(t)})}function iE(l){cf().monaco||Xg({monaco:l})}function CT(){return cf(function(l){var e=l.monaco;return e})}var nv=new Promise(function(l,e){return Xg({resolve:l,reject:e})}),rE={config:AT,init:bT,__getMonacoInstance:CT},kT={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},iv=kT,TT={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},RT=TT;function PT({children:l}){return rl.createElement("div",{style:RT.container},l)}var LT=PT,MT=LT;function DT({width:l,height:e,isEditorReady:t,loading:i,_ref:s,className:o,wrapperProps:c}){return rl.createElement("section",{style:{...iv.wrapper,width:l,height:e},...c},!t&&rl.createElement(MT,null,i),rl.createElement("div",{ref:s,style:{...iv.fullWidth,...!t&&iv.hide},className:o}))}var IT=DT,sE=H.memo(IT);function FT(l){H.useEffect(l,[])}var oE=FT;function OT(l,e,t=!0){let i=H.useRef(!0);H.useEffect(i.current||!t?()=>{i.current=!1}:l,e)}var ui=OT;function wd(){}function oc(l,e,t,i){return NT(l,i)||jT(l,e,t,i)}function NT(l,e){return l.editor.getModel(aE(l,e))}function jT(l,e,t,i){return l.editor.createModel(e,t,i?aE(l,i):void 0)}function aE(l,e){return l.Uri.parse(e)}function zT({original:l,modified:e,language:t,originalLanguage:i,modifiedLanguage:s,originalModelPath:o,modifiedModelPath:c,keepCurrentOriginalModel:d=!1,keepCurrentModifiedModel:f=!1,theme:p="light",loading:g="Loading...",options:y={},height:w="100%",width:b="100%",className:A,wrapperProps:k={},beforeMount:_=wd,onMount:R=wd}){let[D,j]=H.useState(!1),[z,B]=H.useState(!0),F=H.useRef(null),X=H.useRef(null),Y=H.useRef(null),Q=H.useRef(R),ne=H.useRef(_),oe=H.useRef(!1);oE(()=>{let ie=rE.init();return ie.then(re=>(X.current=re)&&B(!1)).catch(re=>(re==null?void 0:re.type)!=="cancelation"&&console.error("Monaco initialization: error:",re)),()=>F.current?de():ie.cancel()}),ui(()=>{if(F.current&&X.current){let ie=F.current.getOriginalEditor(),re=oc(X.current,l||"",i||t||"text",o||"");re!==ie.getModel()&&ie.setModel(re)}},[o],D),ui(()=>{if(F.current&&X.current){let ie=F.current.getModifiedEditor(),re=oc(X.current,e||"",s||t||"text",c||"");re!==ie.getModel()&&ie.setModel(re)}},[c],D),ui(()=>{let ie=F.current.getModifiedEditor();ie.getOption(X.current.editor.EditorOption.readOnly)?ie.setValue(e||""):e!==ie.getValue()&&(ie.executeEdits("",[{range:ie.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),ie.pushUndoStop())},[e],D),ui(()=>{var ie,re;(re=(ie=F.current)==null?void 0:ie.getModel())==null||re.original.setValue(l||"")},[l],D),ui(()=>{let{original:ie,modified:re}=F.current.getModel();X.current.editor.setModelLanguage(ie,i||t||"text"),X.current.editor.setModelLanguage(re,s||t||"text")},[t,i,s],D),ui(()=>{var ie;(ie=X.current)==null||ie.editor.setTheme(p)},[p],D),ui(()=>{var ie;(ie=F.current)==null||ie.updateOptions(y)},[y],D);let _e=H.useCallback(()=>{var Z;if(!X.current)return;ne.current(X.current);let ie=oc(X.current,l||"",i||t||"text",o||""),re=oc(X.current,e||"",s||t||"text",c||"");(Z=F.current)==null||Z.setModel({original:ie,modified:re})},[t,e,s,l,i,o,c]),ge=H.useCallback(()=>{var ie;!oe.current&&Y.current&&(F.current=X.current.editor.createDiffEditor(Y.current,{automaticLayout:!0,...y}),_e(),(ie=X.current)==null||ie.editor.setTheme(p),j(!0),oe.current=!0)},[y,p,_e]);H.useEffect(()=>{D&&Q.current(F.current,X.current)},[D]),H.useEffect(()=>{!z&&!D&&ge()},[z,D,ge]);function de(){var re,Z,q,ue;let ie=(re=F.current)==null?void 0:re.getModel();d||((Z=ie==null?void 0:ie.original)==null||Z.dispose()),f||((q=ie==null?void 0:ie.modified)==null||q.dispose()),(ue=F.current)==null||ue.dispose()}return rl.createElement(sE,{width:b,height:w,isEditorReady:D,loading:g,_ref:Y,className:A,wrapperProps:k})}var BT=zT;H.memo(BT);function HT(l){let e=H.useRef();return H.useEffect(()=>{e.current=l},[l]),e.current}var UT=HT,Rp=new Map;function $T({defaultValue:l,defaultLanguage:e,defaultPath:t,value:i,language:s,path:o,theme:c="light",line:d,loading:f="Loading...",options:p={},overrideServices:g={},saveViewState:y=!0,keepCurrentModel:w=!1,width:b="100%",height:A="100%",className:k,wrapperProps:_={},beforeMount:R=wd,onMount:D=wd,onChange:j,onValidate:z=wd}){let[B,F]=H.useState(!1),[X,Y]=H.useState(!0),Q=H.useRef(null),ne=H.useRef(null),oe=H.useRef(null),_e=H.useRef(D),ge=H.useRef(R),de=H.useRef(),ie=H.useRef(i),re=UT(o),Z=H.useRef(!1),q=H.useRef(!1);oE(()=>{let M=rE.init();return M.then($=>(Q.current=$)&&Y(!1)).catch($=>($==null?void 0:$.type)!=="cancelation"&&console.error("Monaco initialization: error:",$)),()=>ne.current?ae():M.cancel()}),ui(()=>{var $,le,me,Se;let M=oc(Q.current,l||i||"",e||s||"",o||t||"");M!==(($=ne.current)==null?void 0:$.getModel())&&(y&&Rp.set(re,(le=ne.current)==null?void 0:le.saveViewState()),(me=ne.current)==null||me.setModel(M),y&&((Se=ne.current)==null||Se.restoreViewState(Rp.get(o))))},[o],B),ui(()=>{var M;(M=ne.current)==null||M.updateOptions(p)},[p],B),ui(()=>{!ne.current||i===void 0||(ne.current.getOption(Q.current.editor.EditorOption.readOnly)?ne.current.setValue(i):i!==ne.current.getValue()&&(q.current=!0,ne.current.executeEdits("",[{range:ne.current.getModel().getFullModelRange(),text:i,forceMoveMarkers:!0}]),ne.current.pushUndoStop(),q.current=!1))},[i],B),ui(()=>{var $,le;let M=($=ne.current)==null?void 0:$.getModel();M&&s&&((le=Q.current)==null||le.editor.setModelLanguage(M,s))},[s],B),ui(()=>{var M;d!==void 0&&((M=ne.current)==null||M.revealLine(d))},[d],B),ui(()=>{var M;(M=Q.current)==null||M.editor.setTheme(c)},[c],B);let ue=H.useCallback(()=>{var M;if(!(!oe.current||!Q.current)&&!Z.current){ge.current(Q.current);let $=o||t,le=oc(Q.current,i||l||"",e||s||"",$||"");ne.current=(M=Q.current)==null?void 0:M.editor.create(oe.current,{model:le,automaticLayout:!0,...p},g),y&&ne.current.restoreViewState(Rp.get($)),Q.current.editor.setTheme(c),d!==void 0&&ne.current.revealLine(d),F(!0),Z.current=!0}},[l,e,t,i,s,o,p,g,y,c,d]);H.useEffect(()=>{B&&_e.current(ne.current,Q.current)},[B]),H.useEffect(()=>{!X&&!B&&ue()},[X,B,ue]),ie.current=i,H.useEffect(()=>{var M,$;B&&j&&((M=de.current)==null||M.dispose(),de.current=($=ne.current)==null?void 0:$.onDidChangeModelContent(le=>{q.current||j(ne.current.getValue(),le)}))},[B,j]),H.useEffect(()=>{if(B){let M=Q.current.editor.onDidChangeMarkers($=>{var me;let le=(me=ne.current.getModel())==null?void 0:me.uri;if(le&&$.find(Se=>Se.path===le.path)){let Se=Q.current.editor.getModelMarkers({resource:le});z==null||z(Se)}});return()=>{M==null||M.dispose()}}return()=>{}},[B,z]);function ae(){var M,$;(M=de.current)==null||M.dispose(),w?y&&Rp.set(o,ne.current.saveViewState()):($=ne.current.getModel())==null||$.dispose(),ne.current.dispose()}return rl.createElement(sE,{width:b,height:A,isEditorReady:B,loading:f,_ref:oe,className:k,wrapperProps:_})}var WT=$T,VT=H.memo(WT),qT=VT;const GT="modulepreload",XT=function(l){return"/agenda/"+l},Gb={},Pp=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){let c=function(p){return Promise.all(p.map(g=>Promise.resolve(g).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),f=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));s=c(t.map(p=>{if(p=XT(p),p in Gb)return;Gb[p]=!0;const g=p.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${y}`))return;const w=document.createElement("link");if(w.rel=g?"stylesheet":GT,g||(w.as="script"),w.crossOrigin="",w.href=p,f&&w.setAttribute("nonce",f),document.head.appendChild(w),g)return new Promise((b,A)=>{w.addEventListener("load",b),w.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return s.then(c=>{for(const d of c||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})};var Ad={};Ad.d=(l,e)=>{for(var t in e)Ad.o(e,t)&&!Ad.o(l,t)&&Object.defineProperty(l,t,{enumerable:!0,get:e[t]})};Ad.o=(l,e)=>Object.prototype.hasOwnProperty.call(l,e);var Fe=globalThis.pdfjsLib={};Ad.d(Fe,{AbortException:()=>pl,AnnotationEditorLayer:()=>C0,AnnotationEditorParamsType:()=>Ne,AnnotationEditorType:()=>Xe,AnnotationEditorUIManager:()=>ll,AnnotationLayer:()=>qP,AnnotationMode:()=>Zs,CMapCompressionType:()=>vv,ColorPicker:()=>Sg,DOMSVGFactory:()=>$0,DrawLayer:()=>P0,FeatureTest:()=>zn,GlobalWorkerOptions:()=>Es,ImageKind:()=>Up,InvalidPDFException:()=>cE,MissingPDFException:()=>fl,OPS:()=>Wi,Outliner:()=>a0,PDFDataRangeTransport:()=>rx,PDFDateString:()=>mE,PDFWorker:()=>cc,PasswordResponses:()=>JT,PermissionFlag:()=>QT,PixelsPerInch:()=>Eo,RenderingCancelledException:()=>W0,TextLayer:()=>Ag,UnexpectedResponseException:()=>Jg,Util:()=>Ee,VerbosityLevel:()=>Kg,XfaLayer:()=>ox,build:()=>CP,createValidAbsoluteUrl:()=>nR,fetchData:()=>im,getDocument:()=>yP,getFilenameFromUrl:()=>hR,getPdfFilenameFromUrl:()=>fR,getXfaPageViewport:()=>pR,isDataScheme:()=>V0,isPdfFile:()=>q0,noContextMenu:()=>$n,normalizeUnicode:()=>lR,renderTextLayer:()=>lP,setLayerDimensions:()=>al,shadow:()=>Qe,updateTextLayer:()=>cP,version:()=>_P});const yn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),lE=[1,0,0,1,0,0],yv=[.001,0,0,.001,0,0],KT=1e7,rv=1.35,Ti={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},Zs={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},YT="pdfjs_internal_editor_",Xe={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Ne={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},QT={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},dn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Up={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Ft={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Qu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Kg={ERRORS:0,WARNINGS:1,INFOS:5},vv={NONE:0,BINARY:1},Wi={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},JT={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Yg=Kg.WARNINGS;function ZT(l){Number.isInteger(l)&&(Yg=l)}function eR(){return Yg}function Qg(l){Yg>=Kg.INFOS&&console.log(`Info: ${l}`)}function $e(l){Yg>=Kg.WARNINGS&&console.log(`Warning: ${l}`)}function ot(l){throw new Error(l)}function Ht(l,e){l||ot(e)}function tR(l){switch(l==null?void 0:l.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function nR(l,e=null,t=null){if(!l)return null;try{if(t&&typeof l=="string"){if(t.addDefaultProtocol&&l.startsWith("www.")){const s=l.match(/\./g);(s==null?void 0:s.length)>=2&&(l=`http://${l}`)}if(t.tryConvertEncoding)try{l=aR(l)}catch{}}const i=e?new URL(l,e):new URL(l);if(tR(i))return i}catch{}return null}function Qe(l,e,t,i=!1){return Object.defineProperty(l,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}const Co=(function(){function e(t,i){this.constructor===e&&ot("Cannot initialize BaseException."),this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e})();class wv extends Co{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Av extends Co{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class cE extends Co{constructor(e){super(e,"InvalidPDFException")}}class fl extends Co{constructor(e){super(e,"MissingPDFException")}}class Jg extends Co{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class iR extends Co{constructor(e){super(e,"FormatError")}}class pl extends Co{constructor(e){super(e,"AbortException")}}function uE(l){(typeof l!="object"||(l==null?void 0:l.length)===void 0)&&ot("Invalid argument for bytesToString");const e=l.length,t=8192;if(e<t)return String.fromCharCode.apply(null,l);const i=[];for(let s=0;s<e;s+=t){const o=Math.min(s+t,e),c=l.subarray(s,o);i.push(String.fromCharCode.apply(null,c))}return i.join("")}function Zg(l){typeof l!="string"&&ot("Invalid argument for stringToBytes");const e=l.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=l.charCodeAt(i)&255;return t}function rR(l){return String.fromCharCode(l>>24&255,l>>16&255,l>>8&255,l&255)}function H0(l){const e=Object.create(null);for(const[t,i]of l)e[t]=i;return e}function sR(){const l=new Uint8Array(4);return l[0]=1,new Uint32Array(l.buffer,0,1)[0]===1}function oR(){try{return new Function(""),!0}catch{return!1}}class zn{static get isLittleEndian(){return Qe(this,"isLittleEndian",sR())}static get isEvalSupported(){return Qe(this,"isEvalSupported",oR())}static get isOffscreenCanvasSupported(){return Qe(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Qe(this,"platform",{isMac:navigator.platform.includes("Mac")}):Qe(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var e,t;return Qe(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const sv=Array.from(Array(256).keys(),l=>l.toString(16).padStart(2,"0"));var _s,$p,bv;class Ee{static makeHexColor(e,t,i){return`#${sv[e]}${sv[t]}${sv[i]}`}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const i=e[0]*t[0]+e[1]*t[2]+t[4],s=e[0]*t[1]+e[1]*t[3]+t[5];return[i,s]}static applyInverseTransform(e,t){const i=t[0]*t[3]-t[1]*t[2],s=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,o=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i;return[s,o]}static getAxialAlignedBoundingBox(e,t){const i=this.applyTransform(e,t),s=this.applyTransform(e.slice(2,4),t),o=this.applyTransform([e[0],e[3]],t),c=this.applyTransform([e[2],e[1]],t);return[Math.min(i[0],s[0],o[0],c[0]),Math.min(i[1],s[1],o[1],c[1]),Math.max(i[0],s[0],o[0],c[0]),Math.max(i[1],s[1],o[1],c[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],s=e[0]*t[1]+e[1]*t[3],o=e[2]*t[0]+e[3]*t[2],c=e[2]*t[1]+e[3]*t[3],d=(i+c)/2,f=Math.sqrt((i+c)**2-4*(i*c-o*s))/2,p=d+f||1,g=d-f||1;return[Math.sqrt(p),Math.sqrt(g)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>s)return null;const o=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),c=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return o>c?null:[i,o,s,c]}static bezierBoundingBox(e,t,i,s,o,c,d,f,p){return p?(p[0]=Math.min(p[0],e,d),p[1]=Math.min(p[1],t,f),p[2]=Math.max(p[2],e,d),p[3]=Math.max(p[3],t,f)):p=[Math.min(e,d),Math.min(t,f),Math.max(e,d),Math.max(t,f)],C(this,_s,bv).call(this,e,i,o,d,t,s,c,f,3*(-e+3*(i-o)+d),6*(e-2*i+o),3*(i-e),p),C(this,_s,bv).call(this,e,i,o,d,t,s,c,f,3*(-t+3*(s-c)+f),6*(t-2*s+c),3*(s-t),p),p}}_s=new WeakSet,$p=function(e,t,i,s,o,c,d,f,p,g){if(p<=0||p>=1)return;const y=1-p,w=p*p,b=w*p,A=y*(y*(y*e+3*p*t)+3*w*i)+b*s,k=y*(y*(y*o+3*p*c)+3*w*d)+b*f;g[0]=Math.min(g[0],A),g[1]=Math.min(g[1],k),g[2]=Math.max(g[2],A),g[3]=Math.max(g[3],k)},bv=function(e,t,i,s,o,c,d,f,p,g,y,w){if(Math.abs(p)<1e-12){Math.abs(g)>=1e-12&&C(this,_s,$p).call(this,e,t,i,s,o,c,d,f,-y/g,w);return}const b=g**2-4*y*p;if(b<0)return;const A=Math.sqrt(b),k=2*p;C(this,_s,$p).call(this,e,t,i,s,o,c,d,f,(-g+A)/k,w),C(this,_s,$p).call(this,e,t,i,s,o,c,d,f,(-g-A)/k,w)},T(Ee,_s);function aR(l){return decodeURIComponent(escape(l))}let ov=null,Xb=null;function lR(l){return ov||(ov=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Xb=new Map([["","t"]])),l.replaceAll(ov,(e,t,i)=>t?t.normalize("NFKC"):Xb.get(i))}function cR(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const l=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(l);else for(let e=0;e<32;e++)l[e]=Math.floor(Math.random()*255);return uE(l)}const dE="pdfjs_internal_id_",qr={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class em{constructor(){this.constructor===em&&ot("Cannot initialize BaseFilterFactory.")}addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,s,o){return"none"}destroy(e=!1){}}var _d;const J0=class J0{constructor({enableHWA:e=!1}={}){T(this,_d,!1);this.constructor===J0&&ot("Cannot initialize BaseCanvasFactory."),x(this,_d,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!u(this,_d)})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){ot("Abstract method `_createCanvas` called.")}};_d=new WeakMap;let mg=J0;class tm{constructor({baseUrl:e=null,isCompressed:t=!0}){this.constructor===tm&&ot("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":""),i=this.isCompressed?vv.BINARY:vv.NONE;return this._fetchData(t,i).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}_fetchData(e,t){ot("Abstract method `_fetchData` called.")}}class nm{constructor({baseUrl:e=null}){this.constructor===nm&&ot("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetchData(t).catch(i=>{throw new Error(`Unable to load font data at: ${t}`)})}_fetchData(e){ot("Abstract method `_fetchData` called.")}}class U0{constructor(){this.constructor===U0&&ot("Cannot initialize BaseSVGFactory.")}create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),i||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){ot("Abstract method `_createSVG` called.")}}const Xr="http://www.w3.org/2000/svg",oa=class oa{};ze(oa,"CSS",96),ze(oa,"PDF",72),ze(oa,"PDF_TO_CSS_UNITS",oa.CSS/oa.PDF);let Eo=oa;var ca,gr,Zr,On,xg,ua,we,hn,ec,tc,Wp,hE,Sv,nc,rd,sd,Ev,od;class uR extends em{constructor({docId:t,ownerDocument:i=globalThis.document}={}){super();T(this,we);T(this,ca);T(this,gr);T(this,Zr);T(this,On);T(this,xg);T(this,ua,0);x(this,Zr,t),x(this,On,i)}addFilter(t){if(!t)return"none";let i=u(this,we,hn).get(t);if(i)return i;const[s,o,c]=C(this,we,Wp).call(this,t),d=t.length===1?s:`${s}${o}${c}`;if(i=u(this,we,hn).get(d),i)return u(this,we,hn).set(t,i),i;const f=`g_${u(this,Zr)}_transfer_map_${Qn(this,ua)._++}`,p=`url(#${f})`;u(this,we,hn).set(t,p),u(this,we,hn).set(d,p);const g=C(this,we,nc).call(this,f);return C(this,we,sd).call(this,s,o,c,g),p}addHCMFilter(t,i){var A;const s=`${t}-${i}`,o="base";let c=u(this,we,ec).get(o);if((c==null?void 0:c.key)===s||(c?((A=c.filter)==null||A.remove(),c.key=s,c.url="none",c.filter=null):(c={key:s,url:"none",filter:null},u(this,we,ec).set(o,c)),!t||!i))return c.url;const d=C(this,we,od).call(this,t);t=Ee.makeHexColor(...d);const f=C(this,we,od).call(this,i);if(i=Ee.makeHexColor(...f),u(this,we,tc).style.color="",t==="#000000"&&i==="#ffffff"||t===i)return c.url;const p=new Array(256);for(let k=0;k<=255;k++){const _=k/255;p[k]=_<=.03928?_/12.92:((_+.055)/1.055)**2.4}const g=p.join(","),y=`g_${u(this,Zr)}_hcm_filter`,w=c.filter=C(this,we,nc).call(this,y);C(this,we,sd).call(this,g,g,g,w),C(this,we,Sv).call(this,w);const b=(k,_)=>{const R=d[k]/255,D=f[k]/255,j=new Array(_+1);for(let z=0;z<=_;z++)j[z]=R+z/_*(D-R);return j.join(",")};return C(this,we,sd).call(this,b(0,5),b(1,5),b(2,5),w),c.url=`url(#${y})`,c.url}addAlphaFilter(t){let i=u(this,we,hn).get(t);if(i)return i;const[s]=C(this,we,Wp).call(this,[t]),o=`alpha_${s}`;if(i=u(this,we,hn).get(o),i)return u(this,we,hn).set(t,i),i;const c=`g_${u(this,Zr)}_alpha_map_${Qn(this,ua)._++}`,d=`url(#${c})`;u(this,we,hn).set(t,d),u(this,we,hn).set(o,d);const f=C(this,we,nc).call(this,c);return C(this,we,Ev).call(this,s,f),d}addLuminosityFilter(t){let i=u(this,we,hn).get(t||"luminosity");if(i)return i;let s,o;if(t?([s]=C(this,we,Wp).call(this,[t]),o=`luminosity_${s}`):o="luminosity",i=u(this,we,hn).get(o),i)return u(this,we,hn).set(t,i),i;const c=`g_${u(this,Zr)}_luminosity_map_${Qn(this,ua)._++}`,d=`url(#${c})`;u(this,we,hn).set(t,d),u(this,we,hn).set(o,d);const f=C(this,we,nc).call(this,c);return C(this,we,hE).call(this,f),t&&C(this,we,Ev).call(this,s,f),d}addHighlightHCMFilter(t,i,s,o,c){var D;const d=`${i}-${s}-${o}-${c}`;let f=u(this,we,ec).get(t);if((f==null?void 0:f.key)===d||(f?((D=f.filter)==null||D.remove(),f.key=d,f.url="none",f.filter=null):(f={key:d,url:"none",filter:null},u(this,we,ec).set(t,f)),!i||!s))return f.url;const[p,g]=[i,s].map(C(this,we,od).bind(this));let y=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),w=Math.round(.2126*g[0]+.7152*g[1]+.0722*g[2]),[b,A]=[o,c].map(C(this,we,od).bind(this));w<y&&([y,w,b,A]=[w,y,A,b]),u(this,we,tc).style.color="";const k=(j,z,B)=>{const F=new Array(256),X=(w-y)/B,Y=j/255,Q=(z-j)/(255*B);let ne=0;for(let oe=0;oe<=B;oe++){const _e=Math.round(y+oe*X),ge=Y+oe*Q;for(let de=ne;de<=_e;de++)F[de]=ge;ne=_e+1}for(let oe=ne;oe<256;oe++)F[oe]=F[ne-1];return F.join(",")},_=`g_${u(this,Zr)}_hcm_${t}_filter`,R=f.filter=C(this,we,nc).call(this,_);return C(this,we,Sv).call(this,R),C(this,we,sd).call(this,k(b[0],A[0],5),k(b[1],A[1],5),k(b[2],A[2],5),R),f.url=`url(#${_})`,f.url}destroy(t=!1){t&&u(this,we,ec).size!==0||(u(this,gr)&&(u(this,gr).parentNode.parentNode.remove(),x(this,gr,null)),u(this,ca)&&(u(this,ca).clear(),x(this,ca,null)),x(this,ua,0))}}ca=new WeakMap,gr=new WeakMap,Zr=new WeakMap,On=new WeakMap,xg=new WeakMap,ua=new WeakMap,we=new WeakSet,hn=function(){return u(this,ca)||x(this,ca,new Map)},ec=function(){return u(this,xg)||x(this,xg,new Map)},tc=function(){if(!u(this,gr)){const t=u(this,On).createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=u(this,On).createElementNS(Xr,"svg");s.setAttribute("width",0),s.setAttribute("height",0),x(this,gr,u(this,On).createElementNS(Xr,"defs")),t.append(s),s.append(u(this,gr)),u(this,On).body.append(t)}return u(this,gr)},Wp=function(t){if(t.length===1){const p=t[0],g=new Array(256);for(let w=0;w<256;w++)g[w]=p[w]/255;const y=g.join(",");return[y,y,y]}const[i,s,o]=t,c=new Array(256),d=new Array(256),f=new Array(256);for(let p=0;p<256;p++)c[p]=i[p]/255,d[p]=s[p]/255,f[p]=o[p]/255;return[c.join(","),d.join(","),f.join(",")]},hE=function(t){const i=u(this,On).createElementNS(Xr,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)},Sv=function(t){const i=u(this,On).createElementNS(Xr,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)},nc=function(t){const i=u(this,On).createElementNS(Xr,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),u(this,we,tc).append(i),i},rd=function(t,i,s){const o=u(this,On).createElementNS(Xr,i);o.setAttribute("type","discrete"),o.setAttribute("tableValues",s),t.append(o)},sd=function(t,i,s,o){const c=u(this,On).createElementNS(Xr,"feComponentTransfer");o.append(c),C(this,we,rd).call(this,c,"feFuncR",t),C(this,we,rd).call(this,c,"feFuncG",i),C(this,we,rd).call(this,c,"feFuncB",s)},Ev=function(t,i){const s=u(this,On).createElementNS(Xr,"feComponentTransfer");i.append(s),C(this,we,rd).call(this,s,"feFuncA",t)},od=function(t){return u(this,we,tc).style.color=t,G0(getComputedStyle(u(this,we,tc)).getPropertyValue("color"))};class dR extends mg{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}={}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}}async function im(l,e="text"){if(ad(l,document.baseURI)){const t=await fetch(l);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{const s=new XMLHttpRequest;s.open("GET",l,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}i(new Error(s.statusText))}},s.send(null)})}class fE extends tm{_fetchData(e,t){return im(e,this.isCompressed?"arraybuffer":"text").then(i=>({cMapData:i instanceof ArrayBuffer?new Uint8Array(i):Zg(i),compressionType:t}))}}class pE extends nm{_fetchData(e){return im(e,"arraybuffer").then(t=>new Uint8Array(t))}}class $0 extends U0{_createSVG(e){return document.createElementNS(Xr,e)}}class uf{constructor({viewBox:e,scale:t,rotation:i,offsetX:s=0,offsetY:o=0,dontFlip:c=!1}){this.viewBox=e,this.scale=t,this.rotation=i,this.offsetX=s,this.offsetY=o;const d=(e[2]+e[0])/2,f=(e[3]+e[1])/2;let p,g,y,w;switch(i%=360,i<0&&(i+=360),i){case 180:p=-1,g=0,y=0,w=1;break;case 90:p=0,g=1,y=1,w=0;break;case 270:p=0,g=-1,y=-1,w=0;break;case 0:p=1,g=0,y=0,w=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(y=-y,w=-w);let b,A,k,_;p===0?(b=Math.abs(f-e[1])*t+s,A=Math.abs(d-e[0])*t+o,k=(e[3]-e[1])*t,_=(e[2]-e[0])*t):(b=Math.abs(d-e[0])*t+s,A=Math.abs(f-e[1])*t+o,k=(e[2]-e[0])*t,_=(e[3]-e[1])*t),this.transform=[p*t,g*t,y*t,w*t,b-p*t*d-y*t*f,A-g*t*d-w*t*f],this.width=k,this.height=_}get rawDims(){const{viewBox:e}=this;return Qe(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:s=this.offsetY,dontFlip:o=!1}={}){return new uf({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:i,offsetY:s,dontFlip:o})}convertToViewportPoint(e,t){return Ee.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=Ee.applyTransform([e[0],e[1]],this.transform),i=Ee.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return Ee.applyInverseTransform([e,t],this.transform)}}class W0 extends Co{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function V0(l){const e=l.length;let t=0;for(;t<e&&l[t].trim()==="";)t++;return l.substring(t,t+5).toLowerCase()==="data:"}function q0(l){return typeof l=="string"&&/\.pdf$/i.test(l)}function hR(l){return[l]=l.split(/[#?]/,1),l.substring(l.lastIndexOf("/")+1)}function fR(l,e="document.pdf"){if(typeof l!="string")return e;if(V0(l))return $e('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=t.exec(l);let o=i.exec(s[1])||i.exec(s[2])||i.exec(s[3]);if(o&&(o=o[0],o.includes("%")))try{o=i.exec(decodeURIComponent(o))[0]}catch{}return o||e}class Kb{constructor(){ze(this,"started",Object.create(null));ze(this,"times",[])}time(e){e in this.started&&$e(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||$e(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:s,end:o}of this.times)e.push(`${i.padEnd(t)} ${o-s}ms
`);return e.join("")}}function ad(l,e){try{const{protocol:t}=e?new URL(l,e):new URL(l);return t==="http:"||t==="https:"}catch{return!1}}function $n(l){l.preventDefault()}function gE(l){console.log("Deprecated API usage: "+l)}let Yb;class mE{static toDateObject(e){if(!e||typeof e!="string")return null;Yb||(Yb=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=Yb.exec(e);if(!t)return null;const i=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let o=parseInt(t[3],10);o=o>=1&&o<=31?o:1;let c=parseInt(t[4],10);c=c>=0&&c<=23?c:0;let d=parseInt(t[5],10);d=d>=0&&d<=59?d:0;let f=parseInt(t[6],10);f=f>=0&&f<=59?f:0;const p=t[7]||"Z";let g=parseInt(t[8],10);g=g>=0&&g<=23?g:0;let y=parseInt(t[9],10)||0;return y=y>=0&&y<=59?y:0,p==="-"?(c+=g,d+=y):p==="+"&&(c-=g,d-=y),new Date(Date.UTC(i,s,o,c,d,f))}}function pR(l,{scale:e=1,rotation:t=0}){const{width:i,height:s}=l.attributes.style,o=[0,0,parseInt(i),parseInt(s)];return new uf({viewBox:o,scale:e,rotation:t})}function G0(l){if(l.startsWith("#")){const e=parseInt(l.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return l.startsWith("rgb(")?l.slice(4,-1).split(",").map(e=>parseInt(e)):l.startsWith("rgba(")?l.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):($e(`Not a valid color format: "${l}"`),[0,0,0])}function gR(l){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of l.keys()){e.style.color=t;const i=window.getComputedStyle(e).color;l.set(t,G0(i))}e.remove()}function bt(l){const{a:e,b:t,c:i,d:s,e:o,f:c}=l.getTransform();return[e,t,i,s,o,c]}function Gr(l){const{a:e,b:t,c:i,d:s,e:o,f:c}=l.getTransform().invertSelf();return[e,t,i,s,o,c]}function al(l,e,t=!1,i=!0){if(e instanceof uf){const{pageWidth:s,pageHeight:o}=e.rawDims,{style:c}=l,d=zn.isCSSRoundSupported,f=`var(--scale-factor) * ${s}px`,p=`var(--scale-factor) * ${o}px`,g=d?`round(${f}, 1px)`:`calc(${f})`,y=d?`round(${p}, 1px)`:`calc(${p})`;!t||e.rotation%180===0?(c.width=g,c.height=y):(c.width=y,c.height=g)}i&&l.setAttribute("data-main-rotation",e.rotation)}var da,ha,ni,fa,_g,yE,_n,vE,wE,Vp,AE,_v;const Cg=class Cg{constructor(e){T(this,_n);T(this,da,null);T(this,ha,null);T(this,ni);T(this,fa,null);x(this,ni,e)}render(){const e=x(this,da,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=u(this,ni)._uiManager._signal;e.addEventListener("contextmenu",$n,{signal:t}),e.addEventListener("pointerdown",C(Cg,_g,yE),{signal:t});const i=x(this,fa,document.createElement("div"));i.className="buttons",e.append(i);const s=u(this,ni).toolbarPosition;if(s){const{style:o}=e,c=u(this,ni)._uiManager.direction==="ltr"?1-s[0]:s[0];o.insetInlineEnd=`${100*c}%`,o.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return C(this,_n,AE).call(this),e}hide(){var e;u(this,da).classList.add("hidden"),(e=u(this,ha))==null||e.hideDropdown()}show(){u(this,da).classList.remove("hidden")}addAltTextButton(e){C(this,_n,Vp).call(this,e),u(this,fa).prepend(e,u(this,_n,_v))}addColorPicker(e){x(this,ha,e);const t=e.renderButton();C(this,_n,Vp).call(this,t),u(this,fa).prepend(t,u(this,_n,_v))}remove(){var e;u(this,da).remove(),(e=u(this,ha))==null||e.destroy(),x(this,ha,null)}};da=new WeakMap,ha=new WeakMap,ni=new WeakMap,fa=new WeakMap,_g=new WeakSet,yE=function(e){e.stopPropagation()},_n=new WeakSet,vE=function(e){u(this,ni)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},wE=function(e){u(this,ni)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},Vp=function(e){const t=u(this,ni)._uiManager._signal;e.addEventListener("focusin",C(this,_n,vE).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",C(this,_n,wE).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",$n,{signal:t})},AE=function(){const e=document.createElement("button");e.className="delete",e.tabIndex=0,e.setAttribute("data-l10n-id",`pdfjs-editor-remove-${u(this,ni).editorType}-button`),C(this,_n,Vp).call(this,e),e.addEventListener("click",t=>{u(this,ni)._uiManager.delete()},{signal:u(this,ni)._uiManager._signal}),u(this,fa).append(e)},_v=function(){const e=document.createElement("div");return e.className="divider",e},T(Cg,_g);let xv=Cg;var Cd,pa,ga,xo,bE,SE,EE;class mR{constructor(e){T(this,xo);T(this,Cd,null);T(this,pa,null);T(this,ga);x(this,ga,e)}show(e,t,i){const[s,o]=C(this,xo,SE).call(this,t,i),{style:c}=u(this,pa)||x(this,pa,C(this,xo,bE).call(this));e.append(u(this,pa)),c.insetInlineEnd=`${100*s}%`,c.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){u(this,pa).remove()}}Cd=new WeakMap,pa=new WeakMap,ga=new WeakMap,xo=new WeakSet,bE=function(){const e=x(this,pa,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",$n,{signal:u(this,ga)._signal});const t=x(this,Cd,document.createElement("div"));return t.className="buttons",e.append(t),C(this,xo,EE).call(this),e},SE=function(e,t){let i=0,s=0;for(const o of e){const c=o.y+o.height;if(c<i)continue;const d=o.x+(t?o.width:0);if(c>i){s=d,i=c;continue}t?d>s&&(s=d):d<s&&(s=d)}return[t?1-s:s,i]},EE=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=u(this,ga)._signal;e.addEventListener("contextmenu",$n,{signal:i}),e.addEventListener("click",()=>{u(this,ga).highlightSelection("floating_button")},{signal:i}),u(this,Cd).append(e)};function yg(l,e,t){for(const i of t)e.addEventListener(i,l[i].bind(l))}function yR(l){return Math.round(Math.min(255,Math.max(1,255*l))).toString(16).padStart(2,"0")}var kg;class vR{constructor(){T(this,kg,0)}get id(){return`${YT}${Qn(this,kg)._++}`}}kg=new WeakMap;var kd,Tg,xi,Td,kv;const Z0=class Z0{constructor(){T(this,Td);T(this,kd,cR());T(this,Tg,0);T(this,xi,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const o=s.decode().then(()=>(i.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return Qe(this,"_isSVGFittingCanvas",o)}async getFromFile(e){const{lastModified:t,name:i,size:s,type:o}=e;return C(this,Td,kv).call(this,`${t}_${i}_${s}_${o}`,e)}async getFromUrl(e){return C(this,Td,kv).call(this,e,e)}async getFromId(e){u(this,xi)||x(this,xi,new Map);const t=u(this,xi).get(e);return t?t.bitmap?(t.refCounter+=1,t):t.file?this.getFromFile(t.file):this.getFromUrl(t.url):null}getSvgUrl(e){const t=u(this,xi).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){u(this,xi)||x(this,xi,new Map);const t=u(this,xi).get(e);t&&(t.refCounter-=1,t.refCounter===0&&(t.bitmap=null))}isValidId(e){return e.startsWith(`image_${u(this,kd)}_`)}};kd=new WeakMap,Tg=new WeakMap,xi=new WeakMap,Td=new WeakSet,kv=async function(e,t){u(this,xi)||x(this,xi,new Map);let i=u(this,xi).get(e);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${u(this,kd)}_${Qn(this,Tg)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(i.url=t,s=await im(t,"blob")):s=i.file=t,s.type==="image/svg+xml"){const o=Z0._isSVGFittingCanvas,c=new FileReader,d=new Image,f=new Promise((p,g)=>{d.onload=()=>{i.bitmap=d,i.isSvg=!0,p()},c.onload=async()=>{const y=i.svgUrl=c.result;d.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},d.onerror=c.onerror=g});c.readAsDataURL(s),await f}else i.bitmap=await createImageBitmap(s);i.refCounter=1}catch(s){console.error(s),i=null}return u(this,xi).set(e,i),i&&u(this,xi).set(i.id,i),i};let Cv=Z0;var qt,eo,Rd,Gt;class wR{constructor(e=128){T(this,qt,[]);T(this,eo,!1);T(this,Rd);T(this,Gt,-1);x(this,Rd,e)}add({cmd:e,undo:t,post:i,mustExec:s,type:o=NaN,overwriteIfSameType:c=!1,keepUndo:d=!1}){if(s&&e(),u(this,eo))return;const f={cmd:e,undo:t,post:i,type:o};if(u(this,Gt)===-1){u(this,qt).length>0&&(u(this,qt).length=0),x(this,Gt,0),u(this,qt).push(f);return}if(c&&u(this,qt)[u(this,Gt)].type===o){d&&(f.undo=u(this,qt)[u(this,Gt)].undo),u(this,qt)[u(this,Gt)]=f;return}const p=u(this,Gt)+1;p===u(this,Rd)?u(this,qt).splice(0,1):(x(this,Gt,p),p<u(this,qt).length&&u(this,qt).splice(p)),u(this,qt).push(f)}undo(){if(u(this,Gt)===-1)return;x(this,eo,!0);const{undo:e,post:t}=u(this,qt)[u(this,Gt)];e(),t==null||t(),x(this,eo,!1),x(this,Gt,u(this,Gt)-1)}redo(){if(u(this,Gt)<u(this,qt).length-1){x(this,Gt,u(this,Gt)+1),x(this,eo,!0);const{cmd:e,post:t}=u(this,qt)[u(this,Gt)];e(),t==null||t(),x(this,eo,!1)}}hasSomethingToUndo(){return u(this,Gt)!==-1}hasSomethingToRedo(){return u(this,Gt)<u(this,qt).length-1}destroy(){x(this,qt,null)}}qt=new WeakMap,eo=new WeakMap,Rd=new WeakMap,Gt=new WeakMap;var Rg,xE;class df{constructor(e){T(this,Rg);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=zn.platform;for(const[i,s,o={}]of e)for(const c of i){const d=c.startsWith("mac+");t&&d?(this.callbacks.set(c.slice(4),{callback:s,options:o}),this.allKeys.add(c.split("+").at(-1))):!t&&!d&&(this.callbacks.set(c,{callback:s,options:o}),this.allKeys.add(c.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(C(this,Rg,xE).call(this,t));if(!i)return;const{callback:s,options:{bubbles:o=!1,args:c=[],checker:d=null}}=i;d&&!d(e,t)||(s.bind(e,...c,t)(),o||(t.stopPropagation(),t.preventDefault()))}}Rg=new WeakSet,xE=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Pg=class Pg{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return gR(e),Qe(this,"_colors",e)}convert(e){const t=G0(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,s]of this._colors)if(s.every((o,c)=>o===t[c]))return Pg._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?Ee.makeHexColor(...t):e}};ze(Pg,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Tv=Pg;var hc,ii,Ot,Zt,fc,es,pc,Vi,gc,ma,mr,qi,ya,Pd,Ld,yr,mc,to,vr,Lg,no,Md,va,Dd,yc,en,it,ts,wa,Id,Fd,Od,Nd,jd,zd,Bd,Hd,Ud,$d,Wd,Vd,qd,io,wr,ns,Gd,he,qp,_E,CE,Gp,kE,TE,RE,Rv,PE,Pv,Lv,LE,bn,Ys,ME,DE,Mv,IE,ld,Dv;const ac=class ac{constructor(e,t,i,s,o,c,d,f,p){T(this,he);T(this,hc,new AbortController);T(this,ii,null);T(this,Ot,new Map);T(this,Zt,new Map);T(this,fc,null);T(this,es,null);T(this,pc,null);T(this,Vi,new wR);T(this,gc,0);T(this,ma,new Set);T(this,mr,null);T(this,qi,null);T(this,ya,new Set);T(this,Pd,!1);T(this,Ld,null);T(this,yr,null);T(this,mc,null);T(this,to,!1);T(this,vr,null);T(this,Lg,new vR);T(this,no,!1);T(this,Md,!1);T(this,va,null);T(this,Dd,null);T(this,yc,null);T(this,en,Xe.NONE);T(this,it,new Set);T(this,ts,null);T(this,wa,null);T(this,Id,null);T(this,Fd,this.blur.bind(this));T(this,Od,this.focus.bind(this));T(this,Nd,this.copy.bind(this));T(this,jd,this.cut.bind(this));T(this,zd,this.paste.bind(this));T(this,Bd,this.keydown.bind(this));T(this,Hd,this.keyup.bind(this));T(this,Ud,this.onEditingAction.bind(this));T(this,$d,this.onPageChanging.bind(this));T(this,Wd,this.onScaleChanging.bind(this));T(this,Vd,this.onRotationChanging.bind(this));T(this,qd,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});T(this,io,[0,0]);T(this,wr,null);T(this,ns,null);T(this,Gd,null);this._signal=u(this,hc).signal,x(this,ns,e),x(this,Gd,t),x(this,fc,i),this._eventBus=s,this._eventBus._on("editingaction",u(this,Ud)),this._eventBus._on("pagechanging",u(this,$d)),this._eventBus._on("scalechanging",u(this,Wd)),this._eventBus._on("rotationchanging",u(this,Vd)),C(this,he,kE).call(this),C(this,he,LE).call(this),C(this,he,Rv).call(this),x(this,es,o.annotationStorage),x(this,Ld,o.filterFactory),x(this,wa,c),x(this,mc,d||null),x(this,Pd,f),x(this,yc,p||null),this.viewParameters={realScale:Eo.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=ac.prototype,t=c=>u(c,ns).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),i=(c,{target:d})=>{if(d instanceof HTMLInputElement){const{type:f}=d;return f!=="text"&&f!=="number"}return!0},s=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Qe(this,"_keyboardManager",new df([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(c,{target:d})=>!(d instanceof HTMLButtonElement)&&u(c,ns).contains(d)&&!c.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(c,{target:d})=>!(d instanceof HTMLButtonElement)&&u(c,ns).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-o,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[o,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-o],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,o],checker:t}]]))}destroy(){var e,t,i;(e=u(this,hc))==null||e.abort(),x(this,hc,null),this._signal=null,this._eventBus._off("editingaction",u(this,Ud)),this._eventBus._off("pagechanging",u(this,$d)),this._eventBus._off("scalechanging",u(this,Wd)),this._eventBus._off("rotationchanging",u(this,Vd));for(const s of u(this,Zt).values())s.destroy();u(this,Zt).clear(),u(this,Ot).clear(),u(this,ya).clear(),x(this,ii,null),u(this,it).clear(),u(this,Vi).destroy(),(t=u(this,fc))==null||t.destroy(),(i=u(this,vr))==null||i.hide(),x(this,vr,null),u(this,yr)&&(clearTimeout(u(this,yr)),x(this,yr,null)),u(this,wr)&&(clearTimeout(u(this,wr)),x(this,wr,null))}async mlGuess(e){var t;return((t=u(this,yc))==null?void 0:t.guess(e))||null}get hasMLManager(){return!!u(this,yc)}get hcmFilter(){return Qe(this,"hcmFilter",u(this,wa)?u(this,Ld).addHCMFilter(u(this,wa).foreground,u(this,wa).background):"none")}get direction(){return Qe(this,"direction",getComputedStyle(u(this,ns)).direction)}get highlightColors(){return Qe(this,"highlightColors",u(this,mc)?new Map(u(this,mc).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return Qe(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){x(this,Dd,e)}editAltText(e){var t;(t=u(this,fc))==null||t.editAltText(this,e)}onPageChanging({pageNumber:e}){x(this,gc,e-1)}focusMainContainer(){u(this,ns).focus()}findParent(e,t){for(const i of u(this,Zt).values()){const{x:s,y:o,width:c,height:d}=i.div.getBoundingClientRect();if(e>=s&&e<=s+c&&t>=o&&t<=o+d)return i}return null}disableUserSelect(e=!1){u(this,Gd).classList.toggle("noUserSelect",e)}addShouldRescale(e){u(this,ya).add(e)}removeShouldRescale(e){u(this,ya).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Eo.PDF_TO_CSS_UNITS;for(const t of u(this,ya))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:o,focusOffset:c}=t,d=t.toString(),p=C(this,he,qp).call(this,t).closest(".textLayer"),g=this.getSelectionBoxes(p);if(g){t.empty(),u(this,en)===Xe.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:Xe.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const y of u(this,Zt).values())if(y.hasTextLayer(p)){y.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:g,anchorNode:i,anchorOffset:s,focusNode:o,focusOffset:c,text:d});break}}}addToAnnotationStorage(e){!e.isEmpty()&&u(this,es)&&!u(this,es).has(e.id)&&u(this,es).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,u(this,to)&&(x(this,to,!1),C(this,he,Gp).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of u(this,it))if(t.div.contains(e)){x(this,va,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!u(this,va))return;const[e,t]=u(this,va);x(this,va,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){C(this,he,Rv).call(this),C(this,he,Pv).call(this)}removeEditListeners(){C(this,he,PE).call(this),C(this,he,Lv).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const i of u(this,qi))if(i.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const i of u(this,qi))if(i.isHandlingMimeForPasting(t.type)){i.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var i;if(e.preventDefault(),(i=u(this,ii))==null||i.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of u(this,it)){const o=s.serialize(!0);o&&t.push(o)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:t}=e;for(const o of t.items)for(const c of u(this,qi))if(c.isHandlingMimeForPasting(o.type)){c.paste(o,this.currentLayer);return}let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(o){$e(`paste: "${o.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const s=this.currentLayer;try{const o=[];for(const f of i){const p=s.deserialize(f);if(!p)return;o.push(p)}const c=()=>{for(const f of o)C(this,he,Mv).call(this,f);C(this,he,Dv).call(this,o)},d=()=>{for(const f of o)f.remove()};this.addCommands({cmd:c,undo:d,mustExec:!0})}catch(o){$e(`paste: "${o.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),u(this,en)!==Xe.NONE&&!this.isEditorHandlingKeyboard&&ac._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,u(this,to)&&(x(this,to,!1),C(this,he,Gp).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(C(this,he,TE).call(this),C(this,he,Pv).call(this),C(this,he,bn).call(this,{isEditing:u(this,en)!==Xe.NONE,isEmpty:C(this,he,ld).call(this),hasSomethingToUndo:u(this,Vi).hasSomethingToUndo(),hasSomethingToRedo:u(this,Vi).hasSomethingToRedo(),hasSelectedEditor:!1})):(C(this,he,RE).call(this),C(this,he,Lv).call(this),C(this,he,bn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!u(this,qi)){x(this,qi,e);for(const t of u(this,qi))C(this,he,Ys).call(this,t.defaultPropertiesToUpdate)}}getId(){return u(this,Lg).id}get currentLayer(){return u(this,Zt).get(u(this,gc))}getLayer(e){return u(this,Zt).get(e)}get currentPageIndex(){return u(this,gc)}addLayer(e){u(this,Zt).set(e.pageIndex,e),u(this,no)?e.enable():e.disable()}removeLayer(e){u(this,Zt).delete(e.pageIndex)}updateMode(e,t=null,i=!1){if(u(this,en)!==e){if(x(this,en,e),e===Xe.NONE){this.setEditingState(!1),C(this,he,DE).call(this);return}this.setEditingState(!0),C(this,he,ME).call(this),this.unselectAll();for(const s of u(this,Zt).values())s.updateMode(e);if(!t&&i){this.addNewEditorFromKeyboard();return}if(t){for(const s of u(this,Ot).values())if(s.annotationElementId===t){this.setSelected(s),s.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==u(this,en)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var i;if(u(this,qi)){switch(e){case Ne.CREATE:this.currentLayer.addNewEditor();return;case Ne.HIGHLIGHT_DEFAULT_COLOR:(i=u(this,Dd))==null||i.updateColor(t);break;case Ne.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(u(this,Id)||x(this,Id,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const s of u(this,it))s.updateParams(e,t);for(const s of u(this,qi))s.updateDefaultParams(e,t)}}showAllEditors(e,t,i=!1){var o;for(const c of u(this,Ot).values())c.editorType===e&&c.show(t);(((o=u(this,Id))==null?void 0:o.get(Ne.HIGHLIGHT_SHOW_ALL))??!0)!==t&&C(this,he,Ys).call(this,[[Ne.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(u(this,Md)!==e){x(this,Md,e);for(const t of u(this,Zt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const i of u(this,Ot).values())i.pageIndex===e&&t.push(i);return t}getEditor(e){return u(this,Ot).get(e)}addEditor(e){u(this,Ot).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(u(this,yr)&&clearTimeout(u(this,yr)),x(this,yr,setTimeout(()=>{this.focusMainContainer(),x(this,yr,null)},0))),u(this,Ot).delete(e.id),this.unselect(e),(!e.annotationElementId||!u(this,ma).has(e.annotationElementId))&&((t=u(this,es))==null||t.remove(e.id))}addDeletedAnnotationElement(e){u(this,ma).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return u(this,ma).has(e)}removeDeletedAnnotationElement(e){u(this,ma).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){u(this,ii)!==e&&(x(this,ii,e),e&&C(this,he,Ys).call(this,e.propertiesToUpdate))}updateUI(e){u(this,he,IE)===e&&C(this,he,Ys).call(this,e.propertiesToUpdate)}toggleSelected(e){if(u(this,it).has(e)){u(this,it).delete(e),e.unselect(),C(this,he,bn).call(this,{hasSelectedEditor:this.hasSelection});return}u(this,it).add(e),e.select(),C(this,he,Ys).call(this,e.propertiesToUpdate),C(this,he,bn).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of u(this,it))t!==e&&t.unselect();u(this,it).clear(),u(this,it).add(e),e.select(),C(this,he,Ys).call(this,e.propertiesToUpdate),C(this,he,bn).call(this,{hasSelectedEditor:!0})}isSelected(e){return u(this,it).has(e)}get firstSelectedEditor(){return u(this,it).values().next().value}unselect(e){e.unselect(),u(this,it).delete(e),C(this,he,bn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return u(this,it).size!==0}get isEnterHandled(){return u(this,it).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){u(this,Vi).undo(),C(this,he,bn).call(this,{hasSomethingToUndo:u(this,Vi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:C(this,he,ld).call(this)})}redo(){u(this,Vi).redo(),C(this,he,bn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:u(this,Vi).hasSomethingToRedo(),isEmpty:C(this,he,ld).call(this)})}addCommands(e){u(this,Vi).add(e),C(this,he,bn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:C(this,he,ld).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...u(this,it)],t=()=>{for(const s of e)s.remove()},i=()=>{for(const s of e)C(this,he,Mv).call(this,s)};this.addCommands({cmd:t,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=u(this,ii))==null||e.commitOrRemove()}hasSomethingToControl(){return u(this,ii)||this.hasSelection}selectAll(){for(const e of u(this,it))e.commit();C(this,he,Dv).call(this,u(this,Ot).values())}unselectAll(){if(!(u(this,ii)&&(u(this,ii).commitOrRemove(),u(this,en)!==Xe.NONE))&&this.hasSelection){for(const e of u(this,it))e.unselect();u(this,it).clear(),C(this,he,bn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;u(this,io)[0]+=e,u(this,io)[1]+=t;const[s,o]=u(this,io),c=[...u(this,it)],d=1e3;u(this,wr)&&clearTimeout(u(this,wr)),x(this,wr,setTimeout(()=>{x(this,wr,null),u(this,io)[0]=u(this,io)[1]=0,this.addCommands({cmd:()=>{for(const f of c)u(this,Ot).has(f.id)&&f.translateInPage(s,o)},undo:()=>{for(const f of c)u(this,Ot).has(f.id)&&f.translateInPage(-s,-o)},mustExec:!1})},d));for(const f of c)f.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),x(this,mr,new Map);for(const e of u(this,it))u(this,mr).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!u(this,mr))return!1;this.disableUserSelect(!1);const e=u(this,mr);x(this,mr,null);let t=!1;for(const[{x:s,y:o,pageIndex:c},d]of e)d.newX=s,d.newY=o,d.newPageIndex=c,t||(t=s!==d.savedX||o!==d.savedY||c!==d.savedPageIndex);if(!t)return!1;const i=(s,o,c,d)=>{if(u(this,Ot).has(s.id)){const f=u(this,Zt).get(d);f?s._setParentAndPosition(f,o,c):(s.pageIndex=d,s.x=o,s.y=c)}};return this.addCommands({cmd:()=>{for(const[s,{newX:o,newY:c,newPageIndex:d}]of e)i(s,o,c,d)},undo:()=>{for(const[s,{savedX:o,savedY:c,savedPageIndex:d}]of e)i(s,o,c,d)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(u(this,mr))for(const i of u(this,mr).keys())i.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||u(this,it).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return u(this,ii)===e}getActive(){return u(this,ii)}getMode(){return u(this,en)}get imageManager(){return Qe(this,"imageManager",new Cv)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let p=0,g=t.rangeCount;p<g;p++)if(!e.contains(t.getRangeAt(p).commonAncestorContainer))return null;const{x:i,y:s,width:o,height:c}=e.getBoundingClientRect();let d;switch(e.getAttribute("data-main-rotation")){case"90":d=(p,g,y,w)=>({x:(g-s)/c,y:1-(p+y-i)/o,width:w/c,height:y/o});break;case"180":d=(p,g,y,w)=>({x:1-(p+y-i)/o,y:1-(g+w-s)/c,width:y/o,height:w/c});break;case"270":d=(p,g,y,w)=>({x:1-(g+w-s)/c,y:(p-i)/o,width:w/c,height:y/o});break;default:d=(p,g,y,w)=>({x:(p-i)/o,y:(g-s)/c,width:y/o,height:w/c});break}const f=[];for(let p=0,g=t.rangeCount;p<g;p++){const y=t.getRangeAt(p);if(!y.collapsed)for(const{x:w,y:b,width:A,height:k}of y.getClientRects())A===0||k===0||f.push(d(w,b,A,k))}return f.length===0?null:f}addChangedExistingAnnotation({annotationElementId:e,id:t}){(u(this,pc)||x(this,pc,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=u(this,pc))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=u(this,pc))==null?void 0:s.get(e.data.id);if(!t)return;const i=u(this,es).getRawValue(t);i&&(u(this,en)===Xe.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}};hc=new WeakMap,ii=new WeakMap,Ot=new WeakMap,Zt=new WeakMap,fc=new WeakMap,es=new WeakMap,pc=new WeakMap,Vi=new WeakMap,gc=new WeakMap,ma=new WeakMap,mr=new WeakMap,qi=new WeakMap,ya=new WeakMap,Pd=new WeakMap,Ld=new WeakMap,yr=new WeakMap,mc=new WeakMap,to=new WeakMap,vr=new WeakMap,Lg=new WeakMap,no=new WeakMap,Md=new WeakMap,va=new WeakMap,Dd=new WeakMap,yc=new WeakMap,en=new WeakMap,it=new WeakMap,ts=new WeakMap,wa=new WeakMap,Id=new WeakMap,Fd=new WeakMap,Od=new WeakMap,Nd=new WeakMap,jd=new WeakMap,zd=new WeakMap,Bd=new WeakMap,Hd=new WeakMap,Ud=new WeakMap,$d=new WeakMap,Wd=new WeakMap,Vd=new WeakMap,qd=new WeakMap,io=new WeakMap,wr=new WeakMap,ns=new WeakMap,Gd=new WeakMap,he=new WeakSet,qp=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},_E=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const i=C(this,he,qp).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(i);s&&(u(this,vr)||x(this,vr,new mR(this)),u(this,vr).show(i,s,this.direction==="ltr"))},CE=function(){var o,c,d;const e=document.getSelection();if(!e||e.isCollapsed){u(this,ts)&&((o=u(this,vr))==null||o.hide(),x(this,ts,null),C(this,he,bn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===u(this,ts))return;if(!C(this,he,qp).call(this,e).closest(".textLayer")){u(this,ts)&&((c=u(this,vr))==null||c.hide(),x(this,ts,null),C(this,he,bn).call(this,{hasSelectedText:!1}));return}if((d=u(this,vr))==null||d.hide(),x(this,ts,t),C(this,he,bn).call(this,{hasSelectedText:!0}),!(u(this,en)!==Xe.HIGHLIGHT&&u(this,en)!==Xe.NONE)&&(u(this,en)===Xe.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),x(this,to,this.isShiftKeyDown),!this.isShiftKeyDown)){const f=this._signal,p=g=>{g.type==="pointerup"&&g.button!==0||(window.removeEventListener("pointerup",p),window.removeEventListener("blur",p),g.type==="pointerup"&&C(this,he,Gp).call(this,"main_toolbar"))};window.addEventListener("pointerup",p,{signal:f}),window.addEventListener("blur",p,{signal:f})}},Gp=function(e=""){u(this,en)===Xe.HIGHLIGHT?this.highlightSelection(e):u(this,Pd)&&C(this,he,_E).call(this)},kE=function(){document.addEventListener("selectionchange",C(this,he,CE).bind(this),{signal:this._signal})},TE=function(){const e=this._signal;window.addEventListener("focus",u(this,Od),{signal:e}),window.addEventListener("blur",u(this,Fd),{signal:e})},RE=function(){window.removeEventListener("focus",u(this,Od)),window.removeEventListener("blur",u(this,Fd))},Rv=function(){const e=this._signal;window.addEventListener("keydown",u(this,Bd),{signal:e}),window.addEventListener("keyup",u(this,Hd),{signal:e})},PE=function(){window.removeEventListener("keydown",u(this,Bd)),window.removeEventListener("keyup",u(this,Hd))},Pv=function(){const e=this._signal;document.addEventListener("copy",u(this,Nd),{signal:e}),document.addEventListener("cut",u(this,jd),{signal:e}),document.addEventListener("paste",u(this,zd),{signal:e})},Lv=function(){document.removeEventListener("copy",u(this,Nd)),document.removeEventListener("cut",u(this,jd)),document.removeEventListener("paste",u(this,zd))},LE=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},bn=function(e){Object.entries(e).some(([i,s])=>u(this,qd)[i]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(u(this,qd),e)}),u(this,en)===Xe.HIGHLIGHT&&e.hasSelectedEditor===!1&&C(this,he,Ys).call(this,[[Ne.HIGHLIGHT_FREE,!0]]))},Ys=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},ME=function(){if(!u(this,no)){x(this,no,!0);for(const e of u(this,Zt).values())e.enable();for(const e of u(this,Ot).values())e.enable()}},DE=function(){if(this.unselectAll(),u(this,no)){x(this,no,!1);for(const e of u(this,Zt).values())e.disable();for(const e of u(this,Ot).values())e.disable()}},Mv=function(e){const t=u(this,Zt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},IE=function(){let e=null;for(e of u(this,it));return e},ld=function(){if(u(this,Ot).size===0)return!0;if(u(this,Ot).size===1)for(const e of u(this,Ot).values())return e.isEmpty();return!1},Dv=function(e){for(const t of u(this,it))t.unselect();u(this,it).clear();for(const t of e)t.isEmpty()||(u(this,it).add(t),t.select());C(this,he,bn).call(this,{hasSelectedEditor:this.hasSelection})},ze(ac,"TRANSLATE_SMALL",1),ze(ac,"TRANSLATE_BIG",10);let ll=ac;var is,rs,Gi,ss,ri,vc,Xi,Xd,Iv;const Kr=class Kr{constructor(e){T(this,Xd);T(this,is,"");T(this,rs,!1);T(this,Gi,null);T(this,ss,null);T(this,ri,null);T(this,vc,!1);T(this,Xi,null);x(this,Xi,e)}static initialize(e){Kr._l10nPromise||(Kr._l10nPromise=e)}async render(){const e=x(this,Gi,document.createElement("button"));e.className="altText";const t=await Kr._l10nPromise.get("pdfjs-editor-alt-text-button-label");e.textContent=t,e.setAttribute("aria-label",t),e.tabIndex="0";const i=u(this,Xi)._uiManager._signal;e.addEventListener("contextmenu",$n,{signal:i}),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:i});const s=o=>{o.preventDefault(),u(this,Xi)._uiManager.editAltText(u(this,Xi))};return e.addEventListener("click",s,{capture:!0,signal:i}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(x(this,vc,!0),s(o))},{signal:i}),await C(this,Xd,Iv).call(this),e}finish(){u(this,Gi)&&(u(this,Gi).focus({focusVisible:u(this,vc)}),x(this,vc,!1))}isEmpty(){return!u(this,is)&&!u(this,rs)}get data(){return{altText:u(this,is),decorative:u(this,rs)}}set data({altText:e,decorative:t}){u(this,is)===e&&u(this,rs)===t||(x(this,is,e),x(this,rs,t),C(this,Xd,Iv).call(this))}toggle(e=!1){u(this,Gi)&&(!e&&u(this,ri)&&(clearTimeout(u(this,ri)),x(this,ri,null)),u(this,Gi).disabled=!e)}destroy(){var e;(e=u(this,Gi))==null||e.remove(),x(this,Gi,null),x(this,ss,null)}};is=new WeakMap,rs=new WeakMap,Gi=new WeakMap,ss=new WeakMap,ri=new WeakMap,vc=new WeakMap,Xi=new WeakMap,Xd=new WeakSet,Iv=async function(){var s;const e=u(this,Gi);if(!e)return;if(!u(this,is)&&!u(this,rs)){e.classList.remove("done"),(s=u(this,ss))==null||s.remove();return}e.classList.add("done"),Kr._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(o=>{e.setAttribute("aria-label",o)});let t=u(this,ss);if(!t){x(this,ss,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip");const o=t.id=`alt-text-tooltip-${u(this,Xi).id}`;e.setAttribute("aria-describedby",o);const c=100,d=u(this,Xi)._uiManager._signal;d.addEventListener("abort",()=>{clearTimeout(u(this,ri)),x(this,ri,null)},{once:!0}),e.addEventListener("mouseenter",()=>{x(this,ri,setTimeout(()=>{x(this,ri,null),u(this,ss).classList.add("show"),u(this,Xi)._reportTelemetry({action:"alt_text_tooltip"})},c))},{signal:d}),e.addEventListener("mouseleave",()=>{var f;u(this,ri)&&(clearTimeout(u(this,ri)),x(this,ri,null)),(f=u(this,ss))==null||f.classList.remove("show")},{signal:d})}t.innerText=u(this,rs)?await Kr._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):u(this,is),t.parentNode||e.append(t);const i=u(this,Xi).getImageForAltText();i==null||i.setAttribute("aria-describedby",t.id)},ze(Kr,"_l10nPromise",null);let vg=Kr;var Aa,Ki,fn,wc,ba,tn,Sa,Ac,bc,pn,Kd,Ea,ro,Yd,xa,os,Ar,Sc,Ec,_i,Qd,Mg,We,Fv,Jd,Ov,Nv,FE,OE,jv,zv,Bv,NE,jE,zE,BE,Hv,cd;const lt=class lt{constructor(e){T(this,We);T(this,Aa,null);T(this,Ki,null);T(this,fn,null);T(this,wc,!1);T(this,ba,!1);T(this,tn,null);T(this,Sa,null);T(this,Ac,this.focusin.bind(this));T(this,bc,this.focusout.bind(this));T(this,pn,null);T(this,Kd,"");T(this,Ea,!1);T(this,ro,null);T(this,Yd,!1);T(this,xa,!1);T(this,os,!1);T(this,Ar,null);T(this,Sc,0);T(this,Ec,0);T(this,_i,null);ze(this,"_initialOptions",Object.create(null));ze(this,"_isVisible",!0);ze(this,"_uiManager",null);ze(this,"_focusEventsAllowed",!0);ze(this,"_l10nPromise",null);T(this,Qd,!1);T(this,Mg,lt._zIndex++);this.constructor===lt&&ot("Cannot initialize AnnotationEditor."),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:i,pageHeight:s,pageX:o,pageY:c}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,s],this.pageTranslation=[o,c];const[d,f]=this.parentDimensions;this.x=e.x/d,this.y=e.y/f,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=lt.prototype._resizeWithKeyboard,t=ll.TRANSLATE_SMALL,i=ll.TRANSLATE_BIG;return Qe(this,"_resizerKeyboardManager",new df([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],lt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return Qe(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new AR({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t,i){if(lt._l10nPromise||(lt._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(o=>[o,e.get(o.replaceAll(/([A-Z])/g,c=>`-${c.toLowerCase()}`))]))),i!=null&&i.strings)for(const o of i.strings)lt._l10nPromise.set(o,e.get(o));if(lt._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);lt._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){ot("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return u(this,Qd)}set _isDraggable(e){var t;x(this,Qd,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=u(this,Mg)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):C(this,We,cd).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(u(this,Ea)?x(this,Ea,!1):this.parent.setSelected(this))}focusout(e){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,s){const[o,c]=this.parentDimensions;[i,s]=this.screenToPageTranslation(i,s),this.x=(e+i)/o,this.y=(t+s)/c,this.fixAndSetPosition()}translate(e,t){C(this,We,Fv).call(this,this.parentDimensions,e,t)}translateInPage(e,t){u(this,ro)||x(this,ro,[this.x,this.y]),C(this,We,Fv).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){u(this,ro)||x(this,ro,[this.x,this.y]);const[i,s]=this.parentDimensions;if(this.x+=e/i,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:p,y:g}=this.div.getBoundingClientRect();this.parent.findNewParent(this,p,g)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:c}=this;const[d,f]=this.getBaseTranslation();o+=d,c+=f,this.div.style.left=`${(100*o).toFixed(2)}%`,this.div.style.top=`${(100*c).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!u(this,ro)&&(u(this,ro)[0]!==this.x||u(this,ro)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=lt,s=i/e,o=i/t;switch(this.rotation){case 90:return[-s,o];case 180:return[s,o];case 270:return[s,-o];default:return[-s,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,i]=this.pageDimensions;let{x:s,y:o,width:c,height:d}=this;if(c*=t,d*=i,s*=t,o*=i,this._mustFixPosition)switch(e){case 0:s=Math.max(0,Math.min(t-c,s)),o=Math.max(0,Math.min(i-d,o));break;case 90:s=Math.max(0,Math.min(t-d,s)),o=Math.min(i,Math.max(c,o));break;case 180:s=Math.min(t,Math.max(c,s)),o=Math.min(i,Math.max(d,o));break;case 270:s=Math.min(t,Math.max(d,s)),o=Math.max(0,Math.min(i-c,o));break}this.x=s/=t,this.y=o/=i;const[f,p]=this.getBaseTranslation();s+=f,o+=p;const{style:g}=this.div;g.left=`${(100*s).toFixed(2)}%`,g.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var i;return C(i=lt,Jd,Ov).call(i,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var i;return C(i=lt,Jd,Ov).call(i,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this,s=t*e,o=i*e;return zn.isCSSRoundSupported?[Math.round(s),Math.round(o)]:[s,o]}setDims(e,t){const[i,s]=this.parentDimensions;this.div.style.width=`${(100*e/i).toFixed(2)}%`,u(this,ba)||(this.div.style.height=`${(100*t/s).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:i}=e,s=i.endsWith("%"),o=!u(this,ba)&&t.endsWith("%");if(s&&o)return;const[c,d]=this.parentDimensions;s||(e.width=`${(100*parseFloat(i)/c).toFixed(2)}%`),!u(this,ba)&&!o&&(e.height=`${(100*parseFloat(t)/d).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=u(this,fn))==null||e.finish()}async addEditToolbar(){return u(this,pn)||u(this,xa)?u(this,pn):(x(this,pn,new xv(this)),this.div.append(u(this,pn).render()),u(this,fn)&&u(this,pn).addAltTextButton(await u(this,fn).render()),u(this,pn))}removeEditToolbar(){var e;u(this,pn)&&(u(this,pn).remove(),x(this,pn,null),(e=u(this,fn))==null||e.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){u(this,fn)||(vg.initialize(lt._l10nPromise),x(this,fn,new vg(this)),u(this,Aa)&&(u(this,fn).data=u(this,Aa),x(this,Aa,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=u(this,fn))==null?void 0:e.data}set altTextData(e){u(this,fn)&&(u(this,fn).data=e)}hasAltText(){var e;return!((e=u(this,fn))!=null&&e.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=u(this,wc)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground();const e=this._uiManager._signal;this.div.addEventListener("focusin",u(this,Ac),{signal:e}),this.div.addEventListener("focusout",u(this,bc),{signal:e});const[t,i]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*i/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/i).toFixed(2)}%`);const[s,o]=this.getInitialTranslation();return this.translate(s,o),yg(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=zn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(x(this,Ea,!0),this._isDraggable){C(this,We,NE).call(this,e);return}C(this,We,Bv).call(this,e)}moveInDOM(){u(this,Ar)&&clearTimeout(u(this,Ar)),x(this,Ar,setTimeout(()=>{var e;x(this,Ar,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition()}getRect(e,t,i=this.rotation){const s=this.parentScale,[o,c]=this.pageDimensions,[d,f]=this.pageTranslation,p=e/s,g=t/s,y=this.x*o,w=this.y*c,b=this.width*o,A=this.height*c;switch(i){case 0:return[y+p+d,c-w-g-A+f,y+p+b+d,c-w-g+f];case 90:return[y+g+d,c-w+p+f,y+g+A+d,c-w+p+b+f];case 180:return[y-p-b+d,c-w+g+f,y-p+d,c-w+g+A+f];case 270:return[y-g-A+d,c-w-p-b+f,y-g+d,c-w-p+f];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,s,o,c]=e,d=o-i,f=c-s;switch(this.rotation){case 0:return[i,t-c,d,f];case 90:return[i,t-s,f,d];case 180:return[o,t-s,d,f];case 270:return[o,t-c,f,d];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){x(this,xa,!0)}disableEditMode(){x(this,xa,!1)}isInEditMode(){return u(this,xa)}shouldGetKeyboardEvents(){return u(this,os)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var t,i;const e=this._uiManager._signal;(t=this.div)==null||t.addEventListener("focusin",u(this,Ac),{signal:e}),(i=this.div)==null||i.addEventListener("focusout",u(this,bc),{signal:e})}rotate(e){}serialize(e=!1,t=null){ot("An editor must be serializable")}static deserialize(e,t,i){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});s.rotation=e.rotation,x(s,Aa,e.accessibilityData);const[o,c]=s.pageDimensions,[d,f,p,g]=s.getRectInCurrentCoords(e.rect,c);return s.x=d/o,s.y=f/c,s.width=p/o,s.height=g/c,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.div.removeEventListener("focusin",u(this,Ac)),this.div.removeEventListener("focusout",u(this,bc)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),u(this,Ar)&&(clearTimeout(u(this,Ar)),x(this,Ar,null)),C(this,We,cd).call(this),this.removeEditToolbar(),u(this,_i)){for(const e of u(this,_i).values())clearTimeout(e);x(this,_i,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(C(this,We,FE).call(this),u(this,tn).classList.remove("hidden"),yg(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),x(this,Sa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=u(this,tn).children;if(!u(this,Ki)){x(this,Ki,Array.from(t));const c=C(this,We,jE).bind(this),d=C(this,We,zE).bind(this),f=this._uiManager._signal;for(const p of u(this,Ki)){const g=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",c,{signal:f}),p.addEventListener("blur",d,{signal:f}),p.addEventListener("focus",C(this,We,BE).bind(this,g),{signal:f}),lt._l10nPromise.get(`pdfjs-editor-resizer-label-${g}`).then(y=>p.setAttribute("aria-label",y))}}const i=u(this,Ki)[0];let s=0;for(const c of t){if(c===i)break;s++}const o=(360-this.rotation+this.parentRotation)%360/90*(u(this,Ki).length/4);if(o!==s){if(o<s)for(let d=0;d<s-o;d++)u(this,tn).append(u(this,tn).firstChild);else if(o>s)for(let d=0;d<o-s;d++)u(this,tn).firstChild.before(u(this,tn).lastChild);let c=0;for(const d of t){const p=u(this,Ki)[c++].getAttribute("data-resizer-name");lt._l10nPromise.get(`pdfjs-editor-resizer-label-${p}`).then(g=>d.setAttribute("aria-label",g))}}C(this,We,Hv).call(this,0),x(this,os,!0),u(this,tn).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){u(this,os)&&C(this,We,zv).call(this,u(this,Kd),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){C(this,We,cd).call(this),this.div.focus()}select(){var e,t;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!u(this,pn)){this.addEditToolbar().then(()=>{var i,s;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((s=u(this,pn))==null||s.show())});return}(t=u(this,pn))==null||t.show()}unselect(){var e,t,i,s;(e=u(this,tn))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=u(this,pn))==null||s.hide()}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return u(this,Yd)}set isEditing(e){x(this,Yd,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){x(this,ba,!0);const i=e/t,{style:s}=this.div;s.aspectRatio=i,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){u(this,_i)||x(this,_i,new Map);const{action:i}=e;let s=u(this,_i).get(i);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),u(this,_i).delete(i),u(this,_i).size===0&&x(this,_i,null)},lt._telemetryTimeout),u(this,_i).set(i,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),x(this,wc,!1)}disable(){this.div&&(this.div.tabIndex=-1),x(this,wc,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Aa=new WeakMap,Ki=new WeakMap,fn=new WeakMap,wc=new WeakMap,ba=new WeakMap,tn=new WeakMap,Sa=new WeakMap,Ac=new WeakMap,bc=new WeakMap,pn=new WeakMap,Kd=new WeakMap,Ea=new WeakMap,ro=new WeakMap,Yd=new WeakMap,xa=new WeakMap,os=new WeakMap,Ar=new WeakMap,Sc=new WeakMap,Ec=new WeakMap,_i=new WeakMap,Qd=new WeakMap,Mg=new WeakMap,We=new WeakSet,Fv=function([e,t],i,s){[i,s]=this.screenToPageTranslation(i,s),this.x+=i/e,this.y+=s/t,this.fixAndSetPosition()},Jd=new WeakSet,Ov=function(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Nv=function(e){switch(e){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}},FE=function(){if(u(this,tn))return;x(this,tn,document.createElement("div")),u(this,tn).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const i of e){const s=document.createElement("div");u(this,tn).append(s),s.classList.add("resizer",i),s.setAttribute("data-resizer-name",i),s.addEventListener("pointerdown",C(this,We,OE).bind(this,i),{signal:t}),s.addEventListener("contextmenu",$n,{signal:t}),s.tabIndex=-1}this.div.prepend(u(this,tn))},OE=function(e,t){var k;t.preventDefault();const{isMac:i}=zn.platform;if(t.button!==0||t.ctrlKey&&i)return;(k=u(this,fn))==null||k.toggle(!1);const s=C(this,We,zv).bind(this,e),o=this._isDraggable;this._isDraggable=!1;const c=this._uiManager._signal,d={passive:!0,capture:!0,signal:c};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",s,d),window.addEventListener("contextmenu",$n,{signal:c});const f=this.x,p=this.y,g=this.width,y=this.height,w=this.parent.div.style.cursor,b=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const A=()=>{var _;this.parent.togglePointerEvents(!0),(_=u(this,fn))==null||_.toggle(!0),this._isDraggable=o,window.removeEventListener("pointerup",A),window.removeEventListener("blur",A),window.removeEventListener("pointermove",s,d),window.removeEventListener("contextmenu",$n),this.parent.div.style.cursor=w,this.div.style.cursor=b,C(this,We,jv).call(this,f,p,g,y)};window.addEventListener("pointerup",A,{signal:c}),window.addEventListener("blur",A,{signal:c})},jv=function(e,t,i,s){const o=this.x,c=this.y,d=this.width,f=this.height;o===e&&c===t&&d===i&&f===s||this.addCommands({cmd:()=>{this.width=d,this.height=f,this.x=o,this.y=c;const[p,g]=this.parentDimensions;this.setDims(p*d,g*f),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=s,this.x=e,this.y=t;const[p,g]=this.parentDimensions;this.setDims(p*i,g*s),this.fixAndSetPosition()},mustExec:!0})},zv=function(e,t){const[i,s]=this.parentDimensions,o=this.x,c=this.y,d=this.width,f=this.height,p=lt.MIN_SIZE/i,g=lt.MIN_SIZE/s,y=Z=>Math.round(Z*1e4)/1e4,w=C(this,We,Nv).call(this,this.rotation),b=(Z,q)=>[w[0]*Z+w[2]*q,w[1]*Z+w[3]*q],A=C(this,We,Nv).call(this,360-this.rotation),k=(Z,q)=>[A[0]*Z+A[2]*q,A[1]*Z+A[3]*q];let _,R,D=!1,j=!1;switch(e){case"topLeft":D=!0,_=(Z,q)=>[0,0],R=(Z,q)=>[Z,q];break;case"topMiddle":_=(Z,q)=>[Z/2,0],R=(Z,q)=>[Z/2,q];break;case"topRight":D=!0,_=(Z,q)=>[Z,0],R=(Z,q)=>[0,q];break;case"middleRight":j=!0,_=(Z,q)=>[Z,q/2],R=(Z,q)=>[0,q/2];break;case"bottomRight":D=!0,_=(Z,q)=>[Z,q],R=(Z,q)=>[0,0];break;case"bottomMiddle":_=(Z,q)=>[Z/2,q],R=(Z,q)=>[Z/2,0];break;case"bottomLeft":D=!0,_=(Z,q)=>[0,q],R=(Z,q)=>[Z,0];break;case"middleLeft":j=!0,_=(Z,q)=>[0,q/2],R=(Z,q)=>[Z,q/2];break}const z=_(d,f),B=R(d,f);let F=b(...B);const X=y(o+F[0]),Y=y(c+F[1]);let Q=1,ne=1,[oe,_e]=this.screenToPageTranslation(t.movementX,t.movementY);if([oe,_e]=k(oe/i,_e/s),D){const Z=Math.hypot(d,f);Q=ne=Math.max(Math.min(Math.hypot(B[0]-z[0]-oe,B[1]-z[1]-_e)/Z,1/d,1/f),p/d,g/f)}else j?Q=Math.max(p,Math.min(1,Math.abs(B[0]-z[0]-oe)))/d:ne=Math.max(g,Math.min(1,Math.abs(B[1]-z[1]-_e)))/f;const ge=y(d*Q),de=y(f*ne);F=b(...R(ge,de));const ie=X-F[0],re=Y-F[1];this.width=ge,this.height=de,this.x=ie,this.y=re,this.setDims(i*ge,s*de),this.fixAndSetPosition()},Bv=function(e){const{isMac:t}=zn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},NE=function(e){const t=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let i,s;const o=this._uiManager._signal;t&&(this.div.classList.add("moving"),i={passive:!0,capture:!0,signal:o},x(this,Sc,e.clientX),x(this,Ec,e.clientY),s=d=>{const{clientX:f,clientY:p}=d,[g,y]=this.screenToPageTranslation(f-u(this,Sc),p-u(this,Ec));x(this,Sc,f),x(this,Ec,p),this._uiManager.dragSelectedEditors(g,y)},window.addEventListener("pointermove",s,i));const c=()=>{window.removeEventListener("pointerup",c),window.removeEventListener("blur",c),t&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",s,i)),x(this,Ea,!1),this._uiManager.endDragSession()||C(this,We,Bv).call(this,e)};window.addEventListener("pointerup",c,{signal:o}),window.addEventListener("blur",c,{signal:o})},jE=function(e){lt._resizerKeyboardManager.exec(this,e)},zE=function(e){var t;u(this,os)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==u(this,tn)&&C(this,We,cd).call(this)},BE=function(e){x(this,Kd,u(this,os)?e:"")},Hv=function(e){if(u(this,Ki))for(const t of u(this,Ki))t.tabIndex=e},cd=function(){if(x(this,os,!1),C(this,We,Hv).call(this,-1),u(this,Sa)){const{savedX:e,savedY:t,savedWidth:i,savedHeight:s}=u(this,Sa);C(this,We,jv).call(this,e,t,i,s),x(this,Sa,null)}},T(lt,Jd),ze(lt,"_borderLineWidth",-1),ze(lt,"_colorManager",new Tv),ze(lt,"_zIndex",1),ze(lt,"_telemetryTimeout",1e3);let rt=lt;class AR extends rt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const Qb=3285377520,Ei=4294901760,pr=65535;class HE{constructor(e){this.h1=e?e&4294967295:Qb,this.h2=e?e&4294967295:Qb}update(e){let t,i;if(typeof e=="string"){t=new Uint8Array(e.length*2),i=0;for(let k=0,_=e.length;k<_;k++){const R=e.charCodeAt(k);R<=255?t[i++]=R:(t[i++]=R>>>8,t[i++]=R&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),i=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=i>>2,o=i-s*4,c=new Uint32Array(t.buffer,0,s);let d=0,f=0,p=this.h1,g=this.h2;const y=3432918353,w=461845907,b=y&pr,A=w&pr;for(let k=0;k<s;k++)k&1?(d=c[k],d=d*y&Ei|d*b&pr,d=d<<15|d>>>17,d=d*w&Ei|d*A&pr,p^=d,p=p<<13|p>>>19,p=p*5+3864292196):(f=c[k],f=f*y&Ei|f*b&pr,f=f<<15|f>>>17,f=f*w&Ei|f*A&pr,g^=f,g=g<<13|g>>>19,g=g*5+3864292196);switch(d=0,o){case 3:d^=t[s*4+2]<<16;case 2:d^=t[s*4+1]<<8;case 1:d^=t[s*4],d=d*y&Ei|d*b&pr,d=d<<15|d>>>17,d=d*w&Ei|d*A&pr,s&1?p^=d:g^=d}this.h1=p,this.h2=g}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Ei|e*36045&pr,t=t*4283543511&Ei|((t<<16|e>>>16)*2950163797&Ei)>>>16,e^=t>>>1,e=e*444984403&Ei|e*60499&pr,t=t*3301882366&Ei|((t<<16|e>>>16)*3120437893&Ei)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Uv=Object.freeze({map:null,hash:"",transfer:void 0});var _a,nn,Dg,UE;class X0{constructor(){T(this,Dg);T(this,_a,!1);T(this,nn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=u(this,nn).get(e);return i===void 0?t:Object.assign(t,i)}getRawValue(e){return u(this,nn).get(e)}remove(e){if(u(this,nn).delete(e),u(this,nn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of u(this,nn).values())if(t instanceof rt)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=u(this,nn).get(e);let s=!1;if(i!==void 0)for(const[o,c]of Object.entries(t))i[o]!==c&&(s=!0,i[o]=c);else s=!0,u(this,nn).set(e,t);s&&C(this,Dg,UE).call(this),t instanceof rt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return u(this,nn).has(e)}getAll(){return u(this,nn).size>0?H0(u(this,nn)):null}setAll(e){for(const[t,i]of Object.entries(e))this.setValue(t,i)}get size(){return u(this,nn).size}resetModified(){u(this,_a)&&(x(this,_a,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new $E(this)}get serializable(){if(u(this,nn).size===0)return Uv;const e=new Map,t=new HE,i=[],s=Object.create(null);let o=!1;for(const[c,d]of u(this,nn)){const f=d instanceof rt?d.serialize(!1,s):d;f&&(e.set(c,f),t.update(`${c}:${JSON.stringify(f)}`),o||(o=!!f.bitmap))}if(o)for(const c of e.values())c.bitmap&&i.push(c.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:Uv}get editorStats(){let e=null;const t=new Map;for(const i of u(this,nn).values()){if(!(i instanceof rt))continue;const s=i.telemetryFinalData;if(!s)continue;const{type:o}=s;t.has(o)||t.set(o,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const c=e[o]||(e[o]=new Map);for(const[d,f]of Object.entries(s)){if(d==="type")continue;let p=c.get(d);p||(p=new Map,c.set(d,p));const g=p.get(f)??0;p.set(f,g+1)}}for(const[i,s]of t)e[i]=s.computeTelemetryFinalData(e[i]);return e}}_a=new WeakMap,nn=new WeakMap,Dg=new WeakSet,UE=function(){u(this,_a)||(x(this,_a,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Zd;class $E extends X0{constructor(t){super();T(this,Zd);const{map:i,hash:s,transfer:o}=t.serializable,c=structuredClone(i,o?{transfer:o}:null);x(this,Zd,{map:c,hash:s,transfer:o})}get print(){ot("Should not call PrintAnnotationStorage.print")}get serializable(){return u(this,Zd)}}Zd=new WeakMap;var xc;class bR{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){T(this,xc,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),u(this,xc).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||u(this,xc).has(e.loadedName))){if(Ht(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:s,style:o}=e,c=new FontFace(i,s,o);this.addNativeFontFace(c);try{await c.load(),u(this,xc).add(i),t==null||t(e)}catch{$e(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}ot("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(s){throw $e(`Failed to load font '${i.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const s=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Qe(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(yn||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),Qe(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Ht(!s.done,"completeRequest() cannot be called twice."),s.done=!0;i.length>0&&i[0].done;){const o=i.shift();setTimeout(o.callback,0)}}const{loadingRequests:i}=this,s={done:!1,complete:t,callback:e};return i.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Qe(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(z,B){return z.charCodeAt(B)<<24|z.charCodeAt(B+1)<<16|z.charCodeAt(B+2)<<8|z.charCodeAt(B+3)&255}function s(z,B,F,X){const Y=z.substring(0,B),Q=z.substring(B+F);return Y+X+Q}let o,c;const d=this._document.createElement("canvas");d.width=1,d.height=1;const f=d.getContext("2d");let p=0;function g(z,B){if(++p>30){$e("Load test font never loaded."),B();return}if(f.font="30px "+z,f.fillText(".",0,20),f.getImageData(0,0,1,1).data[3]>0){B();return}setTimeout(g.bind(null,z,B))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let w=this._loadTestFont;w=s(w,976,y.length,y);const A=16,k=1482184792;let _=i(w,A);for(o=0,c=y.length-3;o<c;o+=4)_=_-k+i(y,o)|0;o<y.length&&(_=_-k+i(y+"XXX",o)|0),w=s(w,A,4,rR(_));const R=`url(data:font/opentype;base64,${btoa(w)});`,D=`@font-face {font-family:"${y}";src:${R}}`;this.insertRule(D);const j=this._document.createElement("div");j.style.visibility="hidden",j.style.width=j.style.height="10px",j.style.position="absolute",j.style.top=j.style.left="0px";for(const z of[e.loadedName,y]){const B=this._document.createElement("span");B.textContent="Hi",B.style.fontFamily=z,j.append(B)}this._document.body.append(j),g(y,()=>{j.remove(),t.complete()})}}xc=new WeakMap;class SR{constructor(e,{disableFontFace:t=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this.disableFontFace=t===!0,this._inspectFont=i}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=uE(this.data),t=`url(data:${this.mimetype};base64,${btoa(e)});`;let i;if(!this.cssFontInfo)i=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let o=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(o+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${o}src:${t}}`}return(s=this._inspectFont)==null||s.call(this,this,t),i}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let i;try{i=e.get(this.loadedName+"_path_"+t)}catch(o){$e(`getPathGenerator - ignoring character: "${o}".`)}if(!Array.isArray(i)||i.length===0)return this.compiledGlyphs[t]=function(o,c){};const s=[];for(let o=0,c=i.length;o<c;)switch(i[o++]){case qr.BEZIER_CURVE_TO:{const[d,f,p,g,y,w]=i.slice(o,o+6);s.push(b=>b.bezierCurveTo(d,f,p,g,y,w)),o+=6}break;case qr.MOVE_TO:{const[d,f]=i.slice(o,o+2);s.push(p=>p.moveTo(d,f)),o+=2}break;case qr.LINE_TO:{const[d,f]=i.slice(o,o+2);s.push(p=>p.lineTo(d,f)),o+=2}break;case qr.QUADRATIC_CURVE_TO:{const[d,f,p,g]=i.slice(o,o+4);s.push(y=>y.quadraticCurveTo(d,f,p,g)),o+=4}break;case qr.RESTORE:s.push(d=>d.restore());break;case qr.SAVE:s.push(d=>d.save());break;case qr.SCALE:Ht(s.length===2,"Scale command is only valid at the third position.");break;case qr.TRANSFORM:{const[d,f,p,g,y,w]=i.slice(o,o+6);s.push(b=>b.transform(d,f,p,g,y,w)),o+=6}break;case qr.TRANSLATE:{const[d,f]=i.slice(o,o+2);s.push(p=>p.translate(d,f)),o+=2}break}return this.compiledGlyphs[t]=function(c,d){s[0](c),s[1](c),c.scale(d,-d);for(let f=2,p=s.length;f<p;f++)s[f](c)}}}if(yn){var $v=Promise.withResolvers(),bd=null;(async()=>{const e=await Pp(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await Pp(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),i=await Pp(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),s=await Pp(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let o,c;return new Map(Object.entries({fs:e,http:t,https:i,url:s,canvas:o,path2d:c}))})().then(e=>{bd=e,$v.resolve()},e=>{$e(`loadPackages: ${e}`),bd=new Map,$v.resolve()})}class Dr{static get promise(){return $v.promise}static get(e){return bd==null?void 0:bd.get(e)}}const WE=function(l){return Dr.get("fs").promises.readFile(l).then(t=>new Uint8Array(t))};class ER extends em{}class xR extends mg{_createCanvas(e,t){return Dr.get("canvas").createCanvas(e,t)}}class _R extends tm{_fetchData(e,t){return WE(e).then(i=>({cMapData:i,compressionType:t}))}}class CR extends nm{_fetchData(e){return WE(e)}}const xn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Wv(l,e){if(!e)return;const t=e[2]-e[0],i=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,i),l.clip(s)}class hf{constructor(){this.constructor===hf&&ot("Cannot initialize BaseShadingPattern.")}getPattern(){ot("Abstract method `getPattern` called.")}}class kR extends hf{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,s){let o;if(s===xn.STROKE||s===xn.FILL){const c=t.current.getClippedPathBoundingBox(s,bt(e))||[0,0,0,0],d=Math.ceil(c[2]-c[0])||1,f=Math.ceil(c[3]-c[1])||1,p=t.cachedCanvases.getCanvas("pattern",d,f,!0),g=p.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-c[0],-c[1]),i=Ee.transform(i,[1,0,0,1,c[0],c[1]]),g.transform(...t.baseTransform),this.matrix&&g.transform(...this.matrix),Wv(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),o=e.createPattern(p.canvas,"no-repeat");const y=new DOMMatrix(i);o.setTransform(y)}else Wv(e,this._bbox),o=this._createGradient(e);return o}}function av(l,e,t,i,s,o,c,d){const f=e.coords,p=e.colors,g=l.data,y=l.width*4;let w;f[t+1]>f[i+1]&&(w=t,t=i,i=w,w=o,o=c,c=w),f[i+1]>f[s+1]&&(w=i,i=s,s=w,w=c,c=d,d=w),f[t+1]>f[i+1]&&(w=t,t=i,i=w,w=o,o=c,c=w);const b=(f[t]+e.offsetX)*e.scaleX,A=(f[t+1]+e.offsetY)*e.scaleY,k=(f[i]+e.offsetX)*e.scaleX,_=(f[i+1]+e.offsetY)*e.scaleY,R=(f[s]+e.offsetX)*e.scaleX,D=(f[s+1]+e.offsetY)*e.scaleY;if(A>=D)return;const j=p[o],z=p[o+1],B=p[o+2],F=p[c],X=p[c+1],Y=p[c+2],Q=p[d],ne=p[d+1],oe=p[d+2],_e=Math.round(A),ge=Math.round(D);let de,ie,re,Z,q,ue,ae,M;for(let $=_e;$<=ge;$++){if($<_){const Ce=$<A?0:(A-$)/(A-_);de=b-(b-k)*Ce,ie=j-(j-F)*Ce,re=z-(z-X)*Ce,Z=B-(B-Y)*Ce}else{let Ce;$>D?Ce=1:_===D?Ce=0:Ce=(_-$)/(_-D),de=k-(k-R)*Ce,ie=F-(F-Q)*Ce,re=X-(X-ne)*Ce,Z=Y-(Y-oe)*Ce}let le;$<A?le=0:$>D?le=1:le=(A-$)/(A-D),q=b-(b-R)*le,ue=j-(j-Q)*le,ae=z-(z-ne)*le,M=B-(B-oe)*le;const me=Math.round(Math.min(de,q)),Se=Math.round(Math.max(de,q));let Te=y*$+me*4;for(let Ce=me;Ce<=Se;Ce++)le=(de-Ce)/(de-q),le<0?le=0:le>1&&(le=1),g[Te++]=ie-(ie-ue)*le|0,g[Te++]=re-(re-ae)*le|0,g[Te++]=Z-(Z-M)*le|0,g[Te++]=255}}function TR(l,e,t){const i=e.coords,s=e.colors;let o,c;switch(e.type){case"lattice":const d=e.verticesPerRow,f=Math.floor(i.length/d)-1,p=d-1;for(o=0;o<f;o++){let g=o*d;for(let y=0;y<p;y++,g++)av(l,t,i[g],i[g+1],i[g+d],s[g],s[g+1],s[g+d]),av(l,t,i[g+d+1],i[g+1],i[g+d],s[g+d+1],s[g+1],s[g+d])}break;case"triangles":for(o=0,c=i.length;o<c;o+=3)av(l,t,i[o],i[o+1],i[o+2],s[o],s[o+1],s[o+2]);break;default:throw new Error("illegal figure")}}class RR extends hf{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,i){const d=Math.floor(this._bounds[0]),f=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-d,g=Math.ceil(this._bounds[3])-f,y=Math.min(Math.ceil(Math.abs(p*e[0]*1.1)),3e3),w=Math.min(Math.ceil(Math.abs(g*e[1]*1.1)),3e3),b=p/y,A=g/w,k={coords:this._coords,colors:this._colors,offsetX:-d,offsetY:-f,scaleX:1/b,scaleY:1/A},_=y+4,R=w+4,D=i.getCanvas("mesh",_,R,!1),j=D.context,z=j.createImageData(y,w);if(t){const F=z.data;for(let X=0,Y=F.length;X<Y;X+=4)F[X]=t[0],F[X+1]=t[1],F[X+2]=t[2],F[X+3]=255}for(const F of this._figures)TR(z,F,k);return j.putImageData(z,2,2),{canvas:D.canvas,offsetX:d-2*b,offsetY:f-2*A,scaleX:b,scaleY:A}}getPattern(e,t,i,s){Wv(e,this._bbox);let o;if(s===xn.SHADING)o=Ee.singularValueDecompose2dScale(bt(e));else if(o=Ee.singularValueDecompose2dScale(t.baseTransform),this.matrix){const d=Ee.singularValueDecompose2dScale(this.matrix);o=[o[0]*d[0],o[1]*d[1]]}const c=this._createMeshCanvas(o,s===xn.SHADING?null:this._background,t.cachedCanvases);return s!==xn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(c.offsetX,c.offsetY),e.scale(c.scaleX,c.scaleY),e.createPattern(c.canvas,"no-repeat")}}class PR extends hf{getPattern(){return"hotpink"}}function LR(l){switch(l[0]){case"RadialAxial":return new kR(l);case"Mesh":return new RR(l);case"Dummy":return new PR}throw new Error(`Unknown IR type: ${l[0]}`)}const Jb={COLORED:1,UNCOLORED:2},Ig=class Ig{constructor(e,t,i,s,o){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=o}createPatternCanvas(e){const t=this.operatorList,i=this.bbox,s=this.xstep,o=this.ystep,c=this.paintType,d=this.tilingType,f=this.color,p=this.canvasGraphicsFactory;Qg("TilingType: "+d);const g=i[0],y=i[1],w=i[2],b=i[3],A=Ee.singularValueDecompose2dScale(this.matrix),k=Ee.singularValueDecompose2dScale(this.baseTransform),_=[A[0]*k[0],A[1]*k[1]],R=this.getSizeAndScale(s,this.ctx.canvas.width,_[0]),D=this.getSizeAndScale(o,this.ctx.canvas.height,_[1]),j=e.cachedCanvases.getCanvas("pattern",R.size,D.size,!0),z=j.context,B=p.createCanvasGraphics(z);B.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(B,c,f);let F=g,X=y,Y=w,Q=b;return g<0&&(F=0,Y+=Math.abs(g)),y<0&&(X=0,Q+=Math.abs(y)),z.translate(-(R.scale*F),-(D.scale*X)),B.transform(R.scale,0,0,D.scale,0,0),z.save(),this.clipBbox(B,F,X,Y,Q),B.baseTransform=bt(B.ctx),B.executeOperatorList(t),B.endDrawing(),{canvas:j.canvas,scaleX:R.scale,scaleY:D.scale,offsetX:F,offsetY:X}}getSizeAndScale(e,t,i){e=Math.abs(e);const s=Math.max(Ig.MAX_PATTERN_SIZE,t);let o=Math.ceil(e*i);return o>=s?o=s:i=o/e,{scale:i,size:o}}clipBbox(e,t,i,s,o){const c=s-t,d=o-i;e.ctx.rect(t,i,c,d),e.current.updateRectMinMax(bt(e.ctx),[t,i,s,o]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){const s=e.ctx,o=e.current;switch(t){case Jb.COLORED:const c=this.ctx;s.fillStyle=c.fillStyle,s.strokeStyle=c.strokeStyle,o.fillColor=c.fillStyle,o.strokeColor=c.strokeStyle;break;case Jb.UNCOLORED:const d=Ee.makeHexColor(i[0],i[1],i[2]);s.fillStyle=d,s.strokeStyle=d,o.fillColor=d,o.strokeColor=d;break;default:throw new iR(`Unsupported paint type: ${t}`)}}getPattern(e,t,i,s){let o=i;s!==xn.SHADING&&(o=Ee.transform(o,t.baseTransform),this.matrix&&(o=Ee.transform(o,this.matrix)));const c=this.createPatternCanvas(t);let d=new DOMMatrix(o);d=d.translate(c.offsetX,c.offsetY),d=d.scale(1/c.scaleX,1/c.scaleY);const f=e.createPattern(c.canvas,"repeat");return f.setTransform(d),f}};ze(Ig,"MAX_PATTERN_SIZE",3e3);let Vv=Ig;function MR({src:l,srcPos:e=0,dest:t,width:i,height:s,nonBlackColor:o=4294967295,inverseDecode:c=!1}){const d=zn.isLittleEndian?4278190080:255,[f,p]=c?[o,d]:[d,o],g=i>>3,y=i&7,w=l.length;t=new Uint32Array(t.buffer);let b=0;for(let A=0;A<s;A++){for(const _=e+g;e<_;e++){const R=e<w?l[e]:255;t[b++]=R&128?p:f,t[b++]=R&64?p:f,t[b++]=R&32?p:f,t[b++]=R&16?p:f,t[b++]=R&8?p:f,t[b++]=R&4?p:f,t[b++]=R&2?p:f,t[b++]=R&1?p:f}if(y===0)continue;const k=e<w?l[e++]:255;for(let _=0;_<y;_++)t[b++]=k&1<<7-_?p:f}return{srcPos:e,destPos:b}}const Zb=16,eS=100,DR=15,tS=10,nS=1e3,jn=16;function IR(l,e){if(l._removeMirroring)throw new Error("Context is already forwarding operations.");l.__originalSave=l.save,l.__originalRestore=l.restore,l.__originalRotate=l.rotate,l.__originalScale=l.scale,l.__originalTranslate=l.translate,l.__originalTransform=l.transform,l.__originalSetTransform=l.setTransform,l.__originalResetTransform=l.resetTransform,l.__originalClip=l.clip,l.__originalMoveTo=l.moveTo,l.__originalLineTo=l.lineTo,l.__originalBezierCurveTo=l.bezierCurveTo,l.__originalRect=l.rect,l.__originalClosePath=l.closePath,l.__originalBeginPath=l.beginPath,l._removeMirroring=()=>{l.save=l.__originalSave,l.restore=l.__originalRestore,l.rotate=l.__originalRotate,l.scale=l.__originalScale,l.translate=l.__originalTranslate,l.transform=l.__originalTransform,l.setTransform=l.__originalSetTransform,l.resetTransform=l.__originalResetTransform,l.clip=l.__originalClip,l.moveTo=l.__originalMoveTo,l.lineTo=l.__originalLineTo,l.bezierCurveTo=l.__originalBezierCurveTo,l.rect=l.__originalRect,l.closePath=l.__originalClosePath,l.beginPath=l.__originalBeginPath,delete l._removeMirroring},l.save=function(){e.save(),this.__originalSave()},l.restore=function(){e.restore(),this.__originalRestore()},l.translate=function(i,s){e.translate(i,s),this.__originalTranslate(i,s)},l.scale=function(i,s){e.scale(i,s),this.__originalScale(i,s)},l.transform=function(i,s,o,c,d,f){e.transform(i,s,o,c,d,f),this.__originalTransform(i,s,o,c,d,f)},l.setTransform=function(i,s,o,c,d,f){e.setTransform(i,s,o,c,d,f),this.__originalSetTransform(i,s,o,c,d,f)},l.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},l.rotate=function(i){e.rotate(i),this.__originalRotate(i)},l.clip=function(i){e.clip(i),this.__originalClip(i)},l.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},l.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},l.bezierCurveTo=function(t,i,s,o,c,d){e.bezierCurveTo(t,i,s,o,c,d),this.__originalBezierCurveTo(t,i,s,o,c,d)},l.rect=function(t,i,s,o){e.rect(t,i,s,o),this.__originalRect(t,i,s,o)},l.closePath=function(){e.closePath(),this.__originalClosePath()},l.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class FR{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,i)):(s=this.canvasFactory.create(t,i),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Lp(l,e,t,i,s,o,c,d,f,p){const[g,y,w,b,A,k]=bt(l);if(y===0&&w===0){const D=c*g+A,j=Math.round(D),z=d*b+k,B=Math.round(z),F=(c+f)*g+A,X=Math.abs(Math.round(F)-j)||1,Y=(d+p)*b+k,Q=Math.abs(Math.round(Y)-B)||1;return l.setTransform(Math.sign(g),0,0,Math.sign(b),j,B),l.drawImage(e,t,i,s,o,0,0,X,Q),l.setTransform(g,y,w,b,A,k),[X,Q]}if(g===0&&b===0){const D=d*w+A,j=Math.round(D),z=c*y+k,B=Math.round(z),F=(d+p)*w+A,X=Math.abs(Math.round(F)-j)||1,Y=(c+f)*y+k,Q=Math.abs(Math.round(Y)-B)||1;return l.setTransform(0,Math.sign(y),Math.sign(w),0,j,B),l.drawImage(e,t,i,s,o,0,0,Q,X),l.setTransform(g,y,w,b,A,k),[Q,X]}l.drawImage(e,t,i,s,o,c,d,f,p);const _=Math.hypot(g,y),R=Math.hypot(w,b);return[_*f,R*p]}function OR(l){const{width:e,height:t}=l;if(e>nS||t>nS)return null;const i=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=e+1;let c=new Uint8Array(o*(t+1)),d,f,p;const g=e+7&-8;let y=new Uint8Array(g*t),w=0;for(const R of l.data){let D=128;for(;D>0;)y[w++]=R&D?0:255,D>>=1}let b=0;for(w=0,y[w]!==0&&(c[0]=1,++b),f=1;f<e;f++)y[w]!==y[w+1]&&(c[f]=y[w]?2:1,++b),w++;for(y[w]!==0&&(c[f]=2,++b),d=1;d<t;d++){w=d*g,p=d*o,y[w-g]!==y[w]&&(c[p]=y[w]?1:8,++b);let R=(y[w]?4:0)+(y[w-g]?8:0);for(f=1;f<e;f++)R=(R>>2)+(y[w+1]?4:0)+(y[w-g+1]?8:0),s[R]&&(c[p+f]=s[R],++b),w++;if(y[w-g]!==y[w]&&(c[p+f]=y[w]?2:4,++b),b>i)return null}for(w=g*(t-1),p=d*o,y[w]!==0&&(c[p]=8,++b),f=1;f<e;f++)y[w]!==y[w+1]&&(c[p+f]=y[w]?4:8,++b),w++;if(y[w]!==0&&(c[p+f]=4,++b),b>i)return null;const A=new Int32Array([0,o,-1,0,-o,0,0,0,1]),k=new Path2D;for(d=0;b&&d<=t;d++){let R=d*o;const D=R+e;for(;R<D&&!c[R];)R++;if(R===D)continue;k.moveTo(R%o,d);const j=R;let z=c[R];do{const B=A[z];do R+=B;while(!c[R]);const F=c[R];F!==5&&F!==10?(z=F,c[R]=0):(z=F&51*z>>4,c[R]&=z>>2|z<<2),k.lineTo(R%o,R/o|0),c[R]||--b}while(j!==R);--d}return y=null,c=null,function(R){R.save(),R.scale(1/e,-1/t),R.translate(0,-t),R.fill(k),R.beginPath(),R.restore()}}class iS{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=lE,this.textMatrixScale=1,this.fontMatrix=yv,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=dn.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,i){[t,i]=Ee.applyTransform([t,i],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){const i=Ee.applyTransform(t,e),s=Ee.applyTransform(t.slice(2),e),o=Ee.applyTransform([t[0],t[3]],e),c=Ee.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,i[0],s[0],o[0],c[0]),this.minY=Math.min(this.minY,i[1],s[1],o[1],c[1]),this.maxX=Math.max(this.maxX,i[0],s[0],o[0],c[0]),this.maxY=Math.max(this.maxY,i[1],s[1],o[1],c[1])}updateScalingPathMinMax(e,t){Ee.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,s,o,c,d,f,p,g){const y=Ee.bezierBoundingBox(t,i,s,o,c,d,f,p,g);g||this.updateRectMinMax(e,y)}getPathBoundingBox(e=xn.FILL,t=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(e===xn.STROKE){t||ot("Stroke bounding box must include transform.");const s=Ee.singularValueDecompose2dScale(t),o=s[0]*this.lineWidth/2,c=s[1]*this.lineWidth/2;i[0]-=o,i[1]-=c,i[2]+=o,i[3]+=c}return i}updateClipFromPath(){const e=Ee.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=xn.FILL,t=null){return Ee.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function rS(l,e){if(typeof ImageData<"u"&&e instanceof ImageData){l.putImageData(e,0,0);return}const t=e.height,i=e.width,s=t%jn,o=(t-s)/jn,c=s===0?o:o+1,d=l.createImageData(i,jn);let f=0,p;const g=e.data,y=d.data;let w,b,A,k;if(e.kind===Up.GRAYSCALE_1BPP){const _=g.byteLength,R=new Uint32Array(y.buffer,0,y.byteLength>>2),D=R.length,j=i+7>>3,z=4294967295,B=zn.isLittleEndian?4278190080:255;for(w=0;w<c;w++){for(A=w<o?jn:s,p=0,b=0;b<A;b++){const F=_-f;let X=0;const Y=F>j?i:F*8-7,Q=Y&-8;let ne=0,oe=0;for(;X<Q;X+=8)oe=g[f++],R[p++]=oe&128?z:B,R[p++]=oe&64?z:B,R[p++]=oe&32?z:B,R[p++]=oe&16?z:B,R[p++]=oe&8?z:B,R[p++]=oe&4?z:B,R[p++]=oe&2?z:B,R[p++]=oe&1?z:B;for(;X<Y;X++)ne===0&&(oe=g[f++],ne=128),R[p++]=oe&ne?z:B,ne>>=1}for(;p<D;)R[p++]=0;l.putImageData(d,0,w*jn)}}else if(e.kind===Up.RGBA_32BPP){for(b=0,k=i*jn*4,w=0;w<o;w++)y.set(g.subarray(f,f+k)),f+=k,l.putImageData(d,0,b),b+=jn;w<c&&(k=i*s*4,y.set(g.subarray(f,f+k)),l.putImageData(d,0,b))}else if(e.kind===Up.RGB_24BPP)for(A=jn,k=i*A,w=0;w<c;w++){for(w>=o&&(A=s,k=i*A),p=0,b=k;b--;)y[p++]=g[f++],y[p++]=g[f++],y[p++]=g[f++],y[p++]=255;l.putImageData(d,0,w*jn)}else throw new Error(`bad image kind: ${e.kind}`)}function sS(l,e){if(e.bitmap){l.drawImage(e.bitmap,0,0);return}const t=e.height,i=e.width,s=t%jn,o=(t-s)/jn,c=s===0?o:o+1,d=l.createImageData(i,jn);let f=0;const p=e.data,g=d.data;for(let y=0;y<c;y++){const w=y<o?jn:s;({srcPos:f}=MR({src:p,srcPos:f,dest:g,width:i,height:w,nonBlackColor:0})),l.putImageData(d,0,y*jn)}}function Ju(l,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of t)l[i]!==void 0&&(e[i]=l[i]);l.setLineDash!==void 0&&(e.setLineDash(l.getLineDash()),e.lineDashOffset=l.lineDashOffset)}function Mp(l){if(l.strokeStyle=l.fillStyle="#000000",l.fillRule="nonzero",l.globalAlpha=1,l.lineWidth=1,l.lineCap="butt",l.lineJoin="miter",l.miterLimit=10,l.globalCompositeOperation="source-over",l.font="10px sans-serif",l.setLineDash!==void 0&&(l.setLineDash([]),l.lineDashOffset=0),!yn){const{filter:e}=l;e!=="none"&&e!==""&&(l.filter="none")}}function oS(l,e){if(e)return!0;const t=Ee.singularValueDecompose2dScale(l);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*Eo.PDF_TO_CSS_UNITS);return t[0]<=i&&t[1]<=i}const NR=["butt","round","square"],jR=["miter","round","bevel"],zR={},aS={};var _o,qv,Gv;const ew=class ew{constructor(e,t,i,s,o,{optionalContentConfig:c,markedContentStack:d=null},f,p){T(this,_o);this.ctx=e,this.current=new iS(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=s,this.filterFactory=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=d||[],this.optionalContentConfig=c,this.cachedCanvases=new FR(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=f,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:s=null}){const o=this.ctx.canvas.width,c=this.ctx.canvas.height,d=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,o,c),this.ctx.fillStyle=d,i){const f=this.cachedCanvases.getCanvas("transparent",o,c);this.compositeCtx=this.ctx,this.transparentCanvas=f.canvas,this.ctx=f.context,this.ctx.save(),this.ctx.transform(...bt(this.compositeCtx))}this.ctx.save(),Mp(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=bt(this.ctx)}executeOperatorList(e,t,i,s){const o=e.argsArray,c=e.fnArray;let d=t||0;const f=o.length;if(f===d)return d;const p=f-d>tS&&typeof i=="function",g=p?Date.now()+DR:0;let y=0;const w=this.commonObjs,b=this.objs;let A;for(;;){if(s!==void 0&&d===s.nextBreakPoint)return s.breakIt(d,i),d;if(A=c[d],A!==Wi.dependency)this[A].apply(this,o[d]);else for(const k of o[d]){const _=k.startsWith("g_")?w:b;if(!_.has(k))return _.get(k,i),d}if(d++,d===f)return d;if(p&&++y>tS){if(Date.now()>g)return i(),d;y=0}}}endDrawing(){C(this,_o,qv).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),C(this,_o,Gv).call(this)}_scaleImage(e,t){const i=e.width,s=e.height;let o=Math.max(Math.hypot(t[0],t[1]),1),c=Math.max(Math.hypot(t[2],t[3]),1),d=i,f=s,p="prescale1",g,y;for(;o>2&&d>1||c>2&&f>1;){let w=d,b=f;o>2&&d>1&&(w=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d/2),o/=d/w),c>2&&f>1&&(b=f>=16384?Math.floor(f/2)-1||1:Math.ceil(f)/2,c/=f/b),g=this.cachedCanvases.getCanvas(p,w,b),y=g.context,y.clearRect(0,0,w,b),y.drawImage(e,0,0,d,f,0,0,w,b),e=g.canvas,d=w,f=b,p=p==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:d,paintHeight:f}}_createMaskCanvas(e){const t=this.ctx,{width:i,height:s}=e,o=this.current.fillColor,c=this.current.patternFill,d=bt(t);let f,p,g,y;if((e.bitmap||e.data)&&e.count>1){const Y=e.bitmap||e.data.buffer;p=JSON.stringify(c?d:[d.slice(0,4),o]),f=this._cachedBitmapsMap.get(Y),f||(f=new Map,this._cachedBitmapsMap.set(Y,f));const Q=f.get(p);if(Q&&!c){const ne=Math.round(Math.min(d[0],d[2])+d[4]),oe=Math.round(Math.min(d[1],d[3])+d[5]);return{canvas:Q,offsetX:ne,offsetY:oe}}g=Q}g||(y=this.cachedCanvases.getCanvas("maskCanvas",i,s),sS(y.context,e));let w=Ee.transform(d,[1/i,0,0,-1/s,0,0]);w=Ee.transform(w,[1,0,0,1,0,-s]);const[b,A,k,_]=Ee.getAxialAlignedBoundingBox([0,0,i,s],w),R=Math.round(k-b)||1,D=Math.round(_-A)||1,j=this.cachedCanvases.getCanvas("fillCanvas",R,D),z=j.context,B=b,F=A;z.translate(-B,-F),z.transform(...w),g||(g=this._scaleImage(y.canvas,Gr(z)),g=g.img,f&&c&&f.set(p,g)),z.imageSmoothingEnabled=oS(bt(z),e.interpolate),Lp(z,g,0,0,g.width,g.height,0,0,i,s),z.globalCompositeOperation="source-in";const X=Ee.transform(Gr(z),[1,0,0,1,-B,-F]);return z.fillStyle=c?o.getPattern(t,this,X,xn.FILL):o,z.fillRect(0,0,i,s),f&&!c&&(this.cachedCanvases.delete("fillCanvas"),f.set(p,j.canvas)),{canvas:j.canvas,offsetX:Math.round(B),offsetY:Math.round(F)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=NR[e]}setLineJoin(e){this.ctx.lineJoin=jR[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,e,t);this.suspendedCtx=this.ctx,this.ctx=s.context;const o=this.ctx;o.setTransform(...bt(this.suspendedCtx)),Ju(this.suspendedCtx,o),IR(o,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Ju(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,s){const o=s[0],c=s[1],d=s[2]-o,f=s[3]-c;d===0||f===0||(this.genericComposeSMask(t.context,i,d,f,t.subtype,t.backdrop,t.transferMap,o,c,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,s,o,c,d,f,p,g,y){let w=e.canvas,b=f-g,A=p-y;if(c){if(b<0||A<0||b+i>w.width||A+s>w.height){const _=this.cachedCanvases.getCanvas("maskExtension",i,s),R=_.context;R.drawImage(w,-b,-A),c.some(D=>D!==0)&&(R.globalCompositeOperation="destination-atop",R.fillStyle=Ee.makeHexColor(...c),R.fillRect(0,0,i,s),R.globalCompositeOperation="source-over"),w=_.canvas,b=A=0}else if(c.some(_=>_!==0)){e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const _=new Path2D;_.rect(b,A,i,s),e.clip(_),e.globalCompositeOperation="destination-atop",e.fillStyle=Ee.makeHexColor(...c),e.fillRect(b,A,i,s),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),o==="Alpha"&&d?t.filter=this.filterFactory.addAlphaFilter(d):o==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(d));const k=new Path2D;k.rect(f,p,i,s),t.clip(k),t.globalCompositeOperation="destination-in",t.drawImage(w,b,A,i,s,f,p,i,s),t.restore()}save(){this.inSMaskMode?(Ju(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Ju(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,i,s,o,c){this.ctx.transform(e,t,i,s,o,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){const s=this.ctx,o=this.current;let c=o.x,d=o.y,f,p;const g=bt(s),y=g[0]===0&&g[3]===0||g[1]===0&&g[2]===0,w=y?i.slice(0):null;for(let b=0,A=0,k=e.length;b<k;b++)switch(e[b]|0){case Wi.rectangle:c=t[A++],d=t[A++];const _=t[A++],R=t[A++],D=c+_,j=d+R;s.moveTo(c,d),_===0||R===0?s.lineTo(D,j):(s.lineTo(D,d),s.lineTo(D,j),s.lineTo(c,j)),y||o.updateRectMinMax(g,[c,d,D,j]),s.closePath();break;case Wi.moveTo:c=t[A++],d=t[A++],s.moveTo(c,d),y||o.updatePathMinMax(g,c,d);break;case Wi.lineTo:c=t[A++],d=t[A++],s.lineTo(c,d),y||o.updatePathMinMax(g,c,d);break;case Wi.curveTo:f=c,p=d,c=t[A+4],d=t[A+5],s.bezierCurveTo(t[A],t[A+1],t[A+2],t[A+3],c,d),o.updateCurvePathMinMax(g,f,p,t[A],t[A+1],t[A+2],t[A+3],c,d,w),A+=6;break;case Wi.curveTo2:f=c,p=d,s.bezierCurveTo(c,d,t[A],t[A+1],t[A+2],t[A+3]),o.updateCurvePathMinMax(g,f,p,c,d,t[A],t[A+1],t[A+2],t[A+3],w),c=t[A+2],d=t[A+3],A+=4;break;case Wi.curveTo3:f=c,p=d,c=t[A+2],d=t[A+3],s.bezierCurveTo(t[A],t[A+1],c,d,c,d),o.updateCurvePathMinMax(g,f,p,t[A],t[A+1],c,d,c,d,w),A+=4;break;case Wi.closePath:s.closePath();break}y&&o.updateScalingPathMinMax(g,w),o.setCurrentPoint(c,d)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(t.save(),t.strokeStyle=i.getPattern(t,this,Gr(t),xn.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,i=this.current.fillColor,s=this.current.patternFill;let o=!1;s&&(t.save(),t.fillStyle=i.getPattern(t,this,Gr(t),xn.FILL),o=!0);const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),o&&t.restore(),e&&this.consumePath(c)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=zR}eoClip(){this.pendingClip=aS}beginText(){this.current.textMatrix=lE,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const i of e)t.setTransform(...i.transform),t.translate(i.x,i.y),i.addToPath(t,i.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var g;const i=this.commonObjs.get(e),s=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=i.fontMatrix||yv,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&$e("Invalid font matrix for font "+e),t<0?(t=-t,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const o=i.loadedName||"sans-serif",c=((g=i.systemFontInfo)==null?void 0:g.css)||`"${o}", ${i.fallbackName}`;let d="normal";i.black?d="900":i.bold&&(d="bold");const f=i.italic?"italic":"normal";let p=t;t<Zb?p=Zb:t>eS&&(p=eS),this.current.fontSizeScale=t/p,this.ctx.font=`${f} ${d} ${p}px ${c}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,i,s,o,c){this.current.textMatrix=[e,t,i,s,o,c],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,s){const o=this.ctx,c=this.current,d=c.font,f=c.textRenderingMode,p=c.fontSize/c.fontSizeScale,g=f&dn.FILL_STROKE_MASK,y=!!(f&dn.ADD_TO_PATH_FLAG),w=c.patternFill&&!d.missingFile;let b;(d.disableFontFace||y||w)&&(b=d.getPathGenerator(this.commonObjs,e)),d.disableFontFace||w?(o.save(),o.translate(t,i),o.beginPath(),b(o,p),s&&o.setTransform(...s),(g===dn.FILL||g===dn.FILL_STROKE)&&o.fill(),(g===dn.STROKE||g===dn.FILL_STROKE)&&o.stroke(),o.restore()):((g===dn.FILL||g===dn.FILL_STROKE)&&o.fillText(e,t,i),(g===dn.STROKE||g===dn.FILL_STROKE)&&o.strokeText(e,t,i)),y&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:bt(o),x:t,y:i,fontSize:p,addToPath:b})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){i=!0;break}return Qe(this,"isFontSubpixelAAEnabled",i)}showText(e){const t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(s===0)return;const o=this.ctx,c=t.fontSizeScale,d=t.charSpacing,f=t.wordSpacing,p=t.fontDirection,g=t.textHScale*p,y=e.length,w=i.vertical,b=w?1:-1,A=i.defaultVMetrics,k=s*t.fontMatrix[0],_=t.textRenderingMode===dn.FILL&&!i.disableFontFace&&!t.patternFill;o.save(),o.transform(...t.textMatrix),o.translate(t.x,t.y+t.textRise),p>0?o.scale(g,-1):o.scale(g,1);let R;if(t.patternFill){o.save();const F=t.fillColor.getPattern(o,this,Gr(o),xn.FILL);R=bt(o),o.restore(),o.fillStyle=F}let D=t.lineWidth;const j=t.textMatrixScale;if(j===0||D===0){const F=t.textRenderingMode&dn.FILL_STROKE_MASK;(F===dn.STROKE||F===dn.FILL_STROKE)&&(D=this.getSinglePixelWidth())}else D/=j;if(c!==1&&(o.scale(c,c),D/=c),o.lineWidth=D,i.isInvalidPDFjsFont){const F=[];let X=0;for(const Y of e)F.push(Y.unicode),X+=Y.width;o.fillText(F.join(""),0,0),t.x+=X*k*g,o.restore(),this.compose();return}let z=0,B;for(B=0;B<y;++B){const F=e[B];if(typeof F=="number"){z+=b*F*s/1e3;continue}let X=!1;const Y=(F.isSpace?f:0)+d,Q=F.fontChar,ne=F.accent;let oe,_e,ge=F.width;if(w){const ie=F.vmetric||A,re=-(F.vmetric?ie[1]:ge*.5)*k,Z=ie[2]*k;ge=ie?-ie[0]:ge,oe=re/c,_e=(z+Z)/c}else oe=z/c,_e=0;if(i.remeasure&&ge>0){const ie=o.measureText(Q).width*1e3/s*c;if(ge<ie&&this.isFontSubpixelAAEnabled){const re=ge/ie;X=!0,o.save(),o.scale(re,1),oe/=re}else ge!==ie&&(oe+=(ge-ie)/2e3*s/c)}if(this.contentVisible&&(F.isInFont||i.missingFile)){if(_&&!ne)o.fillText(Q,oe,_e);else if(this.paintChar(Q,oe,_e,R),ne){const ie=oe+s*ne.offset.x/c,re=_e-s*ne.offset.y/c;this.paintChar(ne.fontChar,ie,re,R)}}const de=w?ge*k-Y*p:ge*k+Y*p;z+=de,X&&o.restore()}w?t.y-=z:t.x+=z*g,o.restore(),this.compose()}showType3Text(e){const t=this.ctx,i=this.current,s=i.font,o=i.fontSize,c=i.fontDirection,d=s.vertical?1:-1,f=i.charSpacing,p=i.wordSpacing,g=i.textHScale*c,y=i.fontMatrix||yv,w=e.length,b=i.textRenderingMode===dn.INVISIBLE;let A,k,_,R;if(!(b||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...i.textMatrix),t.translate(i.x,i.y),t.scale(g,c),A=0;A<w;++A){if(k=e[A],typeof k=="number"){R=d*k*o/1e3,this.ctx.translate(R,0),i.x+=R*g;continue}const D=(k.isSpace?p:0)+f,j=s.charProcOperatorList[k.operatorListId];if(!j){$e(`Type3 character "${k.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=k,this.save(),t.scale(o,o),t.transform(...y),this.executeOperatorList(j),this.restore()),_=Ee.applyTransform([k.width,0],y)[0]*o+D,t.translate(_,0),i.x+=_*g}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,s,o,c){this.ctx.rect(i,s,o-i,c-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const i=e[1],s=this.baseTransform||bt(this.ctx),o={createCanvasGraphics:c=>new ew(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Vv(e,i,this.ctx,o,s)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,i){const s=Ee.makeHexColor(e,t,i);this.ctx.strokeStyle=s,this.current.strokeColor=s}setFillRGBColor(e,t,i){const s=Ee.makeHexColor(e,t,i);this.ctx.fillStyle=s,this.current.fillColor=s,this.current.patternFill=!1}_getPattern(e,t=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=LR(this.getObject(e)),this.cachedPatterns.set(e,i)),t&&(i.matrix=t),i}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const i=this._getPattern(e);t.fillStyle=i.getPattern(t,this,Gr(t),xn.SHADING);const s=Gr(t);if(s){const{width:o,height:c}=t.canvas,[d,f,p,g]=Ee.getAxialAlignedBoundingBox([0,0,o,c],s);this.ctx.fillRect(d,f,p-d,g-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){ot("Should not call beginInlineImage")}beginImageData(){ot("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=bt(this.ctx),t)){const i=t[2]-t[0],s=t[3]-t[1];this.ctx.rect(t[0],t[1],i,s),this.current.updateRectMinMax(bt(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Qg("TODO: Support non-isolated groups."),e.knockout&&$e("Knockout groups not supported.");const i=bt(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=Ee.getAxialAlignedBoundingBox(e.bbox,bt(t));const o=[0,0,t.canvas.width,t.canvas.height];s=Ee.intersect(s,o)||[0,0,0,0];const c=Math.floor(s[0]),d=Math.floor(s[1]),f=Math.max(Math.ceil(s[2])-c,1),p=Math.max(Math.ceil(s[3])-d,1);this.current.startNewPathAndClipBox([0,0,f,p]);let g="groupAt"+this.groupLevel;e.smask&&(g+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(g,f,p),w=y.context;w.translate(-c,-d),w.transform(...i),e.smask?this.smaskStack.push({canvas:y.canvas,context:w,offsetX:c,offsetY:d,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(c,d),t.save()),Ju(t,w),this.ctx=w,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=bt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const o=Ee.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],s);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,t,i,s,o){if(C(this,_o,qv).call(this),Mp(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const c=t[2]-t[0],d=t[3]-t[1];if(o&&this.annotationCanvasMap){i=i.slice(),i[4]-=t[0],i[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=c,t[3]=d;const[f,p]=Ee.singularValueDecompose2dScale(bt(this.ctx)),{viewportScale:g}=this,y=Math.ceil(c*this.outputScaleX*g),w=Math.ceil(d*this.outputScaleY*g);this.annotationCanvas=this.canvasFactory.create(y,w);const{canvas:b,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(e,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(f,0,0,-p,0,d*p),Mp(this.ctx)}else Mp(this.ctx),this.ctx.rect(t[0],t[1],c,d),this.ctx.clip(),this.endPath()}this.current=new iS(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),C(this,_o,Gv).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const i=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=OR(e)),s.compiled)){s.compiled(i);return}const o=this._createMaskCanvas(e),c=o.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(c,o.offsetX,o.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i=0,s=0,o,c){if(!this.contentVisible)return;e=this.getObject(e.data,e);const d=this.ctx;d.save();const f=bt(d);d.transform(t,i,s,o,0,0);const p=this._createMaskCanvas(e);d.setTransform(1,0,0,1,p.offsetX-f[4],p.offsetY-f[5]);for(let g=0,y=c.length;g<y;g+=2){const w=Ee.transform(f,[t,i,s,o,c[g],c[g+1]]),[b,A]=Ee.applyTransform([0,0],w);d.drawImage(p.canvas,b,A)}d.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,i=this.current.fillColor,s=this.current.patternFill;for(const o of e){const{data:c,width:d,height:f,transform:p}=o,g=this.cachedCanvases.getCanvas("maskCanvas",d,f),y=g.context;y.save();const w=this.getObject(c,o);sS(y,w),y.globalCompositeOperation="source-in",y.fillStyle=s?i.getPattern(y,this,Gr(t),xn.FILL):i,y.fillRect(0,0,d,f),y.restore(),t.save(),t.transform(...p),t.scale(1,-1),Lp(t,g.canvas,0,0,d,f,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){$e("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,i,s){if(!this.contentVisible)return;const o=this.getObject(e);if(!o){$e("Dependent image isn't ready yet");return}const c=o.width,d=o.height,f=[];for(let p=0,g=s.length;p<g;p+=2)f.push({transform:[t,0,0,i,s[p],s[p+1]],x:0,y:0,w:c,h:d});this.paintInlineImageXObjectGroup(o,f)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:i,height:s}=e,o=this.cachedCanvases.getCanvas("inlineImage",i,s),c=o.context;return c.filter=this.current.transferMaps,c.drawImage(t,0,0),c.filter="none",o.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,i=e.height,s=this.ctx;if(this.save(),!yn){const{filter:d}=s;d!=="none"&&d!==""&&(s.filter="none")}s.scale(1/t,-1/i);let o;if(e.bitmap)o=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)o=e;else{const f=this.cachedCanvases.getCanvas("inlineImage",t,i).context;rS(f,e),o=this.applyTransferMapsToCanvas(f)}const c=this._scaleImage(o,Gr(s));s.imageSmoothingEnabled=oS(bt(s),e.interpolate),Lp(s,c.img,0,0,c.paintWidth,c.paintHeight,0,-i,t,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const o=e.width,c=e.height,f=this.cachedCanvases.getCanvas("inlineImage",o,c).context;rS(f,e),s=this.applyTransferMapsToCanvas(f)}for(const o of t)i.save(),i.transform(...o.transform),i.scale(1,-1),Lp(i,s,o.x,o.y,o.w,o.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(t||(this.pendingClip===aS?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=bt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:i,c:s,d:o}=this.ctx.getTransform();let c,d;if(i===0&&s===0){const f=Math.abs(t),p=Math.abs(o);if(f===p)if(e===0)c=d=1/f;else{const g=f*e;c=d=g<1?1/g:1}else if(e===0)c=1/f,d=1/p;else{const g=f*e,y=p*e;c=g<1?1/g:1,d=y<1?1/y:1}}else{const f=Math.abs(t*o-i*s),p=Math.hypot(t,i),g=Math.hypot(s,o);if(e===0)c=g/f,d=p/f;else{const y=e*f;c=g>y?g/y:1,d=p>y?p/y:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=d}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:i}=this.current,[s,o]=this.getScaleForStroking();if(t.lineWidth=i||1,s===1&&o===1){t.stroke();return}const c=t.getLineDash();if(e&&t.save(),t.scale(s,o),c.length>0){const d=Math.max(s,o);t.setLineDash(c.map(f=>f/d)),t.lineDashOffset/=d}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};_o=new WeakSet,qv=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Gv=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let lc=ew;for(const l in Wi)lc.prototype[l]!==void 0&&(lc.prototype[Wi[l]]=lc.prototype[l]);var eh,th;class Es{static get workerPort(){return u(this,eh)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");x(this,eh,e)}static get workerSrc(){return u(this,th)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");x(this,th,e)}}eh=new WeakMap,th=new WeakMap,T(Es,eh,null),T(Es,th,"");const Dp={DATA:1,ERROR:2},Rt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Jn(l){switch(l instanceof Error||typeof l=="object"&&l!==null||ot('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),l.name){case"AbortException":return new pl(l.message);case"MissingPDFException":return new fl(l.message);case"PasswordException":return new wv(l.message,l.code);case"UnexpectedResponseException":return new Jg(l.message,l.status);case"UnknownErrorException":return new Av(l.message,l.details);default:return new Av(l.message,l.toString())}}var Lr,VE,qE,Xp;class ud{constructor(e,t,i){T(this,Lr);this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=s=>{const o=s.data;if(o.targetName!==this.sourceName)return;if(o.stream){C(this,Lr,qE).call(this,o);return}if(o.callback){const d=o.callbackId,f=this.callbackCapabilities[d];if(!f)throw new Error(`Cannot resolve callback ${d}`);if(delete this.callbackCapabilities[d],o.callback===Dp.DATA)f.resolve(o.data);else if(o.callback===Dp.ERROR)f.reject(Jn(o.reason));else throw new Error("Unexpected callback case");return}const c=this.actionHandler[o.action];if(!c)throw new Error(`Unknown action from worker: ${o.action}`);if(o.callbackId){const d=this.sourceName,f=o.sourceName;new Promise(function(p){p(c(o.data))}).then(function(p){i.postMessage({sourceName:d,targetName:f,callback:Dp.DATA,callbackId:o.callbackId,data:p})},function(p){i.postMessage({sourceName:d,targetName:f,callback:Dp.ERROR,callbackId:o.callbackId,reason:Jn(p)})});return}if(o.streamId){C(this,Lr,VE).call(this,o);return}c(o.data)},i.addEventListener("message",this._onComObjOnMessage)}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const s=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[s]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},i)}catch(c){o.reject(c)}return o.promise}sendWithStream(e,t,i,s){const o=this.streamId++,c=this.sourceName,d=this.targetName,f=this.comObj;return new ReadableStream({start:p=>{const g=Promise.withResolvers();return this.streamControllers[o]={controller:p,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},f.postMessage({sourceName:c,targetName:d,action:e,streamId:o,data:t,desiredSize:p.desiredSize},s),g.promise},pull:p=>{const g=Promise.withResolvers();return this.streamControllers[o].pullCall=g,f.postMessage({sourceName:c,targetName:d,stream:Rt.PULL,streamId:o,desiredSize:p.desiredSize}),g.promise},cancel:p=>{Ht(p instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[o].cancelCall=g,this.streamControllers[o].isClosed=!0,f.postMessage({sourceName:c,targetName:d,stream:Rt.CANCEL,streamId:o,reason:Jn(p)}),g.promise}},i)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}Lr=new WeakSet,VE=function(e){const t=e.streamId,i=this.sourceName,s=e.sourceName,o=this.comObj,c=this,d=this.actionHandler[e.action],f={enqueue(p,g=1,y){if(this.isCancelled)return;const w=this.desiredSize;this.desiredSize-=g,w>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:i,targetName:s,stream:Rt.ENQUEUE,streamId:t,chunk:p},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:s,stream:Rt.CLOSE,streamId:t}),delete c.streamSinks[t])},error(p){Ht(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:s,stream:Rt.ERROR,streamId:t,reason:Jn(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};f.sinkCapability.resolve(),f.ready=f.sinkCapability.promise,this.streamSinks[t]=f,new Promise(function(p){p(d(e.data,f))}).then(function(){o.postMessage({sourceName:i,targetName:s,stream:Rt.START_COMPLETE,streamId:t,success:!0})},function(p){o.postMessage({sourceName:i,targetName:s,stream:Rt.START_COMPLETE,streamId:t,reason:Jn(p)})})},qE=function(e){const t=e.streamId,i=this.sourceName,s=e.sourceName,o=this.comObj,c=this.streamControllers[t],d=this.streamSinks[t];switch(e.stream){case Rt.START_COMPLETE:e.success?c.startCall.resolve():c.startCall.reject(Jn(e.reason));break;case Rt.PULL_COMPLETE:e.success?c.pullCall.resolve():c.pullCall.reject(Jn(e.reason));break;case Rt.PULL:if(!d){o.postMessage({sourceName:i,targetName:s,stream:Rt.PULL_COMPLETE,streamId:t,success:!0});break}d.desiredSize<=0&&e.desiredSize>0&&d.sinkCapability.resolve(),d.desiredSize=e.desiredSize,new Promise(function(f){var p;f((p=d.onPull)==null?void 0:p.call(d))}).then(function(){o.postMessage({sourceName:i,targetName:s,stream:Rt.PULL_COMPLETE,streamId:t,success:!0})},function(f){o.postMessage({sourceName:i,targetName:s,stream:Rt.PULL_COMPLETE,streamId:t,reason:Jn(f)})});break;case Rt.ENQUEUE:if(Ht(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(e.chunk);break;case Rt.CLOSE:if(Ht(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),C(this,Lr,Xp).call(this,c,t);break;case Rt.ERROR:Ht(c,"error should have stream controller"),c.controller.error(Jn(e.reason)),C(this,Lr,Xp).call(this,c,t);break;case Rt.CANCEL_COMPLETE:e.success?c.cancelCall.resolve():c.cancelCall.reject(Jn(e.reason)),C(this,Lr,Xp).call(this,c,t);break;case Rt.CANCEL:if(!d)break;new Promise(function(f){var p;f((p=d.onCancel)==null?void 0:p.call(d,Jn(e.reason)))}).then(function(){o.postMessage({sourceName:i,targetName:s,stream:Rt.CANCEL_COMPLETE,streamId:t,success:!0})},function(f){o.postMessage({sourceName:i,targetName:s,stream:Rt.CANCEL_COMPLETE,streamId:t,reason:Jn(f)})}),d.sinkCapability.reject(Jn(e.reason)),d.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Xp=async function(e,t){var i,s,o;await Promise.allSettled([(i=e.startCall)==null?void 0:i.promise,(s=e.pullCall)==null?void 0:s.promise,(o=e.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[t]};var Ca,nh;class BR{constructor({parsedData:e,rawData:t}){T(this,Ca);T(this,nh);x(this,Ca,e),x(this,nh,t)}getRaw(){return u(this,nh)}get(e){return u(this,Ca).get(e)??null}getAll(){return H0(u(this,Ca))}has(e){return u(this,Ca).has(e)}}Ca=new WeakMap,nh=new WeakMap;const Qs=Symbol("INTERNAL");var ih,rh,sh,_c;class HR{constructor(e,{name:t,intent:i,usage:s}){T(this,ih,!1);T(this,rh,!1);T(this,sh,!1);T(this,_c,!0);x(this,ih,!!(e&Ti.DISPLAY)),x(this,rh,!!(e&Ti.PRINT)),this.name=t,this.intent=i,this.usage=s}get visible(){if(u(this,sh))return u(this,_c);if(!u(this,_c))return!1;const{print:e,view:t}=this.usage;return u(this,ih)?(t==null?void 0:t.viewState)!=="OFF":u(this,rh)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,i=!1){e!==Qs&&ot("Internal method `_setVisible` called."),x(this,sh,i),x(this,_c,t)}}ih=new WeakMap,rh=new WeakMap,sh=new WeakMap,_c=new WeakMap;var so,st,Cc,kc,oh,Xv;class UR{constructor(e,t=Ti.DISPLAY){T(this,oh);T(this,so,null);T(this,st,new Map);T(this,Cc,null);T(this,kc,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,x(this,kc,e.order);for(const i of e.groups)u(this,st).set(i.id,new HR(t,i));if(e.baseState==="OFF")for(const i of u(this,st).values())i._setVisible(Qs,!1);for(const i of e.on)u(this,st).get(i)._setVisible(Qs,!0);for(const i of e.off)u(this,st).get(i)._setVisible(Qs,!1);x(this,Cc,this.getHash())}}isVisible(e){if(u(this,st).size===0)return!0;if(!e)return Qg("Optional content group not defined."),!0;if(e.type==="OCG")return u(this,st).has(e.id)?u(this,st).get(e.id).visible:($e(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return C(this,oh,Xv).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!u(this,st).has(t))return $e(`Optional content group not found: ${t}`),!0;if(u(this,st).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!u(this,st).has(t))return $e(`Optional content group not found: ${t}`),!0;if(!u(this,st).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!u(this,st).has(t))return $e(`Optional content group not found: ${t}`),!0;if(!u(this,st).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!u(this,st).has(t))return $e(`Optional content group not found: ${t}`),!0;if(u(this,st).get(t).visible)return!1}return!0}return $e(`Unknown optional content policy ${e.policy}.`),!0}return $e(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0){const i=u(this,st).get(e);if(!i){$e(`Optional content group not found: ${e}`);return}i._setVisible(Qs,!!t,!0),x(this,so,null)}setOCGState({state:e,preserveRB:t}){let i;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":i=s;continue}const o=u(this,st).get(s);if(o)switch(i){case"ON":o._setVisible(Qs,!0);break;case"OFF":o._setVisible(Qs,!1);break;case"Toggle":o._setVisible(Qs,!o.visible);break}}x(this,so,null)}get hasInitialVisibility(){return u(this,Cc)===null||this.getHash()===u(this,Cc)}getOrder(){return u(this,st).size?u(this,kc)?u(this,kc).slice():[...u(this,st).keys()]:null}getGroups(){return u(this,st).size>0?H0(u(this,st)):null}getGroup(e){return u(this,st).get(e)||null}getHash(){if(u(this,so)!==null)return u(this,so);const e=new HE;for(const[t,i]of u(this,st))e.update(`${t}:${i.visible}`);return x(this,so,e.hexdigest())}}so=new WeakMap,st=new WeakMap,Cc=new WeakMap,kc=new WeakMap,oh=new WeakSet,Xv=function(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let s=1;s<t;s++){const o=e[s];let c;if(Array.isArray(o))c=C(this,oh,Xv).call(this,o);else if(u(this,st).has(o))c=u(this,st).get(o).visible;else return $e(`Optional content group not found: ${o}`),!0;switch(i){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return i==="And"};class $R{constructor(e,{disableRange:t=!1,disableStream:i=!1}){Ht(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:o,progressiveDone:c,contentDispositionFilename:d}=e;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=d,(o==null?void 0:o.length)>0){const f=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(f)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((f,p)=>{this._onReceiveData({begin:f,chunk:p})}),e.addProgressListener((f,p)=>{this._onProgress({loaded:f,total:p})}),e.addProgressiveReadListener(f=>{this._onReceiveData({chunk:f})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const s=this._rangeReaders.some(function(o){return o._begin!==e?!1:(o._enqueue(i),!0)});Ht(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,i,s,o;e.total===void 0?(i=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||i.call(t,{loaded:e.loaded}):(o=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||o.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Ht(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new WR(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new VR(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeReaders.slice(0))i.cancel(e);this._pdfDataRangeTransport.abort()}}class WR{constructor(e,t,i=!1,s=null){this._stream=e,this._done=i||!1,this._filename=q0(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class VR{constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function qR(l){let e=!0,t=i("filename\\*","i").exec(l);if(t){t=t[1];let g=d(t);return g=unescape(g),g=f(g),g=p(g),o(g)}if(t=c(l),t){const g=p(t);return o(g)}if(t=i("filename","i").exec(l),t){t=t[1];let g=d(t);return g=p(g),o(g)}function i(g,y){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function s(g,y){if(g){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const w=new TextDecoder(g,{fatal:!0}),b=Zg(y);y=w.decode(b),e=!1}catch{}}return y}function o(g){return e&&/[\x80-\xff]/.test(g)&&(g=s("utf-8",g),e&&(g=s("iso-8859-1",g))),g}function c(g){const y=[];let w;const b=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(w=b.exec(g))!==null;){let[,k,_,R]=w;if(k=parseInt(k,10),k in y){if(k===0)break;continue}y[k]=[_,R]}const A=[];for(let k=0;k<y.length&&k in y;++k){let[_,R]=y[k];R=d(R),_&&(R=unescape(R),k===0&&(R=f(R))),A.push(R)}return A.join("")}function d(g){if(g.startsWith('"')){const y=g.slice(1).split('\\"');for(let w=0;w<y.length;++w){const b=y[w].indexOf('"');b!==-1&&(y[w]=y[w].slice(0,b),y.length=w+1),y[w]=y[w].replaceAll(/\\(.)/g,"$1")}g=y.join('"')}return g}function f(g){const y=g.indexOf("'");if(y===-1)return g;const w=g.slice(0,y),A=g.slice(y+1).replace(/^[^']*'/,"");return s(w,A)}function p(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,w,b,A){if(b==="q"||b==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(k,_){return String.fromCharCode(parseInt(_,16))}),s(w,A);try{A=atob(A)}catch{}return s(w,A)})}return""}function K0({getResponseHeader:l,isHttp:e,rangeChunkSize:t,disableRange:i}){const s={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(l("Content-Length"),10);return!Number.isInteger(o)||(s.suggestedLength=o,o<=2*t)||i||!e||l("Accept-Ranges")!=="bytes"||(l("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function Y0(l){const e=l("Content-Disposition");if(e){let t=qR(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(q0(t))return t}return null}function rm(l,e){return l===404||l===0&&e.startsWith("file:")?new fl('Missing PDF "'+e+'".'):new Jg(`Unexpected server response (${l}) while retrieving PDF "${e}".`,l)}function GE(l){return l===200||l===206}function XE(l,e,t){return{method:"GET",headers:l,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function KE(l){const e=new Headers;for(const t in l){const i=l[t];i!==void 0&&e.append(t,i)}return e}function YE(l){return l instanceof Uint8Array?l.buffer:l instanceof ArrayBuffer?l:($e(`getArrayBuffer - unexpected data format: ${l}`),new Uint8Array(l).buffer)}class lS{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ht(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new GR(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new XR(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class GR{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._headers=KE(this._stream.httpHeaders);const i=t.url;fetch(i,XE(this._headers,this._withCredentials,this._abortController)).then(s=>{if(!GE(s.status))throw rm(s.status,i);this._reader=s.body.getReader(),this._headersCapability.resolve();const o=f=>s.headers.get(f),{allowRangeRequests:c,suggestedLength:d}=K0({getResponseHeader:o,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=d||this._contentLength,this._filename=Y0(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new pl("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:YE(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class XR{constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController,this._headers=KE(this._stream.httpHeaders),this._headers.append("Range",`bytes=${t}-${i-1}`);const o=s.url;fetch(o,XE(this._headers,this._withCredentials,this._abortController)).then(c=>{if(!GE(c.status))throw rm(c.status,o);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:YE(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const lv=200,cv=206;function KR(l){const e=l.response;return typeof e!="string"?e:Zg(e).buffer}class YR{constructor(e,t={}){this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&t.httpHeaders||Object.create(null),this.withCredentials=t.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,i){const s={begin:e,end:t};for(const o in i)s[o]=i[o];return this.request(s)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,i=this.currXhrId++,s=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const o in this.httpHeaders){const c=this.httpHeaders[o];c!==void 0&&t.setRequestHeader(o,c)}return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=cv):s.expectedStatus=lv,t.responseType="arraybuffer",e.onError&&(t.onerror=function(o){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){var s;const i=this.pendingRequests[e];i&&((s=i.onProgress)==null||s.call(i,t))}onStateChange(e,t){var f,p,g;const i=this.pendingRequests[e];if(!i)return;const s=i.xhr;if(s.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){(f=i.onError)==null||f.call(i,s.status);return}const o=s.status||lv;if(!(o===lv&&i.expectedStatus===cv)&&o!==i.expectedStatus){(p=i.onError)==null||p.call(i,s.status);return}const d=KR(s);if(o===cv){const y=s.getResponseHeader("Content-Range"),w=/bytes (\d+)-(\d+)\/(\d+)/.exec(y);i.onDone({begin:parseInt(w[1],10),chunk:d})}else d?i.onDone({begin:0,chunk:d}):(g=i.onError)==null||g.call(i,s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class QR{constructor(e){this._source=e,this._manager=new YR(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Ht(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new JR(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const i=new ZR(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class JR{constructor(e,t){this._manager=e;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(i),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),i=c=>t.getResponseHeader(c),{allowRangeRequests:s,suggestedLength:o}=K0({getResponseHeader:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=Y0(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=rm(e,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersReceivedCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class ZR{constructor(e,t,i){this._manager=e;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,i,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=rm(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const QE=/^file:\/\/\/[a-zA-Z]:\//;function eP(l){const e=Dr.get("url"),t=e.parse(l);return t.protocol==="file:"||t.host?t:/^[a-z]:[/\\]/i.test(l)?e.parse(`file:///${l}`):(t.host||(t.protocol="file:"),t)}class tP{constructor(e){this.source=e,this.url=eP(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ht(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new rP(this):new nP(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=this.isFsUrl?new sP(this,e,t):new iP(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class JE{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new pl("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class ZE{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function wg(l,e){return{protocol:l.protocol,auth:l.auth,host:l.hostname,port:l.port,path:l.path,method:"GET",headers:e}}class nP extends JE{constructor(e){super(e);const t=i=>{if(i.statusCode===404){const d=new fl(`Missing PDF "${this._url}".`);this._storedError=d,this._headersCapability.reject(d);return}this._headersCapability.resolve(),this._setReadableStream(i);const s=d=>this._readableStream.headers[d.toLowerCase()],{allowRangeRequests:o,suggestedLength:c}=K0({getResponseHeader:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=c||this._contentLength,this._filename=Y0(s)};if(this._request=null,this._url.protocol==="http:"){const i=Dr.get("http");this._request=i.request(wg(this._url,e.httpHeaders),t)}else{const i=Dr.get("https");this._request=i.request(wg(this._url,e.httpHeaders),t)}this._request.on("error",i=>{this._storedError=i,this._headersCapability.reject(i)}),this._request.end()}}class iP extends ZE{constructor(e,t,i){super(e),this._httpHeaders={};for(const o in e.httpHeaders){const c=e.httpHeaders[o];c!==void 0&&(this._httpHeaders[o]=c)}this._httpHeaders.Range=`bytes=${t}-${i-1}`;const s=o=>{if(o.statusCode===404){const c=new fl(`Missing PDF "${this._url}".`);this._storedError=c;return}this._setReadableStream(o)};if(this._request=null,this._url.protocol==="http:"){const o=Dr.get("http");this._request=o.request(wg(this._url,this._httpHeaders),s)}else{const o=Dr.get("https");this._request=o.request(wg(this._url,this._httpHeaders),s)}this._request.on("error",o=>{this._storedError=o}),this._request.end()}}class rP extends JE{constructor(e){super(e);let t=decodeURIComponent(this._url.path);QE.test(this._url.href)&&(t=t.replace(/^\//,""));const i=Dr.get("fs");i.promises.lstat(t).then(s=>{this._contentLength=s.size,this._setReadableStream(i.createReadStream(t)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=new fl(`Missing PDF "${t}".`)),this._storedError=s,this._headersCapability.reject(s)})}}class sP extends ZE{constructor(e,t,i){super(e);let s=decodeURIComponent(this._url.path);QE.test(this._url.href)&&(s=s.replace(/^\//,""));const o=Dr.get("fs");this._setReadableStream(o.createReadStream(s,{start:t,end:i-1}))}}const oP=1e5,In=30,aP=.8;var TS,oo,Nn,ah,lh,ka,as,ch,uh,Ta,Tc,Rc,ao,Pc,dh,Lc,Ra,hh,fh,Bt,Pa,La,lo,Mc,ks,ex,tx,Kv,Mr,Kp,nx,ix;let Ag=(Bt=class{constructor({textContentSource:e,container:t,viewport:i}){T(this,ks);T(this,oo,Promise.withResolvers());T(this,Nn,null);T(this,ah,!1);T(this,lh,!!((TS=globalThis.FontInspector)!=null&&TS.enabled));T(this,ka,null);T(this,as,null);T(this,ch,0);T(this,uh,0);T(this,Ta,null);T(this,Tc,null);T(this,Rc,0);T(this,ao,0);T(this,Pc,Object.create(null));T(this,dh,[]);T(this,Lc,null);T(this,Ra,[]);T(this,hh,new WeakMap);T(this,fh,null);var f;if(e instanceof ReadableStream)x(this,Lc,e);else if(typeof e=="object")x(this,Lc,new ReadableStream({start(p){p.enqueue(e),p.close()}}));else throw new Error('No "textContentSource" parameter specified.');x(this,Nn,x(this,Tc,t)),x(this,ao,i.scale*(globalThis.devicePixelRatio||1)),x(this,Rc,i.rotation),x(this,as,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:o,pageX:c,pageY:d}=i.rawDims;x(this,fh,[1,0,0,-1,-c,d+o]),x(this,uh,s),x(this,ch,o),C(f=Bt,Mr,nx).call(f),al(t,i),u(this,oo).promise.catch(()=>{}).then(()=>{u(Bt,Mc).delete(this),x(this,as,null),x(this,Pc,null)})}render(){const e=()=>{u(this,Ta).read().then(({value:t,done:i})=>{if(i){u(this,oo).resolve();return}u(this,ka)??x(this,ka,t.lang),Object.assign(u(this,Pc),t.styles),C(this,ks,ex).call(this,t.items),e()},u(this,oo).reject)};return x(this,Ta,u(this,Lc).getReader()),u(Bt,Mc).add(this),e(),u(this,oo).promise}update({viewport:e,onBefore:t=null}){var o;const i=e.scale*(globalThis.devicePixelRatio||1),s=e.rotation;if(s!==u(this,Rc)&&(t==null||t(),x(this,Rc,s),al(u(this,Tc),{rotation:s})),i!==u(this,ao)){t==null||t(),x(this,ao,i);const c={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:C(o=Bt,Mr,Kp).call(o,u(this,ka))};for(const d of u(this,Ra))c.properties=u(this,hh).get(d),c.div=d,C(this,ks,Kv).call(this,c)}}cancel(){var t;const e=new pl("TextLayer task cancelled.");(t=u(this,Ta))==null||t.cancel(e).catch(()=>{}),x(this,Ta,null),u(this,oo).reject(e)}get textDivs(){return u(this,Ra)}get textContentItemsStr(){return u(this,dh)}static cleanup(){if(!(u(this,Mc).size>0)){u(this,Pa).clear();for(const{canvas:e}of u(this,La).values())e.remove();u(this,La).clear()}}},oo=new WeakMap,Nn=new WeakMap,ah=new WeakMap,lh=new WeakMap,ka=new WeakMap,as=new WeakMap,ch=new WeakMap,uh=new WeakMap,Ta=new WeakMap,Tc=new WeakMap,Rc=new WeakMap,ao=new WeakMap,Pc=new WeakMap,dh=new WeakMap,Lc=new WeakMap,Ra=new WeakMap,hh=new WeakMap,fh=new WeakMap,Pa=new WeakMap,La=new WeakMap,lo=new WeakMap,Mc=new WeakMap,ks=new WeakSet,ex=function(e){var s,o;if(u(this,ah))return;(o=u(this,as)).ctx??(o.ctx=C(s=Bt,Mr,Kp).call(s,u(this,ka)));const t=u(this,Ra),i=u(this,dh);for(const c of e){if(t.length>oP){$e("Ignoring additional textDivs for performance reasons."),x(this,ah,!0);return}if(c.str===void 0){if(c.type==="beginMarkedContentProps"||c.type==="beginMarkedContent"){const d=u(this,Nn);x(this,Nn,document.createElement("span")),u(this,Nn).classList.add("markedContent"),c.id!==null&&u(this,Nn).setAttribute("id",`${c.id}`),d.append(u(this,Nn))}else c.type==="endMarkedContent"&&x(this,Nn,u(this,Nn).parentNode);continue}i.push(c.str),C(this,ks,tx).call(this,c)}},tx=function(e){var k;const t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};u(this,Ra).push(t);const s=Ee.transform(u(this,fh),e.transform);let o=Math.atan2(s[1],s[0]);const c=u(this,Pc)[e.fontName];c.vertical&&(o+=Math.PI/2);const d=u(this,lh)&&c.fontSubstitution||c.fontFamily,f=Math.hypot(s[2],s[3]),p=f*C(k=Bt,Mr,ix).call(k,d,u(this,ka));let g,y;o===0?(g=s[4],y=s[5]-p):(g=s[4]+p*Math.sin(o),y=s[5]-p*Math.cos(o));const w="calc(var(--scale-factor)*",b=t.style;u(this,Nn)===u(this,Tc)?(b.left=`${(100*g/u(this,uh)).toFixed(2)}%`,b.top=`${(100*y/u(this,ch)).toFixed(2)}%`):(b.left=`${w}${g.toFixed(2)}px)`,b.top=`${w}${y.toFixed(2)}px)`),b.fontSize=`${w}${(u(Bt,lo)*f).toFixed(2)}px)`,b.fontFamily=d,i.fontSize=f,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,u(this,lh)&&(t.dataset.fontName=c.fontSubstitutionLoadedName||e.fontName),o!==0&&(i.angle=o*(180/Math.PI));let A=!1;if(e.str.length>1)A=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const _=Math.abs(e.transform[0]),R=Math.abs(e.transform[3]);_!==R&&Math.max(_,R)/Math.min(_,R)>1.5&&(A=!0)}if(A&&(i.canvasWidth=c.vertical?e.height:e.width),u(this,hh).set(t,i),u(this,as).div=t,u(this,as).properties=i,C(this,ks,Kv).call(this,u(this,as)),i.hasText&&u(this,Nn).append(t),i.hasEOL){const _=document.createElement("br");_.setAttribute("role","presentation"),u(this,Nn).append(_)}},Kv=function(e){const{div:t,properties:i,ctx:s,prevFontSize:o,prevFontFamily:c}=e,{style:d}=t;let f="";if(u(Bt,lo)>1&&(f=`scale(${1/u(Bt,lo)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:p}=d,{canvasWidth:g,fontSize:y}=i;(o!==y||c!==p)&&(s.font=`${y*u(this,ao)}px ${p}`,e.prevFontSize=y,e.prevFontFamily=p);const{width:w}=s.measureText(t.textContent);w>0&&(f=`scaleX(${g*u(this,ao)/w}) ${f}`)}i.angle!==0&&(f=`rotate(${i.angle}deg) ${f}`),f.length>0&&(d.transform=f)},Mr=new WeakSet,Kp=function(e=null){let t=u(this,La).get(e||(e=""));if(!t){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),u(this,La).set(e,t)}return t},nx=function(){if(u(this,lo)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.textContent="X",document.body.append(e),x(this,lo,e.getBoundingClientRect().height),e.remove()},ix=function(e,t){const i=u(this,Pa).get(e);if(i)return i;const s=C(this,Mr,Kp).call(this,t),o=s.font;s.canvas.width=s.canvas.height=In,s.font=`${In}px ${e}`;const c=s.measureText("");let d=c.fontBoundingBoxAscent,f=Math.abs(c.fontBoundingBoxDescent);if(d){const y=d/(d+f);return u(this,Pa).set(e,y),s.canvas.width=s.canvas.height=0,s.font=o,y}s.strokeStyle="red",s.clearRect(0,0,In,In),s.strokeText("g",0,0);let p=s.getImageData(0,0,In,In).data;f=0;for(let y=p.length-1-3;y>=0;y-=4)if(p[y]>0){f=Math.ceil(y/4/In);break}s.clearRect(0,0,In,In),s.strokeText("A",0,In),p=s.getImageData(0,0,In,In).data,d=0;for(let y=0,w=p.length;y<w;y+=4)if(p[y]>0){d=In-Math.floor(y/4/In);break}s.canvas.width=s.canvas.height=0,s.font=o;const g=d?d/(d+f):aP;return u(this,Pa).set(e,g),g},T(Bt,Mr),T(Bt,Pa,new Map),T(Bt,La,new Map),T(Bt,lo,null),T(Bt,Mc,new Set),Bt);function lP(){gE("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:l,container:e,viewport:t,...i}=arguments[0],s=Object.keys(i);s.length>0&&$e("Ignoring `renderTextLayer` parameters: "+s.join(", "));const o=new Ag({textContentSource:l,container:e,viewport:t}),{textDivs:c,textContentItemsStr:d}=o;return{promise:o.render(),textDivs:c,textContentItemsStr:d}}function cP(){gE("`updateTextLayer`, please use `TextLayer` instead.")}class xd{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};function s(o){var f;if(!o)return;let c=null;const d=o.name;if(d==="#text")c=o.value;else if(xd.shouldBuildText(d))(f=o==null?void 0:o.attributes)!=null&&f.textContent?c=o.attributes.textContent:o.value&&(c=o.value);else return;if(c!==null&&t.push({str:c}),!!o.children)for(const p of o.children)s(p)}return s(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const uP=65536,dP=100,hP=5e3,fP=yn?xR:dR,pP=yn?_R:fE,gP=yn?ER:uR,mP=yn?CR:pE;function yP(l={}){typeof l=="string"||l instanceof URL?l={url:l}:(l instanceof ArrayBuffer||ArrayBuffer.isView(l))&&(l={data:l});const e=new Yv,{docId:t}=e,i=l.url?vP(l.url):null,s=l.data?wP(l.data):null,o=l.httpHeaders||null,c=l.withCredentials===!0,d=l.password??null,f=l.range instanceof rx?l.range:null,p=Number.isInteger(l.rangeChunkSize)&&l.rangeChunkSize>0?l.rangeChunkSize:uP;let g=l.worker instanceof cc?l.worker:null;const y=l.verbosity,w=typeof l.docBaseUrl=="string"&&!V0(l.docBaseUrl)?l.docBaseUrl:null,b=typeof l.cMapUrl=="string"?l.cMapUrl:null,A=l.cMapPacked!==!1,k=l.CMapReaderFactory||pP,_=typeof l.standardFontDataUrl=="string"?l.standardFontDataUrl:null,R=l.StandardFontDataFactory||mP,D=l.stopAtErrors!==!0,j=Number.isInteger(l.maxImageSize)&&l.maxImageSize>-1?l.maxImageSize:-1,z=l.isEvalSupported!==!1,B=typeof l.isOffscreenCanvasSupported=="boolean"?l.isOffscreenCanvasSupported:!yn,F=Number.isInteger(l.canvasMaxAreaInBytes)?l.canvasMaxAreaInBytes:-1,X=typeof l.disableFontFace=="boolean"?l.disableFontFace:yn,Y=l.fontExtraProperties===!0,Q=l.enableXfa===!0,ne=l.ownerDocument||globalThis.document,oe=l.disableRange===!0,_e=l.disableStream===!0,ge=l.disableAutoFetch===!0,de=l.pdfBug===!0,ie=l.enableHWA===!0,re=f?f.length:l.length??NaN,Z=typeof l.useSystemFonts=="boolean"?l.useSystemFonts:!yn&&!X,q=typeof l.useWorkerFetch=="boolean"?l.useWorkerFetch:k===fE&&R===pE&&b&&_&&ad(b,document.baseURI)&&ad(_,document.baseURI),ue=l.canvasFactory||new fP({ownerDocument:ne,enableHWA:ie}),ae=l.filterFactory||new gP({docId:t,ownerDocument:ne}),M=null;ZT(y);const $={canvasFactory:ue,filterFactory:ae};if(q||($.cMapReaderFactory=new k({baseUrl:b,isCompressed:A}),$.standardFontDataFactory=new R({baseUrl:_})),!g){const Se={verbosity:y,port:Es.workerPort};g=Se.port?cc.fromPort(Se):new cc(Se),e._worker=g}const le={docId:t,apiVersion:"4.4.168",data:s,password:d,disableAutoFetch:ge,rangeChunkSize:p,length:re,docBaseUrl:w,enableXfa:Q,evaluatorOptions:{maxImageSize:j,disableFontFace:X,ignoreErrors:D,isEvalSupported:z,isOffscreenCanvasSupported:B,canvasMaxAreaInBytes:F,fontExtraProperties:Y,useSystemFonts:Z,cMapUrl:q?b:null,standardFontDataUrl:q?_:null}},me={disableFontFace:X,fontExtraProperties:Y,ownerDocument:ne,pdfBug:de,styleElement:M,loadingParams:{disableAutoFetch:ge,enableXfa:Q}};return g.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Se=g.messageHandler.sendWithPromise("GetDocRequest",le,s?[s.buffer]:null);let Te;if(f)Te=new $R(f,{disableRange:oe,disableStream:_e});else if(!s){if(!i)throw new Error("getDocument - no `url` parameter provided.");Te=(De=>yn?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&ad(De.url)?new lS(De):new tP(De):ad(De.url)?new lS(De):new QR(De))({url:i,length:re,httpHeaders:o,withCredentials:c,rangeChunkSize:p,disableRange:oe,disableStream:_e})}return Se.then(Ce=>{if(e.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const De=new ud(t,Ce,g.port),He=new EP(De,e,Te,me,$);e._transport=He,De.send("Ready",null)})}).catch(e._capability.reject),e}function vP(l){if(l instanceof URL)return l.href;try{return new URL(l,window.location).href}catch{if(yn&&typeof l=="string")return l}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function wP(l){if(yn&&typeof Buffer<"u"&&l instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength)return l;if(typeof l=="string")return Zg(l);if(l instanceof ArrayBuffer||ArrayBuffer.isView(l)||typeof l=="object"&&!isNaN(l==null?void 0:l.length))return new Uint8Array(l);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function cS(l){return typeof l=="object"&&Number.isInteger(l==null?void 0:l.num)&&l.num>=0&&Number.isInteger(l==null?void 0:l.gen)&&l.gen>=0}var Fg;const Og=class Og{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Qn(Og,Fg)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(s){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,s}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Fg=new WeakMap,T(Og,Fg,0);let Yv=Og,rx=class{constructor(e,t,i=!1,s=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){ot("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class AP{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Qe(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var co,ls,Ri,ic,Yp;class bP{constructor(e,t,i,s=!1){T(this,Ri);T(this,co,null);T(this,ls,!1);this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=s?new Kb:null,this._pdfBug=s,this.commonObjs=i.commonObjs,this.objs=new sx,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:o=!1}={}){return new uf({viewBox:this.view,scale:e,rotation:t,offsetX:i,offsetY:s,dontFlip:o})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Qe(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:i="display",annotationMode:s=Zs.ENABLE,transform:o=null,background:c=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:g=null}){var j,z;(j=this._stats)==null||j.time("Overall");const y=this._transport.getRenderingIntent(i,s,g),{renderingIntent:w,cacheKey:b}=y;x(this,ls,!1),C(this,Ri,Yp).call(this),d||(d=this._transport.getOptionalContentConfig(w));let A=this._intentStates.get(b);A||(A=Object.create(null),this._intentStates.set(b,A)),A.streamReaderCancelTimeout&&(clearTimeout(A.streamReaderCancelTimeout),A.streamReaderCancelTimeout=null);const k=!!(w&Ti.PRINT);A.displayReadyCapability||(A.displayReadyCapability=Promise.withResolvers(),A.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(z=this._stats)==null||z.time("Page Request"),this._pumpOperatorList(y));const _=B=>{var F;A.renderTasks.delete(R),(this._maybeCleanupAfterRender||k)&&x(this,ls,!0),C(this,Ri,ic).call(this,!k),B?(R.capability.reject(B),this._abortOperatorList({intentState:A,reason:B instanceof Error?B:new Error(B)})):R.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(F=globalThis.Stats)!=null&&F.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},R=new Jv({callback:_,params:{canvasContext:e,viewport:t,transform:o,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:A.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!k,pdfBug:this._pdfBug,pageColors:p});(A.renderTasks||(A.renderTasks=new Set)).add(R);const D=R.task;return Promise.all([A.displayReadyCapability.promise,d]).then(([B,F])=>{var X;if(this.destroyed){_();return}if((X=this._stats)==null||X.time("Rendering"),!(F.renderingIntent&w))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");R.initializeGraphics({transparency:B,optionalContentConfig:F}),R.operatorListChanged()}).catch(_),D}getOperatorList({intent:e="display",annotationMode:t=Zs.ENABLE,printAnnotationStorage:i=null}={}){var f;function s(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(d))}const o=this._transport.getRenderingIntent(e,t,i,!0);let c=this._intentStates.get(o.cacheKey);c||(c=Object.create(null),this._intentStates.set(o.cacheKey,c));let d;return c.opListReadCapability||(d=Object.create(null),d.operatorListChanged=s,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||(c.renderTasks=new Set)).add(d),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(f=this._stats)==null||f.time("Page Request"),this._pumpOperatorList(o)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>xd.textContent(i));const t=this.streamTextContent(e);return new Promise(function(i,s){function o(){c.read().then(function({value:f,done:p}){if(p){i(d);return}d.lang??(d.lang=f.lang),Object.assign(d.styles,f.styles),d.items.push(...f.items),o()},s)}const c=t.getReader(),d={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),x(this,ls,!1),C(this,Ri,Yp).call(this),Promise.all(e)}cleanup(e=!1){x(this,ls,!0);const t=C(this,Ri,ic).call(this,!1);return e&&t&&this._stats&&(this._stats=new Kb),t}_startRenderPage(e,t){var s,o;const i=this._intentStates.get(t);i&&((s=this._stats)==null||s.timeEnd("Page Request"),(o=i.displayReadyCapability)==null||o.resolve(e))}_renderPageChunk(e,t){for(let i=0,s=e.length;i<s;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&C(this,Ri,ic).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i}){const{map:s,transfer:o}=i,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s},o).getReader(),f=this._intentStates.get(t);f.streamReader=d;const p=()=>{d.read().then(({value:g,done:y})=>{if(y){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,f),p())},g=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const y of f.renderTasks)y.operatorListChanged();C(this,Ri,ic).call(this,!0)}if(f.displayReadyCapability)f.displayReadyCapability.reject(g);else if(f.opListReadCapability)f.opListReadCapability.reject(g);else throw g}})};p()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof W0){let s=dP;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new pl(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,o]of this._intentStates)if(o===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}co=new WeakMap,ls=new WeakMap,Ri=new WeakSet,ic=function(e=!1){if(C(this,Ri,Yp).call(this),!u(this,ls)||this.destroyed)return!1;if(e)return x(this,co,setTimeout(()=>{x(this,co,null),C(this,Ri,ic).call(this,!1)},hP)),!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),x(this,ls,!1),!0},Yp=function(){u(this,co)&&(clearTimeout(u(this,co)),x(this,co,null))};var Ma,Ng;class SP{constructor(){T(this,Ma,new Set);T(this,Ng,Promise.resolve())}postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};u(this,Ng).then(()=>{for(const s of u(this,Ma))s.call(this,i)})}addEventListener(e,t){u(this,Ma).add(t)}removeEventListener(e,t){u(this,Ma).delete(t)}terminate(){u(this,Ma).clear()}}Ma=new WeakMap,Ng=new WeakMap;const Jr={isWorkerDisabled:!1,fakeWorkerId:0};yn&&(Jr.isWorkerDisabled=!0,Es.workerSrc||(Es.workerSrc="./pdf.worker.mjs")),Jr.isSameOrigin=function(l,e){let t;try{if(t=new URL(l),!t.origin||t.origin==="null")return!1}catch{return!1}const i=new URL(e,t);return t.origin===i.origin},Jr.createCDNWrapper=function(l){const e=`await import("${l}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};var Da,Dc,Qp,Ic,Jp;const ti=class ti{constructor({name:e=null,port:t=null,verbosity:i=eR()}={}){T(this,Dc);var s;if(this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((s=u(ti,Da))!=null&&s.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(u(ti,Da)||x(ti,Da,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return yn?Promise.all([Dr.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new ud("main","worker",e),this._messageHandler.on("ready",function(){}),C(this,Dc,Qp).call(this)}_initialize(){if(Jr.isWorkerDisabled||u(ti,Ic,Jp)){this._setupFakeWorker();return}let{workerSrc:e}=ti;try{Jr.isSameOrigin(window.location.href,e)||(e=Jr.createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new ud("main","worker",t),s=()=>{o.abort(),i.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=new AbortController;t.addEventListener("error",()=>{this._webWorker||s()},{signal:o.signal}),i.on("test",d=>{if(o.abort(),this.destroyed||!d){s();return}this._messageHandler=i,this._port=t,this._webWorker=t,C(this,Dc,Qp).call(this)}),i.on("ready",d=>{if(o.abort(),this.destroyed){s();return}try{c()}catch{this._setupFakeWorker()}});const c=()=>{const d=new Uint8Array;i.send("test",d,[d.buffer])};c();return}catch{Qg("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){Jr.isWorkerDisabled||($e("Setting up fake worker."),Jr.isWorkerDisabled=!0),ti._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new SP;this._port=t;const i=`fake${Jr.fakeWorkerId++}`,s=new ud(i+"_worker",i,t);e.setup(s,t),this._messageHandler=new ud(i,i+"_worker",t),C(this,Dc,Qp).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=u(ti,Da))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var i;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(i=u(this,Da))==null?void 0:i.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new ti(e)}static get workerSrc(){if(Es.workerSrc)return Es.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Qe(this,"_setupFakeWorkerGlobal",(async()=>u(this,Ic,Jp)?u(this,Ic,Jp):(await import(this.workerSrc)).WorkerMessageHandler)())}};Da=new WeakMap,Dc=new WeakSet,Qp=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Ic=new WeakSet,Jp=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},T(ti,Ic),T(ti,Da);let cc=ti;var cs,br,Fc,Oc,Sr,Ia,dd;class EP{constructor(e,t,i,s,o){T(this,Ia);T(this,cs,new Map);T(this,br,new Map);T(this,Fc,new Map);T(this,Oc,new Map);T(this,Sr,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new sx,this.fontLoader=new bR({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Qe(this,"annotationStorage",new X0)}getRenderingIntent(e,t=Zs.ENABLE,i=null,s=!1){let o=Ti.DISPLAY,c=Uv;switch(e){case"any":o=Ti.ANY;break;case"display":break;case"print":o=Ti.PRINT;break;default:$e(`getRenderingIntent - invalid intent: ${e}`)}switch(t){case Zs.DISABLE:o+=Ti.ANNOTATIONS_DISABLE;break;case Zs.ENABLE:break;case Zs.ENABLE_FORMS:o+=Ti.ANNOTATIONS_FORMS;break;case Zs.ENABLE_STORAGE:o+=Ti.ANNOTATIONS_STORAGE,c=(o&Ti.PRINT&&i instanceof $E?i:this.annotationStorage).serializable;break;default:$e(`getRenderingIntent - invalid annotationMode: ${t}`)}return s&&(o+=Ti.OPLIST),{renderingIntent:o,cacheKey:`${o}_${c.hash}`,annotationStorageSerializable:c}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=u(this,Sr))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of u(this,br).values())e.push(s._destroy());u(this,br).clear(),u(this,Fc).clear(),u(this,Oc).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s;this.commonObjs.clear(),this.fontLoader.clear(),u(this,cs).clear(),this.filterFactory.destroy(),Ag.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new pl("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(i,s)=>{Ht(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},s.onPull=()=>{this._fullReader.read().then(function({value:o,done:c}){if(c){s.close();return}Ht(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{this._fullReader.cancel(o),s.ready.catch(c=>{if(!this.destroyed)throw c})}}),e.on("ReaderHeadersReady",i=>{const s=Promise.withResolvers(),o=this._fullReader;return o.headersReady.then(()=>{var c;(!o.isStreamingSupported||!o.isRangeSupported)&&(this._lastProgress&&((c=t.onProgress)==null||c.call(t,this._lastProgress)),o.onProgress=d=>{var f;(f=t.onProgress)==null||f.call(t,{loaded:d.loaded,total:d.total})}),s.resolve({isStreamingSupported:o.isStreamingSupported,isRangeSupported:o.isRangeSupported,contentLength:o.contentLength})},s.reject),s.promise}),e.on("GetRangeReader",(i,s)=>{Ht(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(i.begin,i.end);if(!o){s.close();return}s.onPull=()=>{o.read().then(function({value:c,done:d}){if(d){s.close();return}Ht(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{s.error(c)})},s.onCancel=c=>{o.cancel(c),s.ready.catch(d=>{if(!this.destroyed)throw d})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new AP(i,this))}),e.on("DocException",function(i){let s;switch(i.name){case"PasswordException":s=new wv(i.message,i.code);break;case"InvalidPDFException":s=new cE(i.message);break;case"MissingPDFException":s=new fl(i.message);break;case"UnexpectedResponseException":s=new Jg(i.message,i.status);break;case"UnknownErrorException":s=new Av(i.message,i.details);break;default:ot("DocException - expected a valid Error.")}t._capability.reject(s)}),e.on("PasswordRequest",i=>{if(x(this,Sr,Promise.withResolvers()),t.onPassword){const s=o=>{o instanceof Error?u(this,Sr).reject(o):u(this,Sr).resolve({password:o})};try{t.onPassword(s,i.code)}catch(o){u(this,Sr).reject(o)}}else u(this,Sr).reject(new wv(i.message,i.code));return u(this,Sr).promise}),e.on("DataLoaded",i=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;u(this,br).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,s,o])=>{var c;if(this.destroyed||this.commonObjs.has(i))return null;switch(s){case"Font":const{disableFontFace:d,fontExtraProperties:f,pdfBug:p}=this._params;if("error"in o){const b=o.error;$e(`Error during font loading: ${b}`),this.commonObjs.resolve(i,b);break}const g=p&&((c=globalThis.FontInspector)!=null&&c.enabled)?(b,A)=>globalThis.FontInspector.fontAdded(b,A):null,y=new SR(o,{disableFontFace:d,inspectFont:g});this.fontLoader.bind(y).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!f&&y.data&&(y.data=null),this.commonObjs.resolve(i,y)});break;case"CopyLocalImage":const{imageRef:w}=o;Ht(w,"The imageRef must be defined.");for(const b of u(this,br).values())for(const[,A]of b.objs)if((A==null?void 0:A.ref)===w)return A.dataLen?(this.commonObjs.resolve(i,structuredClone(A)),A.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,o);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([i,s,o,c])=>{var f;if(this.destroyed)return;const d=u(this,br).get(s);if(!d.objs.has(i)){if(d._intentStates.size===0){(f=c==null?void 0:c.bitmap)==null||f.close();return}switch(o){case"Image":d.objs.resolve(i,c),(c==null?void 0:c.dataLen)>KT&&(d._maybeCleanupAfterRender=!0);break;case"Pattern":d.objs.resolve(i,c);break;default:throw new Error(`Got unknown object type ${o}`)}}}),e.on("DocProgress",i=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:i.loaded,total:i.total})}),e.on("FetchBuiltInCMap",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(i):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(i):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&$e("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((i=this._fullReader)==null?void 0:i.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=u(this,Fc).get(t);if(i)return i;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&u(this,Oc).set(o.refStr,e);const c=new bP(t,o,this,this._params.pdfBug);return u(this,br).set(t,c),c});return u(this,Fc).set(t,s),s}getPageIndex(e){return cS(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return C(this,Ia,dd).call(this,"GetFieldObjects")}hasJSActions(){return C(this,Ia,dd).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return C(this,Ia,dd).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return C(this,Ia,dd).call(this,"GetOptionalContentConfig").then(t=>new UR(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=u(this,cs).get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(s=>{var o,c;return{info:s[0],metadata:s[1]?new BR(s[1]):null,contentDispositionFilename:((o=this._fullReader)==null?void 0:o.filename)??null,contentLength:((c=this._fullReader)==null?void 0:c.contentLength)??null}});return u(this,cs).set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of u(this,br).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),u(this,cs).clear(),this.filterFactory.destroy(!0),Ag.cleanup()}}cachedPageNumber(e){if(!cS(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return u(this,Oc).get(t)??null}}cs=new WeakMap,br=new WeakMap,Fc=new WeakMap,Oc=new WeakMap,Sr=new WeakMap,Ia=new WeakSet,dd=function(e,t=null){const i=u(this,cs).get(e);if(i)return i;const s=this.messageHandler.sendWithPromise(e,t);return u(this,cs).set(e,s),s};const Ip=Symbol("INITIAL_DATA");var Yi,ph,Qv;class sx{constructor(){T(this,ph);T(this,Yi,Object.create(null))}get(e,t=null){if(t){const s=C(this,ph,Qv).call(this,e);return s.promise.then(()=>t(s.data)),null}const i=u(this,Yi)[e];if(!i||i.data===Ip)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=u(this,Yi)[e];return!!t&&t.data!==Ip}resolve(e,t=null){const i=C(this,ph,Qv).call(this,e);i.data=t,i.resolve()}clear(){var e;for(const t in u(this,Yi)){const{data:i}=u(this,Yi)[t];(e=i==null?void 0:i.bitmap)==null||e.close()}x(this,Yi,Object.create(null))}*[Symbol.iterator](){for(const e in u(this,Yi)){const{data:t}=u(this,Yi)[e];t!==Ip&&(yield[e,t])}}}Yi=new WeakMap,ph=new WeakSet,Qv=function(e){var t;return(t=u(this,Yi))[e]||(t[e]={...Promise.withResolvers(),data:Ip})};var uo;class xP{constructor(e){T(this,uo,null);x(this,uo,e),this.onContinue=null}get promise(){return u(this,uo).capability.promise}cancel(e=0){u(this,uo).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=u(this,uo).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=u(this,uo);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}uo=new WeakMap;var ho,Fa;const aa=class aa{constructor({callback:e,params:t,objs:i,commonObjs:s,annotationCanvasMap:o,operatorList:c,pageIndex:d,canvasFactory:f,filterFactory:p,useRequestAnimationFrame:g=!1,pdfBug:y=!1,pageColors:w=null}){T(this,ho,null);this.callback=e,this.params=t,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=d,this.canvasFactory=f,this.filterFactory=p,this._pdfBug=y,this.pageColors=w,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new xP(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var d,f;if(this.cancelled)return;if(this._canvas){if(u(aa,Fa).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");u(aa,Fa).add(this._canvas)}this._pdfBug&&((d=globalThis.StepperManager)!=null&&d.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:s,transform:o,background:c}=this.params;this.gfx=new lc(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:s,transparency:e,background:c}),this.operatorListIdx=0,this.graphicsReady=!0,(f=this.graphicsReadyCallback)==null||f.call(this)}cancel(e=null,t=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),u(this,ho)&&(window.cancelAnimationFrame(u(this,ho)),x(this,ho,null)),u(aa,Fa).delete(this._canvas),this.callback(e||new W0(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?x(this,ho,window.requestAnimationFrame(()=>{x(this,ho,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),u(aa,Fa).delete(this._canvas),this.callback())))}};ho=new WeakMap,Fa=new WeakMap,T(aa,Fa,new WeakSet);let Jv=aa;const _P="4.4.168",CP="19fbc8998";function uS(l){return Math.floor(Math.max(0,Math.min(1,l))*255).toString(16).padStart(2,"0")}function Zu(l){return Math.max(0,Math.min(255,255*l))}class dS{static CMYK_G([e,t,i,s]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Zu(e),[e,e,e]}static G_HTML([e]){const t=uS(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(Zu)}static RGB_HTML(e){return`#${e.map(uS).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,i+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,i,s]){return[Zu(1-Math.min(1,e+s)),Zu(1-Math.min(1,i+s)),Zu(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const s=1-e,o=1-t,c=1-i,d=Math.min(s,o,c);return["CMYK",s,o,c,d]}}class ox{static setupStorage(e,t,i,s,o){const c=s.getValue(t,{value:null});switch(i.name){case"textarea":if(c.value!==null&&(e.textContent=c.value),o==="print")break;e.addEventListener("input",d=>{s.setValue(t,{value:d.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(c.value===i.attributes.xfaOn?e.setAttribute("checked",!0):c.value===i.attributes.xfaOff&&e.removeAttribute("checked"),o==="print")break;e.addEventListener("change",d=>{s.setValue(t,{value:d.target.checked?d.target.getAttribute("xfaOn"):d.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&e.setAttribute("value",c.value),o==="print")break;e.addEventListener("input",d=>{s.setValue(t,{value:d.target.value})})}break;case"select":if(c.value!==null){e.setAttribute("value",c.value);for(const d of i.children)d.attributes.value===c.value?d.attributes.selected=!0:d.attributes.hasOwnProperty("selected")&&delete d.attributes.selected}e.addEventListener("input",d=>{const f=d.target.options,p=f.selectedIndex===-1?"":f[f.selectedIndex].value;s.setValue(t,{value:p})});break}}static setAttributes({html:e,element:t,storage:i=null,intent:s,linkService:o}){const{attributes:c}=t,d=e instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${s}`);for(const[f,p]of Object.entries(c))if(p!=null)switch(f){case"class":p.length&&e.setAttribute(f,p.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",p);break;case"style":Object.assign(e.style,p);break;case"textContent":e.textContent=p;break;default:(!d||f!=="href"&&f!=="newWindow")&&e.setAttribute(f,p)}d&&o.addLinkAttributes(e,c.href,c.newWindow),i&&c.dataId&&this.setupStorage(e,c.dataId,t,i)}static render(e){var y,w;const t=e.annotationStorage,i=e.linkService,s=e.xfaHtml,o=e.intent||"display",c=document.createElement(s.name);s.attributes&&this.setAttributes({html:c,element:s,intent:o,linkService:i});const d=o!=="richText",f=e.div;if(f.append(c),e.viewport){const b=`matrix(${e.viewport.transform.join(",")})`;f.style.transform=b}d&&f.setAttribute("class","xfaLayer xfaFont");const p=[];if(s.children.length===0){if(s.value){const b=document.createTextNode(s.value);c.append(b),d&&xd.shouldBuildText(s.name)&&p.push(b)}return{textDivs:p}}const g=[[s,-1,c]];for(;g.length>0;){const[b,A,k]=g.at(-1);if(A+1===b.children.length){g.pop();continue}const _=b.children[++g.at(-1)[1]];if(_===null)continue;const{name:R}=_;if(R==="#text"){const j=document.createTextNode(_.value);p.push(j),k.append(j);continue}const D=(y=_==null?void 0:_.attributes)!=null&&y.xmlns?document.createElementNS(_.attributes.xmlns,R):document.createElement(R);if(k.append(D),_.attributes&&this.setAttributes({html:D,element:_,storage:t,intent:o,linkService:i}),((w=_.children)==null?void 0:w.length)>0)g.push([_,-1,D]);else if(_.value){const j=document.createTextNode(_.value);d&&xd.shouldBuildText(R)&&p.push(j),D.append(j)}}for(const b of f.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))b.setAttribute("readOnly",!0);return{textDivs:p}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const ff=1e3,kP=9,cl=new WeakSet;function xs(l){return{width:l[2]-l[0],height:l[3]-l[1]}}class TP{static create(e){switch(e.data.annotationType){case Ft.LINK:return new ax(e);case Ft.TEXT:return new RP(e);case Ft.WIDGET:switch(e.data.fieldType){case"Tx":return new PP(e);case"Btn":return e.data.radioButton?new ux(e):e.data.checkBox?new MP(e):new DP(e);case"Ch":return new IP(e);case"Sig":return new LP(e)}return new gl(e);case Ft.POPUP:return new e0(e);case Ft.FREETEXT:return new gx(e);case Ft.LINE:return new OP(e);case Ft.SQUARE:return new NP(e);case Ft.CIRCLE:return new jP(e);case Ft.POLYLINE:return new mx(e);case Ft.CARET:return new BP(e);case Ft.INK:return new yx(e);case Ft.POLYGON:return new zP(e);case Ft.HIGHLIGHT:return new HP(e);case Ft.UNDERLINE:return new UP(e);case Ft.SQUIGGLY:return new $P(e);case Ft.STRIKEOUT:return new WP(e);case Ft.STAMP:return new vx(e);case Ft.FILEATTACHMENT:return new VP(e);default:return new kt(e)}}}var Oa,Nc,jc,gh,Zv;const tw=class tw{constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:s=!1}={}){T(this,gh);T(this,Oa,null);T(this,Nc,!1);T(this,jc,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:i}){return!!(e!=null&&e.str||t!=null&&t.str||i!=null&&i.str)}get hasPopupData(){return tw._hasPopupData(this.data)}updateEdited(e){var i;if(!this.container)return;u(this,Oa)||x(this,Oa,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&C(this,gh,Zv).call(this,t),(i=u(this,jc))==null||i.popup.updateEdited(e)}resetEdited(){var e;u(this,Oa)&&(C(this,gh,Zv).call(this,u(this,Oa).rect),(e=u(this,jc))==null||e.popup.resetEdited(),x(this,Oa,null))}_createContainer(e){const{data:t,parent:{page:i,viewport:s}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",t.id),this instanceof gl||(o.tabIndex=ff);const{style:c}=o;if(c.zIndex=this.parent.zIndex++,t.popupRef&&o.setAttribute("aria-haspopup","dialog"),t.alternativeText&&(o.title=t.alternativeText),t.noRotate&&o.classList.add("norotate"),!t.rect||this instanceof e0){const{rotation:k}=t;return!t.hasOwnCanvas&&k!==0&&this.setRotation(k,o),o}const{width:d,height:f}=xs(t.rect);if(!e&&t.borderStyle.width>0){c.borderWidth=`${t.borderStyle.width}px`;const k=t.borderStyle.horizontalCornerRadius,_=t.borderStyle.verticalCornerRadius;if(k>0||_>0){const D=`calc(${k}px * var(--scale-factor)) / calc(${_}px * var(--scale-factor))`;c.borderRadius=D}else if(this instanceof ux){const D=`calc(${d}px * var(--scale-factor)) / calc(${f}px * var(--scale-factor))`;c.borderRadius=D}switch(t.borderStyle.style){case Qu.SOLID:c.borderStyle="solid";break;case Qu.DASHED:c.borderStyle="dashed";break;case Qu.BEVELED:$e("Unimplemented border style: beveled");break;case Qu.INSET:$e("Unimplemented border style: inset");break;case Qu.UNDERLINE:c.borderBottomStyle="solid";break}const R=t.borderColor||null;R?(x(this,Nc,!0),c.borderColor=Ee.makeHexColor(R[0]|0,R[1]|0,R[2]|0)):c.borderWidth=0}const p=Ee.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:g,pageHeight:y,pageX:w,pageY:b}=s.rawDims;c.left=`${100*(p[0]-w)/g}%`,c.top=`${100*(p[1]-b)/y}%`;const{rotation:A}=t;return t.hasOwnCanvas||A===0?(c.width=`${100*d/g}%`,c.height=`${100*f/y}%`):this.setRotation(A,o),o}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:s}=this.parent.viewport.rawDims,{width:o,height:c}=xs(this.data.rect);let d,f;e%180===0?(d=100*o/i,f=100*c/s):(d=100*c/i,f=100*o/s),t.style.width=`${d}%`,t.style.height=`${f}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,i,s)=>{const o=s.detail[t],c=o[0],d=o.slice(1);s.target.style[i]=dS[`${c}_HTML`](d),this.annotationStorage.setValue(this.data.id,{[i]:dS[`${c}_rgb`](d)})};return Qe(this,"_commonActions",{display:t=>{const{display:i}=t.detail,s=i%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:i===1||i===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const s of Object.keys(t.detail)){const o=e[s]||i[s];o==null||o(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[s,o]of Object.entries(t)){const c=i[s];if(c){const d={detail:{[s]:o},target:e};c(d),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,s,o]=this.data.rect.map(k=>Math.fround(k));if(e.length===8){const[k,_,R,D]=e.subarray(2,6);if(s===k&&o===_&&t===R&&i===D)return}const{style:c}=this.container;let d;if(u(this,Nc)){const{borderColor:k,borderWidth:_}=c;c.borderWidth=0,d=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${k}" stroke-width="${_}">`],this.container.classList.add("hasBorder")}const f=s-t,p=o-i,{svgFactory:g}=this,y=g.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0);const w=g.createElement("defs");y.append(w);const b=g.createElement("clipPath"),A=`clippath_${this.data.id}`;b.setAttribute("id",A),b.setAttribute("clipPathUnits","objectBoundingBox"),w.append(b);for(let k=2,_=e.length;k<_;k+=8){const R=e[k],D=e[k+1],j=e[k+2],z=e[k+3],B=g.createElement("rect"),F=(j-t)/f,X=(o-D)/p,Y=(R-j)/f,Q=(D-z)/p;B.setAttribute("x",F),B.setAttribute("y",X),B.setAttribute("width",Y),B.setAttribute("height",Q),b.append(B),d==null||d.push(`<rect vector-effect="non-scaling-stroke" x="${F}" y="${X}" width="${Y}" height="${Q}"/>`)}u(this,Nc)&&(d.push("</g></svg>')"),c.backgroundImage=d.join("")),this.container.append(y),this.container.style.clipPath=`url(#${A})`}_createPopup(){const{container:e,data:t}=this;e.setAttribute("aria-haspopup","dialog");const i=x(this,jc,new e0({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(i.render())}render(){ot("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:o,id:c,exportValues:d}of s){if(o===-1||c===t)continue;const f=typeof d=="string"?d:null,p=document.querySelector(`[data-element-id="${c}"]`);if(p&&!cl.has(p)){$e(`_getElementsByName - element not allowed: ${c}`);continue}i.push({id:c,exportValue:f,domElement:p})}return i}for(const s of document.getElementsByName(e)){const{exportValue:o}=s,c=s.getAttribute("data-element-id");c!==t&&cl.has(s)&&i.push({id:c,exportValue:o,domElement:s})}return i}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};Oa=new WeakMap,Nc=new WeakMap,jc=new WeakMap,gh=new WeakSet,Zv=function(e){const{container:{style:t},data:{rect:i,rotation:s},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:c,pageX:d,pageY:f}}}}=this;i==null||i.splice(0,4,...e);const{width:p,height:g}=xs(e);t.left=`${100*(e[0]-d)/o}%`,t.top=`${100*(c-e[3]+f)/c}%`,s===0?(t.width=`${100*p/o}%`,t.height=`${100*g/c}%`):this.setRotation(s)};let kt=tw;var di,ia,lx,cx;class ax extends kt{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});T(this,di);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let o=!1;return t.url?(i.addLinkAttributes(s,t.url,t.newWindow),o=!0):t.action?(this._bindNamedAction(s,t.action),o=!0):t.attachment?(C(this,di,lx).call(this,s,t.attachment,t.attachmentDest),o=!0):t.setOCGState?(C(this,di,cx).call(this,s,t.setOCGState),o=!0):t.dest?(this._bindLink(s,t.dest),o=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),o=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(s,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&this.container.append(s),this.container}_bindLink(t,i){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&C(this,di,ia).call(this)}_bindNamedAction(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),C(this,di,ia).call(this)}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(i.actions)){const c=s.get(o);c&&(t[c]=()=>{var d;return(d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:o}}),!1})}t.onclick||(t.onclick=()=>!1),C(this,di,ia).call(this)}_bindResetFormAction(t,i){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),C(this,di,ia).call(this),!this._fieldObjects){$e('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var y;s==null||s();const{fields:o,refs:c,include:d}=i,f=[];if(o.length!==0||c.length!==0){const w=new Set(c);for(const b of o){const A=this._fieldObjects[b]||[];for(const{id:k}of A)w.add(k)}for(const b of Object.values(this._fieldObjects))for(const A of b)w.has(A.id)===d&&f.push(A)}else for(const w of Object.values(this._fieldObjects))f.push(...w);const p=this.annotationStorage,g=[];for(const w of f){const{id:b}=w;switch(g.push(b),w.type){case"text":{const k=w.defaultValue||"";p.setValue(b,{value:k});break}case"checkbox":case"radiobutton":{const k=w.defaultValue===w.exportValues;p.setValue(b,{value:k});break}case"combobox":case"listbox":{const k=w.defaultValue||"";p.setValue(b,{value:k});break}default:continue}const A=document.querySelector(`[data-element-id="${b}"]`);if(A){if(!cl.has(A)){$e(`_bindResetFormAction - element not allowed: ${b}`);continue}}else continue;A.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:g,name:"ResetForm"}})),!1}}}di=new WeakSet,ia=function(){this.container.setAttribute("data-internal-link","")},lx=function(t,i,s=null){t.href=this.linkService.getAnchorUrl(""),i.description&&(t.title=i.description),t.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(i.content,i.filename,s),!1},C(this,di,ia).call(this)},cx=function(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),C(this,di,ia).call(this)};class RP extends kt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class gl extends kt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return zn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,s,o){i.includes("mouse")?e.addEventListener(i,c=>{var d;(d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:o(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):e.addEventListener(i,c=>{var d;if(i==="blur"){if(!t.focused||!c.relatedTarget)return;t.focused=!1}else if(i==="focus"){if(t.focused)return;t.focused=!0}o&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:o(c)}}))})}_setEventListeners(e,t,i,s){var o,c,d;for(const[f,p]of i)(p==="Action"||(o=this.data.actions)!=null&&o[p])&&((p==="Focus"||p==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,f,p,s),p==="Focus"&&!((c=this.data.actions)!=null&&c.Blur)?this._setEventListener(e,t,"blur","Blur",null):p==="Blur"&&!((d=this.data.actions)!=null&&d.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Ee.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||kP,o=e.style;let c;const d=2,f=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-d),g=Math.round(p/(rv*s))||1,y=p/g;c=Math.min(s,f(y/rv))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-d);c=Math.min(s,f(p/rv))}o.fontSize=`calc(${c}px * var(--scale-factor))`,o.color=Ee.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(o.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class PP extends gl{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,i,s){const o=this.annotationStorage;for(const c of this._getElementsByName(e.name,e.id))c.domElement&&(c.domElement[t]=i),o.setValue(c.id,{[s]:i})}render(){var s,o;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const c=e.getValue(t,{value:this.data.fieldValue});let d=c.value||"";const f=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;f&&d.length>f&&(d=d.slice(0,f));let p=c.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;p&&this.data.comb&&(p=p.replaceAll(/\s+/g,""));const g={userValue:d,formattedValue:p,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=p??d,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",p??d),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),cl.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=ff,this._setRequired(i,this.data.required),f&&(i.maxLength=f),i.addEventListener("input",w=>{e.setValue(t,{value:w.target.value}),this.setPropertyOnSiblings(i,"value",w.target.value,"value"),g.formattedValue=null}),i.addEventListener("resetform",w=>{const b=this.data.defaultFieldValue??"";i.value=g.userValue=b,g.formattedValue=null});let y=w=>{const{formattedValue:b}=g;b!=null&&(w.target.value=b),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",b=>{var k;if(g.focused)return;const{target:A}=b;g.userValue&&(A.value=g.userValue),g.lastCommittedValue=A.value,g.commitKey=1,(k=this.data.actions)!=null&&k.Focus||(g.focused=!0)}),i.addEventListener("updatefromsandbox",b=>{this.showElementAndHideCanvas(b.target);const A={value(k){g.userValue=k.detail.value??"",e.setValue(t,{value:g.userValue.toString()}),k.target.value=g.userValue},formattedValue(k){const{formattedValue:_}=k.detail;g.formattedValue=_,_!=null&&k.target!==document.activeElement&&(k.target.value=_),e.setValue(t,{formattedValue:_})},selRange(k){k.target.setSelectionRange(...k.detail.selRange)},charLimit:k=>{var j;const{charLimit:_}=k.detail,{target:R}=k;if(_===0){R.removeAttribute("maxLength");return}R.setAttribute("maxLength",_);let D=g.userValue;!D||D.length<=_||(D=D.slice(0,_),R.value=g.userValue=D,e.setValue(t,{value:D}),(j=this.linkService.eventBus)==null||j.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:D,willCommit:!0,commitKey:1,selStart:R.selectionStart,selEnd:R.selectionEnd}}))}};this._dispatchEventFromSandbox(A,b)}),i.addEventListener("keydown",b=>{var _;g.commitKey=1;let A=-1;if(b.key==="Escape"?A=0:b.key==="Enter"&&!this.data.multiLine?A=2:b.key==="Tab"&&(g.commitKey=3),A===-1)return;const{value:k}=b.target;g.lastCommittedValue!==k&&(g.lastCommittedValue=k,g.userValue=k,(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:k,willCommit:!0,commitKey:A,selStart:b.target.selectionStart,selEnd:b.target.selectionEnd}}))});const w=y;y=null,i.addEventListener("blur",b=>{var k,_;if(!g.focused||!b.relatedTarget)return;(k=this.data.actions)!=null&&k.Blur||(g.focused=!1);const{value:A}=b.target;g.userValue=A,g.lastCommittedValue!==A&&((_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:g.commitKey,selStart:b.target.selectionStart,selEnd:b.target.selectionEnd}})),w(b)}),(o=this.data.actions)!=null&&o.Keystroke&&i.addEventListener("beforeinput",b=>{var B;g.lastCommittedValue=null;const{data:A,target:k}=b,{value:_,selectionStart:R,selectionEnd:D}=k;let j=R,z=D;switch(b.inputType){case"deleteWordBackward":{const F=_.substring(0,R).match(/\w*[^\w]*$/);F&&(j-=F[0].length);break}case"deleteWordForward":{const F=_.substring(R).match(/^[^\w]*\w*/);F&&(z+=F[0].length);break}case"deleteContentBackward":R===D&&(j-=1);break;case"deleteContentForward":R===D&&(z+=1);break}b.preventDefault(),(B=this.linkService.eventBus)==null||B.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,change:A||"",willCommit:!1,selStart:j,selEnd:z}})}),this._setEventListeners(i,g,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],b=>b.target.value)}if(y&&i.addEventListener("blur",y),this.data.comb){const b=(this.data.rect[2]-this.data.rect[0])/f;i.classList.add("comb"),i.style.letterSpacing=`calc(${b}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class LP extends gl{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class MP extends gl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let s=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(i,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return cl.add(o),o.setAttribute("data-element-id",i),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=t.fieldName,s&&o.setAttribute("checked",!0),o.setAttribute("exportValue",t.exportValue),o.tabIndex=ff,o.addEventListener("change",c=>{const{name:d,checked:f}=c.target;for(const p of this._getElementsByName(d,i)){const g=f&&p.exportValue===t.exportValue;p.domElement&&(p.domElement.checked=g),e.setValue(p.id,{value:g})}e.setValue(i,{value:f})}),o.addEventListener("resetform",c=>{const d=t.defaultFieldValue||"Off";c.target.checked=d===t.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",c=>{const d={value(f){f.target.checked=f.detail.value!=="Off",e.setValue(i,{value:f.target.checked})}};this._dispatchEventFromSandbox(d,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class ux extends gl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let s=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(i,{value:s})),s)for(const c of this._getElementsByName(t.fieldName,i))e.setValue(c.id,{value:!1});const o=document.createElement("input");if(cl.add(o),o.setAttribute("data-element-id",i),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=t.fieldName,s&&o.setAttribute("checked",!0),o.tabIndex=ff,o.addEventListener("change",c=>{const{name:d,checked:f}=c.target;for(const p of this._getElementsByName(d,i))e.setValue(p.id,{value:!1});e.setValue(i,{value:f})}),o.addEventListener("resetform",c=>{const d=t.defaultFieldValue;c.target.checked=d!=null&&d===t.buttonValue}),this.enableScripting&&this.hasJSActions){const c=t.buttonValue;o.addEventListener("updatefromsandbox",d=>{const f={value:p=>{const g=c===p.detail.value;for(const y of this._getElementsByName(p.target.name)){const w=g&&y.id===i;y.domElement&&(y.domElement.checked=w),e.setValue(y.id,{value:w})}}};this._dispatchEventFromSandbox(f,d)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],d=>d.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class DP extends ax{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class IP extends gl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");cl.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=ff;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue;for(const w of s.options)w.selected=w.value===y});for(const g of this.data.options){const y=document.createElement("option");y.textContent=g.displayValue,y.value=g.exportValue,i.value.includes(g.exportValue)&&(y.setAttribute("selected",!0),o=!1),s.append(y)}let c=null;if(o){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),s.prepend(g),c=()=>{g.remove(),s.removeEventListener("input",c),c=null},s.addEventListener("input",c)}const d=g=>{const y=g?"value":"textContent",{options:w,multiple:b}=s;return b?Array.prototype.filter.call(w,A=>A.selected).map(A=>A[y]):w.selectedIndex===-1?null:w[w.selectedIndex][y]};let f=d(!1);const p=g=>{const y=g.target.options;return Array.prototype.map.call(y,w=>({displayValue:w.textContent,exportValue:w.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",g=>{const y={value(w){c==null||c();const b=w.detail.value,A=new Set(Array.isArray(b)?b:[b]);for(const k of s.options)k.selected=A.has(k.value);e.setValue(t,{value:d(!0)}),f=d(!1)},multipleSelection(w){s.multiple=!0},remove(w){const b=s.options,A=w.detail.remove;b[A].selected=!1,s.remove(A),b.length>0&&Array.prototype.findIndex.call(b,_=>_.selected)===-1&&(b[0].selected=!0),e.setValue(t,{value:d(!0),items:p(w)}),f=d(!1)},clear(w){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),f=d(!1)},insert(w){const{index:b,displayValue:A,exportValue:k}=w.detail.insert,_=s.children[b],R=document.createElement("option");R.textContent=A,R.value=k,_?_.before(R):s.append(R),e.setValue(t,{value:d(!0),items:p(w)}),f=d(!1)},items(w){const{items:b}=w.detail;for(;s.length!==0;)s.remove(0);for(const A of b){const{displayValue:k,exportValue:_}=A,R=document.createElement("option");R.textContent=k,R.value=_,s.append(R)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:d(!0),items:p(w)}),f=d(!1)},indices(w){const b=new Set(w.detail.indices);for(const A of w.target.options)A.selected=b.has(A.index);e.setValue(t,{value:d(!0)}),f=d(!1)},editable(w){w.target.disabled=!w.detail.editable}};this._dispatchEventFromSandbox(y,g)}),s.addEventListener("input",g=>{var b;const y=d(!0),w=d(!1);e.setValue(t,{value:y}),g.preventDefault(),(b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:f,change:w,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):s.addEventListener("input",function(g){e.setValue(t,{value:d(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class e0 extends kt{constructor(e){const{data:t,elements:i}=e;super(e,{isRenderable:kt._hasPopupData(t)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new FP({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const i of this.elements)i.popup=e,t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(i=>`${dE}${i}`).join(",")),this.container}}var zc,jg,zg,Bc,Na,Et,us,ja,mh,yh,Hc,ds,Qi,hs,vh,fs,wh,za,Ba,at,Zp,t0,dx,hx,fx,px,eg,tg,n0;class FP{constructor({container:e,color:t,elements:i,titleObj:s,modificationDate:o,contentsObj:c,richText:d,parent:f,rect:p,parentRect:g,open:y}){T(this,at);T(this,zc,C(this,at,fx).bind(this));T(this,jg,C(this,at,n0).bind(this));T(this,zg,C(this,at,tg).bind(this));T(this,Bc,C(this,at,eg).bind(this));T(this,Na,null);T(this,Et,null);T(this,us,null);T(this,ja,null);T(this,mh,null);T(this,yh,null);T(this,Hc,null);T(this,ds,!1);T(this,Qi,null);T(this,hs,null);T(this,vh,null);T(this,fs,null);T(this,wh,null);T(this,za,null);T(this,Ba,!1);var w;x(this,Et,e),x(this,wh,s),x(this,us,c),x(this,fs,d),x(this,yh,f),x(this,Na,t),x(this,vh,p),x(this,Hc,g),x(this,mh,i),x(this,ja,mE.toDateObject(o)),this.trigger=i.flatMap(b=>b.getElementsToTriggerPopup());for(const b of this.trigger)b.addEventListener("click",u(this,Bc)),b.addEventListener("mouseenter",u(this,zg)),b.addEventListener("mouseleave",u(this,jg)),b.classList.add("popupTriggerArea");for(const b of i)(w=b.container)==null||w.addEventListener("keydown",u(this,zc));u(this,Et).hidden=!0,y&&C(this,at,eg).call(this)}render(){if(u(this,Qi))return;const e=x(this,Qi,document.createElement("div"));if(e.className="popup",u(this,Na)){const o=e.style.outlineColor=Ee.makeHexColor(...u(this,Na));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`:e.style.backgroundColor=Ee.makeHexColor(...u(this,Na).map(d=>Math.floor(.7*(255-d)+d)))}const t=document.createElement("span");t.className="header";const i=document.createElement("h1");if(t.append(i),{dir:i.dir,str:i.textContent}=u(this,wh),e.append(t),u(this,ja)){const o=document.createElement("span");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),o.setAttribute("data-l10n-args",JSON.stringify({date:u(this,ja).toLocaleDateString(),time:u(this,ja).toLocaleTimeString()})),t.append(o)}const s=u(this,at,Zp);if(s)ox.render({xfaHtml:s,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(u(this,us));e.append(o)}u(this,Et).append(e)}_formatContents({str:e,dir:t}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=t;const s=e.split(/(?:\r\n?|\n)/);for(let o=0,c=s.length;o<c;++o){const d=s[o];i.append(document.createTextNode(d)),o<c-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:e,popupContent:t}){var i;u(this,za)||x(this,za,{contentsObj:u(this,us),richText:u(this,fs)}),e&&x(this,hs,null),t&&(x(this,fs,C(this,at,hx).call(this,t)),x(this,us,null)),(i=u(this,Qi))==null||i.remove(),x(this,Qi,null)}resetEdited(){var e;u(this,za)&&({contentsObj:Qn(this,us)._,richText:Qn(this,fs)._}=u(this,za),x(this,za,null),(e=u(this,Qi))==null||e.remove(),x(this,Qi,null),x(this,hs,null))}forceHide(){x(this,Ba,this.isVisible),u(this,Ba)&&(u(this,Et).hidden=!0)}maybeShow(){u(this,Ba)&&(u(this,Qi)||C(this,at,tg).call(this),x(this,Ba,!1),u(this,Et).hidden=!1)}get isVisible(){return u(this,Et).hidden===!1}}zc=new WeakMap,jg=new WeakMap,zg=new WeakMap,Bc=new WeakMap,Na=new WeakMap,Et=new WeakMap,us=new WeakMap,ja=new WeakMap,mh=new WeakMap,yh=new WeakMap,Hc=new WeakMap,ds=new WeakMap,Qi=new WeakMap,hs=new WeakMap,vh=new WeakMap,fs=new WeakMap,wh=new WeakMap,za=new WeakMap,Ba=new WeakMap,at=new WeakSet,Zp=function(){const e=u(this,fs),t=u(this,us);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&u(this,fs).html||null},t0=function(){var e,t,i;return((i=(t=(e=u(this,at,Zp))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.fontSize)||0},dx=function(){var e,t,i;return((i=(t=(e=u(this,at,Zp))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.color)||null},hx=function(e){const t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:u(this,at,dx),fontSize:u(this,at,t0)?`calc(${u(this,at,t0)}px * var(--scale-factor))`:""}};for(const o of e.split(`
`))t.push({name:"span",value:o,attributes:s});return i},fx=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&u(this,ds))&&C(this,at,eg).call(this)},px=function(){if(u(this,hs)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:s,pageY:o}}}=u(this,yh);let c=!!u(this,Hc),d=c?u(this,Hc):u(this,vh);for(const A of u(this,mh))if(!d||Ee.intersect(A.data.rect,d)!==null){d=A.data.rect,c=!0;break}const f=Ee.normalizeRect([d[0],e[3]-d[1]+e[1],d[2],e[3]-d[3]+e[1]]),g=c?d[2]-d[0]+5:0,y=f[0]+g,w=f[1];x(this,hs,[100*(y-s)/t,100*(w-o)/i]);const{style:b}=u(this,Et);b.left=`${u(this,hs)[0]}%`,b.top=`${u(this,hs)[1]}%`},eg=function(){x(this,ds,!u(this,ds)),u(this,ds)?(C(this,at,tg).call(this),u(this,Et).addEventListener("click",u(this,Bc)),u(this,Et).addEventListener("keydown",u(this,zc))):(C(this,at,n0).call(this),u(this,Et).removeEventListener("click",u(this,Bc)),u(this,Et).removeEventListener("keydown",u(this,zc)))},tg=function(){u(this,Qi)||this.render(),this.isVisible?u(this,ds)&&u(this,Et).classList.add("focused"):(C(this,at,px).call(this),u(this,Et).hidden=!1,u(this,Et).style.zIndex=parseInt(u(this,Et).style.zIndex)+1e3)},n0=function(){u(this,Et).classList.remove("focused"),!(u(this,ds)||!this.isVisible)&&(u(this,Et).hidden=!0,u(this,Et).style.zIndex=parseInt(u(this,Et).style.zIndex)-1e3)};class gx extends kt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Xe.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}var Ah;class OP extends kt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});T(this,Ah,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:i,height:s}=xs(t.rect),o=this.svgFactory.create(i,s,!0),c=x(this,Ah,this.svgFactory.createElement("svg:line"));return c.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),c.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),c.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),c.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),c.setAttribute("stroke-width",t.borderStyle.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),o.append(c),this.container.append(o),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Ah)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ah=new WeakMap;var bh;class NP extends kt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});T(this,bh,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:i,height:s}=xs(t.rect),o=this.svgFactory.create(i,s,!0),c=t.borderStyle.width,d=x(this,bh,this.svgFactory.createElement("svg:rect"));return d.setAttribute("x",c/2),d.setAttribute("y",c/2),d.setAttribute("width",i-c),d.setAttribute("height",s-c),d.setAttribute("stroke-width",c||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),o.append(d),this.container.append(o),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,bh)}addHighlightArea(){this.container.classList.add("highlightArea")}}bh=new WeakMap;var Sh;class jP extends kt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});T(this,Sh,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:i,height:s}=xs(t.rect),o=this.svgFactory.create(i,s,!0),c=t.borderStyle.width,d=x(this,Sh,this.svgFactory.createElement("svg:ellipse"));return d.setAttribute("cx",i/2),d.setAttribute("cy",s/2),d.setAttribute("rx",i/2-c/2),d.setAttribute("ry",s/2-c/2),d.setAttribute("stroke-width",c||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),o.append(d),this.container.append(o),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Sh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Sh=new WeakMap;var Eh;class mx extends kt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});T(this,Eh,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:s,popupRef:o}}=this;if(!i)return this.container;const{width:c,height:d}=xs(t),f=this.svgFactory.create(c,d,!0);let p=[];for(let y=0,w=i.length;y<w;y+=2){const b=i[y]-t[0],A=t[3]-i[y+1];p.push(`${b},${A}`)}p=p.join(" ");const g=x(this,Eh,this.svgFactory.createElement(this.svgElementName));return g.setAttribute("points",p),g.setAttribute("stroke-width",s.width||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),f.append(g),this.container.append(f),!o&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Eh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Eh=new WeakMap;class zP extends mx{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class BP extends kt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var xh;class yx extends kt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});T(this,xh,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=Xe.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:i,borderStyle:s,popupRef:o}}=this,{width:c,height:d}=xs(t),f=this.svgFactory.create(c,d,!0);for(const p of i){let g=[];for(let w=0,b=p.length;w<b;w+=2){const A=p[w]-t[0],k=t[3]-p[w+1];g.push(`${A},${k}`)}g=g.join(" ");const y=this.svgFactory.createElement(this.svgElementName);u(this,xh).push(y),y.setAttribute("points",g),y.setAttribute("stroke-width",s.width||1),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),!o&&this.hasPopupData&&this._createPopup(),f.append(y)}return this.container.append(f),this.container}getElementsToTriggerPopup(){return u(this,xh)}addHighlightArea(){this.container.classList.add("highlightArea")}}xh=new WeakMap;class HP extends kt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class UP extends kt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class $P extends kt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class WP extends kt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class vx extends kt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var _h,Ch,i0;class VP extends kt{constructor(t){var s;super(t,{isRenderable:!0});T(this,Ch);T(this,_h,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",C(this,Ch,i0).bind(this)),x(this,_h,s);const{isMac:o}=zn.platform;return t.addEventListener("keydown",c=>{c.key==="Enter"&&(o?c.metaKey:c.ctrlKey)&&C(this,Ch,i0).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return u(this,_h)}addHighlightArea(){this.container.classList.add("highlightArea")}}_h=new WeakMap,Ch=new WeakSet,i0=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var kh,Ha,Uc,dl,wx,r0,RS;let qP=(RS=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:s,page:o,viewport:c}){T(this,dl);T(this,kh,null);T(this,Ha,null);T(this,Uc,new Map);this.div=e,x(this,kh,t),x(this,Ha,i),this.page=o,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=s}async render(e){var c;const{annotations:t}=e,i=this.div;al(i,this.viewport);const s=new Map,o={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new $0,annotationStorage:e.annotationStorage||new X0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const d of t){if(d.noHTML)continue;const f=d.annotationType===Ft.POPUP;if(f){const y=s.get(d.id);if(!y)continue;o.elements=y}else{const{width:y,height:w}=xs(d.rect);if(y<=0||w<=0)continue}o.data=d;const p=TP.create(o);if(!p.isRenderable)continue;if(!f&&d.popupRef){const y=s.get(d.popupRef);y?y.push(p):s.set(d.popupRef,[p])}const g=p.render();d.hidden&&(g.style.visibility="hidden"),C(this,dl,wx).call(this,g,d.id),p.annotationEditorType>0&&(u(this,Uc).set(p.data.id,p),(c=this._annotationEditorUIManager)==null||c.renderAnnotationElement(p))}C(this,dl,r0).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,al(t,{rotation:e.rotation}),C(this,dl,r0).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(u(this,Uc).values())}getEditableAnnotation(e){return u(this,Uc).get(e)}},kh=new WeakMap,Ha=new WeakMap,Uc=new WeakMap,dl=new WeakSet,wx=function(e,t){var s;const i=e.firstChild||e;i.id=`${dE}${t}`,this.div.append(e),(s=u(this,kh))==null||s.moveElementInDOM(this.div,e,i,!1)},r0=function(){if(!u(this,Ha))return;const e=this.div;for(const[t,i]of u(this,Ha)){const s=e.querySelector(`[data-annotation-id="${t}"]`);if(!s)continue;i.className="annotationContent";const{firstChild:o}=s;o?o.nodeName==="CANVAS"?o.replaceWith(i):o.classList.contains("annotationContent")?o.after(i):o.before(i):s.append(i)}u(this,Ha).clear()},RS);const Fp=/\r\n?|\n/g;var Th,Rh,Ph,Lh,Mh,Ji,si,Dh,oi,$c,Pt,Ax,bx,Sx,ng,Cs,ig,rg,Ex,o0,xx;const ht=class ht extends rt{constructor(t){super({...t,name:"freeTextEditor"});T(this,Pt);T(this,Th,this.editorDivBlur.bind(this));T(this,Rh,this.editorDivFocus.bind(this));T(this,Ph,this.editorDivInput.bind(this));T(this,Lh,this.editorDivKeydown.bind(this));T(this,Mh,this.editorDivPaste.bind(this));T(this,Ji);T(this,si,"");T(this,Dh,`${this.id}-editor`);T(this,oi);T(this,$c,null);x(this,Ji,t.color||ht._defaultColor||rt._defaultLineColor),x(this,oi,t.fontSize||ht._defaultFontSize)}static get _keyboardManager(){const t=ht.prototype,i=c=>c.isEmpty(),s=ll.TRANSLATE_SMALL,o=ll.TRANSLATE_BIG;return Qe(this,"_keyboardManager",new df([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-o,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[o,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-o],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,o],checker:i}]]))}static initialize(t,i){rt.initialize(t,i,{strings:["pdfjs-free-text-default-content"]});const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case Ne.FREETEXT_SIZE:ht._defaultFontSize=i;break;case Ne.FREETEXT_COLOR:ht._defaultColor=i;break}}updateParams(t,i){switch(t){case Ne.FREETEXT_SIZE:C(this,Pt,Ax).call(this,i);break;case Ne.FREETEXT_COLOR:C(this,Pt,bx).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[Ne.FREETEXT_SIZE,ht._defaultFontSize],[Ne.FREETEXT_COLOR,ht._defaultColor||rt._defaultLineColor]]}get propertiesToUpdate(){return[[Ne.FREETEXT_SIZE,u(this,oi)],[Ne.FREETEXT_COLOR,u(this,Ji)]]}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-ht._internalPadding*t,-(ht._internalPadding+u(this,oi))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Xe.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant");const t=this._uiManager._signal;this.editorDiv.addEventListener("keydown",u(this,Lh),{signal:t}),this.editorDiv.addEventListener("focus",u(this,Rh),{signal:t}),this.editorDiv.addEventListener("blur",u(this,Th),{signal:t}),this.editorDiv.addEventListener("input",u(this,Ph),{signal:t}),this.editorDiv.addEventListener("paste",u(this,Mh),{signal:t})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",u(this,Dh)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",u(this,Lh)),this.editorDiv.removeEventListener("focus",u(this,Rh)),this.editorDiv.removeEventListener("blur",u(this,Th)),this.editorDiv.removeEventListener("input",u(this,Ph)),this.editorDiv.removeEventListener("paste",u(this,Mh)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=u(this,si),i=x(this,si,C(this,Pt,Sx).call(this).trimEnd());if(t===i)return;const s=o=>{if(x(this,si,o),!o){this.remove();return}C(this,Pt,rg).call(this),this._uiManager.rebuild(this),C(this,Pt,ng).call(this)};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(t)},mustExec:!1}),C(this,Pt,ng).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){ht._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",u(this,Dh)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),rt._l10nPromise.get("pdfjs-free-text-default-content").then(o=>{var c;return(c=this.editorDiv)==null?void 0:c.setAttribute("default-content",o)}),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${u(this,oi)}px * var(--scale-factor))`,s.color=u(this,Ji),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),yg(this,this.div,["dblclick","keydown"]),this.width){const[o,c]=this.parentDimensions;if(this.annotationElementId){const{position:d}=u(this,$c);let[f,p]=this.getInitialTranslation();[f,p]=this.pageTranslationToScreen(f,p);const[g,y]=this.pageDimensions,[w,b]=this.pageTranslation;let A,k;switch(this.rotation){case 0:A=t+(d[0]-w)/g,k=i+this.height-(d[1]-b)/y;break;case 90:A=t+(d[0]-w)/g,k=i-(d[1]-b)/y,[f,p]=[p,-f];break;case 180:A=t-this.width+(d[0]-w)/g,k=i-(d[1]-b)/y,[f,p]=[-f,-p];break;case 270:A=t+(d[0]-w-this.height*y)/g,k=i+(d[1]-b-this.width*g)/y,[f,p]=[-p,f];break}this.setAt(A*o,k*c,f,p)}else this.setAt(t*o,i*c,this.width*o,this.height*c);C(this,Pt,rg).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var A,k,_;const i=t.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const o=C(A=ht,Cs,o0).call(A,i.getData("text")||"").replaceAll(Fp,`
`);if(!o)return;const c=window.getSelection();if(!c.rangeCount)return;this.editorDiv.normalize(),c.deleteFromDocument();const d=c.getRangeAt(0);if(!o.includes(`
`)){d.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),c.collapseToStart();return}const{startContainer:f,startOffset:p}=d,g=[],y=[];if(f.nodeType===Node.TEXT_NODE){const R=f.parentElement;if(y.push(f.nodeValue.slice(p).replaceAll(Fp,"")),R!==this.editorDiv){let D=g;for(const j of this.editorDiv.childNodes){if(j===R){D=y;continue}D.push(C(k=ht,Cs,ig).call(k,j))}}g.push(f.nodeValue.slice(0,p).replaceAll(Fp,""))}else if(f===this.editorDiv){let R=g,D=0;for(const j of this.editorDiv.childNodes)D++===p&&(R=y),R.push(C(_=ht,Cs,ig).call(_,j))}x(this,si,`${g.join(`
`)}${o}${y.join(`
`)}`),C(this,Pt,rg).call(this);const w=new Range;let b=g.reduce((R,D)=>R+D.length,0);for(const{firstChild:R}of this.editorDiv.childNodes)if(R.nodeType===Node.TEXT_NODE){const D=R.nodeValue.length;if(b<=D){w.setStart(R,b),w.setEnd(R,b);break}b-=D}c.removeAllRanges(),c.addRange(w)}get contentDiv(){return this.editorDiv}static deserialize(t,i,s){var d;let o=null;if(t instanceof gx){const{data:{defaultAppearanceData:{fontSize:f,fontColor:p},rect:g,rotation:y,id:w},textContent:b,textPosition:A,parent:{page:{pageNumber:k}}}=t;if(!b||b.length===0)return null;o=t={annotationType:Xe.FREETEXT,color:Array.from(p),fontSize:f,value:b.join(`
`),position:A,pageIndex:k-1,rect:g.slice(0),rotation:y,id:w,deleted:!1}}const c=super.deserialize(t,i,s);return x(c,oi,t.fontSize),x(c,Ji,Ee.makeHexColor(...t.color)),x(c,si,C(d=ht,Cs,o0).call(d,t.value)),c.annotationElementId=t.id||null,x(c,$c,o),c}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const i=ht._internalPadding*this.parentScale,s=this.getRect(i,i),o=rt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:u(this,Ji)),c={annotationType:Xe.FREETEXT,color:o,fontSize:u(this,oi),value:C(this,Pt,Ex).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?c:this.annotationElementId&&!C(this,Pt,xx).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(this.deleted)return i;const{style:s}=i;s.fontSize=`calc(${u(this,oi)}px * var(--scale-factor))`,s.color=u(this,Ji),i.replaceChildren();for(const c of u(this,si).split(`
`)){const d=document.createElement("div");d.append(c?document.createTextNode(c):document.createElement("br")),i.append(d)}const o=ht._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(o,o),popupContent:u(this,si)}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Th=new WeakMap,Rh=new WeakMap,Ph=new WeakMap,Lh=new WeakMap,Mh=new WeakMap,Ji=new WeakMap,si=new WeakMap,Dh=new WeakMap,oi=new WeakMap,$c=new WeakMap,Pt=new WeakSet,Ax=function(t){const i=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--scale-factor))`,this.translate(0,-(o-u(this,oi))*this.parentScale),x(this,oi,o),C(this,Pt,ng).call(this)},s=u(this,oi);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ne.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},bx=function(t){const i=o=>{x(this,Ji,this.editorDiv.style.color=o)},s=u(this,Ji);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ne.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Sx=function(){var i;const t=[];this.editorDiv.normalize();for(const s of this.editorDiv.childNodes)t.push(C(i=ht,Cs,ig).call(i,s));return t.join(`
`)},ng=function(){const[t,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:o,div:c}=this,d=c.style.display,f=c.classList.contains("hidden");c.classList.remove("hidden"),c.style.display="hidden",o.div.append(this.div),s=c.getBoundingClientRect(),c.remove(),c.style.display=d,c.classList.toggle("hidden",f)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/i):(this.width=s.height/t,this.height=s.width/i),this.fixAndSetPosition()},Cs=new WeakSet,ig=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Fp,"")},rg=function(){if(this.editorDiv.replaceChildren(),!!u(this,si))for(const t of u(this,si).split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}},Ex=function(){return u(this,si).replaceAll(""," ")},o0=function(t){return t.replaceAll(" ","")},xx=function(t){const{value:i,fontSize:s,color:o,pageIndex:c}=u(this,$c);return this._hasBeenMoved||t.value!==i||t.fontSize!==s||t.color.some((d,f)=>d!==o[f])||t.pageIndex!==c},T(ht,Cs),ze(ht,"_freeTextDefaultContent",""),ze(ht,"_internalPadding",0),ze(ht,"_defaultColor",null),ze(ht,"_defaultFontSize",10),ze(ht,"_type","freetext"),ze(ht,"_editorType",Xe.FREETEXT);let s0=ht;var Ih,fo,Zi,Cn,_x,sg,Cx,kx,l0;class a0{constructor(e,t=0,i=0,s=!0){T(this,Cn);T(this,Ih);T(this,fo,[]);T(this,Zi,[]);let o=1/0,c=-1/0,d=1/0,f=-1/0;const p=10**-4;for(const{x:_,y:R,width:D,height:j}of e){const z=Math.floor((_-t)/p)*p,B=Math.ceil((_+D+t)/p)*p,F=Math.floor((R-t)/p)*p,X=Math.ceil((R+j+t)/p)*p,Y=[z,F,X,!0],Q=[B,F,X,!1];u(this,fo).push(Y,Q),o=Math.min(o,z),c=Math.max(c,B),d=Math.min(d,F),f=Math.max(f,X)}const g=c-o+2*i,y=f-d+2*i,w=o-i,b=d-i,A=u(this,fo).at(s?-1:-2),k=[A[0],A[2]];for(const _ of u(this,fo)){const[R,D,j]=_;_[0]=(R-w)/g,_[1]=(D-b)/y,_[2]=(j-b)/y}x(this,Ih,{x:w,y:b,width:g,height:y,lastPoint:k})}getOutlines(){u(this,fo).sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);const e=[];for(const t of u(this,fo))t[3]?(e.push(...C(this,Cn,l0).call(this,t)),C(this,Cn,Cx).call(this,t)):(C(this,Cn,kx).call(this,t),e.push(...C(this,Cn,l0).call(this,t)));return C(this,Cn,_x).call(this,e)}}Ih=new WeakMap,fo=new WeakMap,Zi=new WeakMap,Cn=new WeakSet,_x=function(e){const t=[],i=new Set;for(const c of e){const[d,f,p]=c;t.push([d,f,c],[d,p,c])}t.sort((c,d)=>c[1]-d[1]||c[0]-d[0]);for(let c=0,d=t.length;c<d;c+=2){const f=t[c][2],p=t[c+1][2];f.push(p),p.push(f),i.add(f),i.add(p)}const s=[];let o;for(;i.size>0;){const c=i.values().next().value;let[d,f,p,g,y]=c;i.delete(c);let w=d,b=f;for(o=[d,p],s.push(o);;){let A;if(i.has(g))A=g;else if(i.has(y))A=y;else break;i.delete(A),[d,f,p,g,y]=A,w!==d&&(o.push(w,b,d,b===f?f:p),w=d),b=b===f?p:f}o.push(w,b)}return new GP(s,u(this,Ih))},sg=function(e){const t=u(this,Zi);let i=0,s=t.length-1;for(;i<=s;){const o=i+s>>1,c=t[o][0];if(c===e)return o;c<e?i=o+1:s=o-1}return s+1},Cx=function([,e,t]){const i=C(this,Cn,sg).call(this,e);u(this,Zi).splice(i,0,[e,t])},kx=function([,e,t]){const i=C(this,Cn,sg).call(this,e);for(let s=i;s<u(this,Zi).length;s++){const[o,c]=u(this,Zi)[s];if(o!==e)break;if(o===e&&c===t){u(this,Zi).splice(s,1);return}}for(let s=i-1;s>=0;s--){const[o,c]=u(this,Zi)[s];if(o!==e)break;if(o===e&&c===t){u(this,Zi).splice(s,1);return}}},l0=function(e){const[t,i,s]=e,o=[[t,i,s]],c=C(this,Cn,sg).call(this,s);for(let d=0;d<c;d++){const[f,p]=u(this,Zi)[d];for(let g=0,y=o.length;g<y;g++){const[,w,b]=o[g];if(!(p<=w||b<=f)){if(w>=f){if(b>p)o[g][1]=p;else{if(y===1)return[];o.splice(g,1),g--,y--}continue}o[g][2]=f,b>p&&o.push([t,p,b])}}}return o};class Tx{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(e,t){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof u0}}var Fh,Wc;class GP extends Tx{constructor(t,i){super();T(this,Fh);T(this,Wc);x(this,Wc,t),x(this,Fh,i)}toSVGPath(){const t=[];for(const i of u(this,Wc)){let[s,o]=i;t.push(`M${s} ${o}`);for(let c=2;c<i.length;c+=2){const d=i[c],f=i[c+1];d===s?(t.push(`V${f}`),o=f):f===o&&(t.push(`H${d}`),s=d)}t.push("Z")}return t.join(" ")}serialize([t,i,s,o],c){const d=[],f=s-t,p=o-i;for(const g of u(this,Wc)){const y=new Array(g.length);for(let w=0;w<g.length;w+=2)y[w]=t+g[w]*f,y[w+1]=o-g[w+1]*p;d.push(y)}return d}get box(){return u(this,Fh)}}Fh=new WeakMap,Wc=new WeakMap;var Er,ps,Vc,qc,xr,Ge,Ua,$a,Oh,Nh,Gc,Xc,po,jh,Bg,Hg,zh,c0;const Yr=class Yr{constructor({x:e,y:t},i,s,o,c,d=0){T(this,zh);T(this,Er);T(this,ps,[]);T(this,Vc);T(this,qc);T(this,xr,[]);T(this,Ge,new Float64Array(18));T(this,Ua);T(this,$a);T(this,Oh);T(this,Nh);T(this,Gc);T(this,Xc);T(this,po,[]);x(this,Er,i),x(this,Xc,o*s),x(this,qc,c),u(this,Ge).set([NaN,NaN,NaN,NaN,e,t],6),x(this,Vc,d),x(this,Nh,u(Yr,jh)*s),x(this,Oh,u(Yr,Hg)*s),x(this,Gc,s),u(this,po).push(e,t)}get free(){return!0}isEmpty(){return isNaN(u(this,Ge)[8])}add({x:e,y:t}){var Q;x(this,Ua,e),x(this,$a,t);const[i,s,o,c]=u(this,Er);let[d,f,p,g]=u(this,Ge).subarray(8,12);const y=e-p,w=t-g,b=Math.hypot(y,w);if(b<u(this,Oh))return!1;const A=b-u(this,Nh),k=A/b,_=k*y,R=k*w;let D=d,j=f;d=p,f=g,p+=_,g+=R,(Q=u(this,po))==null||Q.push(e,t);const z=-R/A,B=_/A,F=z*u(this,Xc),X=B*u(this,Xc);return u(this,Ge).set(u(this,Ge).subarray(2,8),0),u(this,Ge).set([p+F,g+X],4),u(this,Ge).set(u(this,Ge).subarray(14,18),12),u(this,Ge).set([p-F,g-X],16),isNaN(u(this,Ge)[6])?(u(this,xr).length===0&&(u(this,Ge).set([d+F,f+X],2),u(this,xr).push(NaN,NaN,NaN,NaN,(d+F-i)/o,(f+X-s)/c),u(this,Ge).set([d-F,f-X],14),u(this,ps).push(NaN,NaN,NaN,NaN,(d-F-i)/o,(f-X-s)/c)),u(this,Ge).set([D,j,d,f,p,g],6),!this.isEmpty()):(u(this,Ge).set([D,j,d,f,p,g],6),Math.abs(Math.atan2(j-f,D-d)-Math.atan2(R,_))<Math.PI/2?([d,f,p,g]=u(this,Ge).subarray(2,6),u(this,xr).push(NaN,NaN,NaN,NaN,((d+p)/2-i)/o,((f+g)/2-s)/c),[d,f,D,j]=u(this,Ge).subarray(14,18),u(this,ps).push(NaN,NaN,NaN,NaN,((D+d)/2-i)/o,((j+f)/2-s)/c),!0):([D,j,d,f,p,g]=u(this,Ge).subarray(0,6),u(this,xr).push(((D+5*d)/6-i)/o,((j+5*f)/6-s)/c,((5*d+p)/6-i)/o,((5*f+g)/6-s)/c,((d+p)/2-i)/o,((f+g)/2-s)/c),[p,g,d,f,D,j]=u(this,Ge).subarray(12,18),u(this,ps).push(((D+5*d)/6-i)/o,((j+5*f)/6-s)/c,((5*d+p)/6-i)/o,((5*f+g)/6-s)/c,((d+p)/2-i)/o,((f+g)/2-s)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const e=u(this,xr),t=u(this,ps),i=u(this,Ge).subarray(4,6),s=u(this,Ge).subarray(16,18),[o,c,d,f]=u(this,Er),[p,g,y,w]=C(this,zh,c0).call(this);if(isNaN(u(this,Ge)[6])&&!this.isEmpty())return`M${(u(this,Ge)[2]-o)/d} ${(u(this,Ge)[3]-c)/f} L${(u(this,Ge)[4]-o)/d} ${(u(this,Ge)[5]-c)/f} L${p} ${g} L${y} ${w} L${(u(this,Ge)[16]-o)/d} ${(u(this,Ge)[17]-c)/f} L${(u(this,Ge)[14]-o)/d} ${(u(this,Ge)[15]-c)/f} Z`;const b=[];b.push(`M${e[4]} ${e[5]}`);for(let A=6;A<e.length;A+=6)isNaN(e[A])?b.push(`L${e[A+4]} ${e[A+5]}`):b.push(`C${e[A]} ${e[A+1]} ${e[A+2]} ${e[A+3]} ${e[A+4]} ${e[A+5]}`);b.push(`L${(i[0]-o)/d} ${(i[1]-c)/f} L${p} ${g} L${y} ${w} L${(s[0]-o)/d} ${(s[1]-c)/f}`);for(let A=t.length-6;A>=6;A-=6)isNaN(t[A])?b.push(`L${t[A+4]} ${t[A+5]}`):b.push(`C${t[A]} ${t[A+1]} ${t[A+2]} ${t[A+3]} ${t[A+4]} ${t[A+5]}`);return b.push(`L${t[4]} ${t[5]} Z`),b.join(" ")}getOutlines(){var R;const e=u(this,xr),t=u(this,ps),i=u(this,Ge),s=i.subarray(4,6),o=i.subarray(16,18),[c,d,f,p]=u(this,Er),g=new Float64Array((((R=u(this,po))==null?void 0:R.length)??0)+2);for(let D=0,j=g.length-2;D<j;D+=2)g[D]=(u(this,po)[D]-c)/f,g[D+1]=(u(this,po)[D+1]-d)/p;g[g.length-2]=(u(this,Ua)-c)/f,g[g.length-1]=(u(this,$a)-d)/p;const[y,w,b,A]=C(this,zh,c0).call(this);if(isNaN(i[6])&&!this.isEmpty()){const D=new Float64Array(36);return D.set([NaN,NaN,NaN,NaN,(i[2]-c)/f,(i[3]-d)/p,NaN,NaN,NaN,NaN,(i[4]-c)/f,(i[5]-d)/p,NaN,NaN,NaN,NaN,y,w,NaN,NaN,NaN,NaN,b,A,NaN,NaN,NaN,NaN,(i[16]-c)/f,(i[17]-d)/p,NaN,NaN,NaN,NaN,(i[14]-c)/f,(i[15]-d)/p],0),new u0(D,g,u(this,Er),u(this,Gc),u(this,Vc),u(this,qc))}const k=new Float64Array(u(this,xr).length+24+u(this,ps).length);let _=e.length;for(let D=0;D<_;D+=2){if(isNaN(e[D])){k[D]=k[D+1]=NaN;continue}k[D]=e[D],k[D+1]=e[D+1]}k.set([NaN,NaN,NaN,NaN,(s[0]-c)/f,(s[1]-d)/p,NaN,NaN,NaN,NaN,y,w,NaN,NaN,NaN,NaN,b,A,NaN,NaN,NaN,NaN,(o[0]-c)/f,(o[1]-d)/p],_),_+=24;for(let D=t.length-6;D>=6;D-=6)for(let j=0;j<6;j+=2){if(isNaN(t[D+j])){k[_]=k[_+1]=NaN,_+=2;continue}k[_]=t[D+j],k[_+1]=t[D+j+1],_+=2}return k.set([NaN,NaN,NaN,NaN,t[4],t[5]],_),new u0(k,g,u(this,Er),u(this,Gc),u(this,Vc),u(this,qc))}};Er=new WeakMap,ps=new WeakMap,Vc=new WeakMap,qc=new WeakMap,xr=new WeakMap,Ge=new WeakMap,Ua=new WeakMap,$a=new WeakMap,Oh=new WeakMap,Nh=new WeakMap,Gc=new WeakMap,Xc=new WeakMap,po=new WeakMap,jh=new WeakMap,Bg=new WeakMap,Hg=new WeakMap,zh=new WeakSet,c0=function(){const e=u(this,Ge).subarray(4,6),t=u(this,Ge).subarray(16,18),[i,s,o,c]=u(this,Er);return[(u(this,Ua)+(e[0]-t[0])/2-i)/o,(u(this,$a)+(e[1]-t[1])/2-s)/c,(u(this,Ua)+(t[0]-e[0])/2-i)/o,(u(this,$a)+(t[1]-e[1])/2-s)/c]},T(Yr,jh,8),T(Yr,Bg,2),T(Yr,Hg,u(Yr,jh)+u(Yr,Bg));let bg=Yr;var Kc,Wa,gs,Bh,ai,Hh,Ct,Bn,hd,fd,Rx;class u0 extends Tx{constructor(t,i,s,o,c,d){super();T(this,Bn);T(this,Kc);T(this,Wa,null);T(this,gs);T(this,Bh);T(this,ai);T(this,Hh);T(this,Ct);x(this,Ct,t),x(this,ai,i),x(this,Kc,s),x(this,Hh,o),x(this,gs,c),x(this,Bh,d),C(this,Bn,Rx).call(this,d);const{x:f,y:p,width:g,height:y}=u(this,Wa);for(let w=0,b=t.length;w<b;w+=2)t[w]=(t[w]-f)/g,t[w+1]=(t[w+1]-p)/y;for(let w=0,b=i.length;w<b;w+=2)i[w]=(i[w]-f)/g,i[w+1]=(i[w+1]-p)/y}toSVGPath(){const t=[`M${u(this,Ct)[4]} ${u(this,Ct)[5]}`];for(let i=6,s=u(this,Ct).length;i<s;i+=6){if(isNaN(u(this,Ct)[i])){t.push(`L${u(this,Ct)[i+4]} ${u(this,Ct)[i+5]}`);continue}t.push(`C${u(this,Ct)[i]} ${u(this,Ct)[i+1]} ${u(this,Ct)[i+2]} ${u(this,Ct)[i+3]} ${u(this,Ct)[i+4]} ${u(this,Ct)[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,s,o],c){const d=s-t,f=o-i;let p,g;switch(c){case 0:p=C(this,Bn,hd).call(this,u(this,Ct),t,o,d,-f),g=C(this,Bn,hd).call(this,u(this,ai),t,o,d,-f);break;case 90:p=C(this,Bn,fd).call(this,u(this,Ct),t,i,d,f),g=C(this,Bn,fd).call(this,u(this,ai),t,i,d,f);break;case 180:p=C(this,Bn,hd).call(this,u(this,Ct),s,i,-d,f),g=C(this,Bn,hd).call(this,u(this,ai),s,i,-d,f);break;case 270:p=C(this,Bn,fd).call(this,u(this,Ct),s,o,-d,-f),g=C(this,Bn,fd).call(this,u(this,ai),s,o,-d,-f);break}return{outline:Array.from(p),points:[Array.from(g)]}}get box(){return u(this,Wa)}getNewOutline(t,i){const{x:s,y:o,width:c,height:d}=u(this,Wa),[f,p,g,y]=u(this,Kc),w=c*g,b=d*y,A=s*g+f,k=o*y+p,_=new bg({x:u(this,ai)[0]*w+A,y:u(this,ai)[1]*b+k},u(this,Kc),u(this,Hh),t,u(this,Bh),i??u(this,gs));for(let R=2;R<u(this,ai).length;R+=2)_.add({x:u(this,ai)[R]*w+A,y:u(this,ai)[R+1]*b+k});return _.getOutlines()}}Kc=new WeakMap,Wa=new WeakMap,gs=new WeakMap,Bh=new WeakMap,ai=new WeakMap,Hh=new WeakMap,Ct=new WeakMap,Bn=new WeakSet,hd=function(t,i,s,o,c){const d=new Float64Array(t.length);for(let f=0,p=t.length;f<p;f+=2)d[f]=i+t[f]*o,d[f+1]=s+t[f+1]*c;return d},fd=function(t,i,s,o,c){const d=new Float64Array(t.length);for(let f=0,p=t.length;f<p;f+=2)d[f]=i+t[f+1]*o,d[f+1]=s+t[f]*c;return d},Rx=function(t){const i=u(this,Ct);let s=i[4],o=i[5],c=s,d=o,f=s,p=o,g=s,y=o;const w=t?Math.max:Math.min;for(let R=6,D=i.length;R<D;R+=6){if(isNaN(i[R]))c=Math.min(c,i[R+4]),d=Math.min(d,i[R+5]),f=Math.max(f,i[R+4]),p=Math.max(p,i[R+5]),y<i[R+5]?(g=i[R+4],y=i[R+5]):y===i[R+5]&&(g=w(g,i[R+4]));else{const j=Ee.bezierBoundingBox(s,o,...i.slice(R,R+6));c=Math.min(c,j[0]),d=Math.min(d,j[1]),f=Math.max(f,j[2]),p=Math.max(p,j[3]),y<j[3]?(g=j[2],y=j[3]):y===j[3]&&(g=w(g,j[2]))}s=i[R+4],o=i[R+5]}const b=c-u(this,gs),A=d-u(this,gs),k=f-c+2*u(this,gs),_=p-d+2*u(this,gs);x(this,Wa,{x:b,y:A,width:k,height:_,lastPoint:[g,y]})};var Uh,$h,er,Va,Yc,Nt,Wh,Qc,Vh,qh,tr,Jc,ut,d0,h0,Px,ra,Lx,Js;const Qr=class Qr{constructor({editor:e=null,uiManager:t=null}){T(this,ut);T(this,Uh,C(this,ut,Px).bind(this));T(this,$h,C(this,ut,Lx).bind(this));T(this,er,null);T(this,Va,null);T(this,Yc);T(this,Nt,null);T(this,Wh,!1);T(this,Qc,!1);T(this,Vh,null);T(this,qh);T(this,tr,null);T(this,Jc);var i;e?(x(this,Qc,!1),x(this,Jc,Ne.HIGHLIGHT_COLOR),x(this,Vh,e)):(x(this,Qc,!0),x(this,Jc,Ne.HIGHLIGHT_DEFAULT_COLOR)),x(this,tr,(e==null?void 0:e._uiManager)||t),x(this,qh,u(this,tr)._eventBus),x(this,Yc,(e==null?void 0:e.color)||((i=u(this,tr))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return Qe(this,"_keyboardManager",new df([[["Escape","mac+Escape"],Qr.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Qr.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Qr.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Qr.prototype._moveToPrevious],[["Home","mac+Home"],Qr.prototype._moveToBeginning],[["End","mac+End"],Qr.prototype._moveToEnd]]))}renderButton(){const e=x(this,er,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=u(this,tr)._signal;e.addEventListener("click",C(this,ut,ra).bind(this),{signal:t}),e.addEventListener("keydown",u(this,Uh),{signal:t});const i=x(this,Va,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=u(this,Yc),e.append(i),e}renderMainDropdown(){const e=x(this,Nt,C(this,ut,d0).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===u(this,er)){C(this,ut,ra).call(this,e);return}const t=e.target.getAttribute("data-color");t&&C(this,ut,h0).call(this,t,e)}_moveToNext(e){var t,i;if(!u(this,ut,Js)){C(this,ut,ra).call(this,e);return}if(e.target===u(this,er)){(t=u(this,Nt).firstChild)==null||t.focus();return}(i=e.target.nextSibling)==null||i.focus()}_moveToPrevious(e){var t,i;if(e.target===((t=u(this,Nt))==null?void 0:t.firstChild)||e.target===u(this,er)){u(this,ut,Js)&&this._hideDropdownFromKeyboard();return}u(this,ut,Js)||C(this,ut,ra).call(this,e),(i=e.target.previousSibling)==null||i.focus()}_moveToBeginning(e){var t;if(!u(this,ut,Js)){C(this,ut,ra).call(this,e);return}(t=u(this,Nt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!u(this,ut,Js)){C(this,ut,ra).call(this,e);return}(t=u(this,Nt).lastChild)==null||t.focus()}hideDropdown(){var e;(e=u(this,Nt))==null||e.classList.add("hidden"),window.removeEventListener("pointerdown",u(this,$h))}_hideDropdownFromKeyboard(){var e;if(!u(this,Qc)){if(!u(this,ut,Js)){(e=u(this,Vh))==null||e.unselect();return}this.hideDropdown(),u(this,er).focus({preventScroll:!0,focusVisible:u(this,Wh)})}}updateColor(e){if(u(this,Va)&&(u(this,Va).style.backgroundColor=e),!u(this,Nt))return;const t=u(this,tr).highlightColors.values();for(const i of u(this,Nt).children)i.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=u(this,er))==null||e.remove(),x(this,er,null),x(this,Va,null),(t=u(this,Nt))==null||t.remove(),x(this,Nt,null)}};Uh=new WeakMap,$h=new WeakMap,er=new WeakMap,Va=new WeakMap,Yc=new WeakMap,Nt=new WeakMap,Wh=new WeakMap,Qc=new WeakMap,Vh=new WeakMap,qh=new WeakMap,tr=new WeakMap,Jc=new WeakMap,ut=new WeakSet,d0=function(){const e=document.createElement("div"),t=u(this,tr)._signal;e.addEventListener("contextmenu",$n,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,s]of u(this,tr).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",s),o.title=i,o.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${i}`);const c=document.createElement("span");o.append(c),c.className="swatch",c.style.backgroundColor=s,o.setAttribute("aria-selected",s===u(this,Yc)),o.addEventListener("click",C(this,ut,h0).bind(this,s),{signal:t}),e.append(o)}return e.addEventListener("keydown",u(this,Uh),{signal:t}),e},h0=function(e,t){t.stopPropagation(),u(this,qh).dispatch("switchannotationeditorparams",{source:this,type:u(this,Jc),value:e})},Px=function(e){Qr._keyboardManager.exec(this,e)},ra=function(e){if(u(this,ut,Js)){this.hideDropdown();return}if(x(this,Wh,e.detail===0),window.addEventListener("pointerdown",u(this,$h),{signal:u(this,tr)._signal}),u(this,Nt)){u(this,Nt).classList.remove("hidden");return}const t=x(this,Nt,C(this,ut,d0).call(this));u(this,er).append(t)},Lx=function(e){var t;(t=u(this,Nt))!=null&&t.contains(e.target)||this.hideDropdown()},Js=function(){return u(this,Nt)&&!u(this,Nt).classList.contains("hidden")};let Sg=Qr;var Zc,Gh,go,qa,eu,Ci,Xh,Kh,Ga,nr,Sn,li,Ug,tu,Xa,jt,nu,_r,Yh,Ve,f0,p0,Mx,Dx,Ix,g0,pd,Pi,rc,Fx,og,gd,Ox,Nx,jx,zx;const nt=class nt extends rt{constructor(t){super({...t,name:"highlightEditor"});T(this,Ve);T(this,Zc,null);T(this,Gh,0);T(this,go);T(this,qa,null);T(this,eu,null);T(this,Ci,null);T(this,Xh,null);T(this,Kh,0);T(this,Ga,null);T(this,nr,null);T(this,Sn,null);T(this,li,!1);T(this,Ug,C(this,Ve,Fx).bind(this));T(this,tu,null);T(this,Xa);T(this,jt,null);T(this,nu,"");T(this,_r);T(this,Yh,"");this.color=t.color||nt._defaultColor,x(this,_r,t.thickness||nt._defaultThickness),x(this,Xa,t.opacity||nt._defaultOpacity),x(this,go,t.boxes||null),x(this,Yh,t.methodOfCreation||""),x(this,nu,t.text||""),this._isDraggable=!1,t.highlightId>-1?(x(this,li,!0),C(this,Ve,p0).call(this,t),C(this,Ve,pd).call(this)):(x(this,Zc,t.anchorNode),x(this,Gh,t.anchorOffset),x(this,Xh,t.focusNode),x(this,Kh,t.focusOffset),C(this,Ve,f0).call(this),C(this,Ve,pd).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=nt.prototype;return Qe(this,"_keyboardManager",new df([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:u(this,li)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:u(this,_r),methodOfCreation:u(this,Yh)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,i){var s;rt.initialize(t,i),nt._defaultColor||(nt._defaultColor=((s=i.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,i){switch(t){case Ne.HIGHLIGHT_DEFAULT_COLOR:nt._defaultColor=i;break;case Ne.HIGHLIGHT_THICKNESS:nt._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return u(this,tu)}updateParams(t,i){switch(t){case Ne.HIGHLIGHT_COLOR:C(this,Ve,Mx).call(this,i);break;case Ne.HIGHLIGHT_THICKNESS:C(this,Ve,Dx).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[Ne.HIGHLIGHT_DEFAULT_COLOR,nt._defaultColor],[Ne.HIGHLIGHT_THICKNESS,nt._defaultThickness]]}get propertiesToUpdate(){return[[Ne.HIGHLIGHT_COLOR,this.color||nt._defaultColor],[Ne.HIGHLIGHT_THICKNESS,u(this,_r)||nt._defaultThickness],[Ne.HIGHLIGHT_FREE,u(this,li)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(x(this,eu,new Sg({editor:this})),t.addColorPicker(u(this,eu))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(C(this,Ve,gd).call(this))}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,C(this,Ve,gd).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){C(this,Ve,g0).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(C(this,Ve,pd).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let i=!1;this.parent&&!t?C(this,Ve,g0).call(this):t&&(C(this,Ve,pd).call(this,t),i=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),i&&this.select()}rotate(t){var o,c,d;const{drawLayer:i}=this.parent;let s;u(this,li)?(t=(t-this.rotation+360)%360,s=C(o=nt,Pi,rc).call(o,u(this,nr).box,t)):s=C(c=nt,Pi,rc).call(c,this,t),i.rotate(u(this,Sn),t),i.rotate(u(this,jt),t),i.updateBox(u(this,Sn),s),i.updateBox(u(this,jt),C(d=nt,Pi,rc).call(d,u(this,Ci).box,t))}render(){if(this.div)return this.div;const t=super.render();u(this,nu)&&(t.setAttribute("aria-label",u(this,nu)),t.setAttribute("role","mark")),u(this,li)?t.classList.add("free"):this.div.addEventListener("keydown",u(this,Ug),{signal:this._uiManager._signal});const i=x(this,Ga,document.createElement("div"));t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=u(this,qa);const[s,o]=this.parentDimensions;return this.setDims(this.width*s,this.height*o),yg(this,u(this,Ga),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.parent.drawLayer.addClass(u(this,jt),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(u(this,jt),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:C(this,Ve,og).call(this,!0);break;case 1:case 3:C(this,Ve,og).call(this,!1);break}}select(){var t,i;super.select(),u(this,jt)&&((t=this.parent)==null||t.drawLayer.removeClass(u(this,jt),"hovered"),(i=this.parent)==null||i.drawLayer.addClass(u(this,jt),"selected"))}unselect(){var t;super.unselect(),u(this,jt)&&((t=this.parent)==null||t.drawLayer.removeClass(u(this,jt),"selected"),u(this,li)||C(this,Ve,og).call(this,!1))}get _mustFixPosition(){return!u(this,li)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(u(this,Sn),t),this.parent.drawLayer.show(u(this,jt),t))}static startHighlighting(t,i,{target:s,x:o,y:c}){const{x:d,y:f,width:p,height:g}=s.getBoundingClientRect(),y=_=>{C(this,Pi,jx).call(this,t,_)},w=t._signal,b={capture:!0,passive:!1,signal:w},A=_=>{_.preventDefault(),_.stopPropagation()},k=_=>{s.removeEventListener("pointermove",y),window.removeEventListener("blur",k),window.removeEventListener("pointerup",k),window.removeEventListener("pointerdown",A,b),window.removeEventListener("contextmenu",$n),C(this,Pi,zx).call(this,t,_)};window.addEventListener("blur",k,{signal:w}),window.addEventListener("pointerup",k,{signal:w}),window.addEventListener("pointerdown",A,b),window.addEventListener("contextmenu",$n,{signal:w}),s.addEventListener("pointermove",y,{signal:w}),this._freeHighlight=new bg({x:o,y:c},[d,f,p,g],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(t,i,s){var k;const o=super.deserialize(t,i,s),{rect:[c,d,f,p],color:g,quadPoints:y}=t;o.color=Ee.makeHexColor(...g),x(o,Xa,t.opacity);const[w,b]=o.pageDimensions;o.width=(f-c)/w,o.height=(p-d)/b;const A=x(o,go,[]);for(let _=0;_<y.length;_+=8)A.push({x:(y[4]-f)/w,y:(p-(1-y[_+5]))/b,width:(y[_+2]-y[_])/w,height:(y[_+5]-y[_+1])/b});return C(k=o,Ve,f0).call(k),o}serialize(t=!1){if(this.isEmpty()||t)return null;const i=this.getRect(0,0),s=rt._colorManager.convert(this.color);return{annotationType:Xe.HIGHLIGHT,color:s,opacity:u(this,Xa),thickness:u(this,_r),quadPoints:C(this,Ve,Ox).call(this),outlines:C(this,Ve,Nx).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:C(this,Ve,gd).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};Zc=new WeakMap,Gh=new WeakMap,go=new WeakMap,qa=new WeakMap,eu=new WeakMap,Ci=new WeakMap,Xh=new WeakMap,Kh=new WeakMap,Ga=new WeakMap,nr=new WeakMap,Sn=new WeakMap,li=new WeakMap,Ug=new WeakMap,tu=new WeakMap,Xa=new WeakMap,jt=new WeakMap,nu=new WeakMap,_r=new WeakMap,Yh=new WeakMap,Ve=new WeakSet,f0=function(){const t=new a0(u(this,go),.001);x(this,nr,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=u(this,nr).box;const i=new a0(u(this,go),.0025,.001,this._uiManager.direction==="ltr");x(this,Ci,i.getOutlines());const{lastPoint:s}=u(this,Ci).box;x(this,tu,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},p0=function({highlightOutlines:t,highlightId:i,clipPathId:s}){var y,w;if(x(this,nr,t),x(this,Ci,t.getNewOutline(u(this,_r)/2+1.5,.0025)),i>=0)x(this,Sn,i),x(this,qa,s),this.parent.drawLayer.finalizeLine(i,t),x(this,jt,this.parent.drawLayer.highlightOutline(u(this,Ci)));else if(this.parent){const b=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(u(this,Sn),t),this.parent.drawLayer.updateBox(u(this,Sn),C(y=nt,Pi,rc).call(y,u(this,nr).box,(b-this.rotation+360)%360)),this.parent.drawLayer.updateLine(u(this,jt),u(this,Ci)),this.parent.drawLayer.updateBox(u(this,jt),C(w=nt,Pi,rc).call(w,u(this,Ci).box,b))}const{x:c,y:d,width:f,height:p}=t.box;switch(this.rotation){case 0:this.x=c,this.y=d,this.width=f,this.height=p;break;case 90:{const[b,A]=this.parentDimensions;this.x=d,this.y=1-c,this.width=f*A/b,this.height=p*b/A;break}case 180:this.x=1-c,this.y=1-d,this.width=f,this.height=p;break;case 270:{const[b,A]=this.parentDimensions;this.x=1-d,this.y=c,this.width=f*A/b,this.height=p*b/A;break}}const{lastPoint:g}=u(this,Ci).box;x(this,tu,[(g[0]-c)/f,(g[1]-d)/p])},Mx=function(t){const i=o=>{var c,d;this.color=o,(c=this.parent)==null||c.drawLayer.changeColor(u(this,Sn),o),(d=u(this,eu))==null||d.updateColor(o)},s=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ne.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},Dx=function(t){const i=u(this,_r),s=o=>{x(this,_r,o),C(this,Ve,Ix).call(this,o)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ne.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},Ix=function(t){if(!u(this,li))return;C(this,Ve,p0).call(this,{highlightOutlines:u(this,nr).getNewOutline(t/2)}),this.fixAndSetPosition();const[i,s]=this.parentDimensions;this.setDims(this.width*i,this.height*s)},g0=function(){u(this,Sn)===null||!this.parent||(this.parent.drawLayer.remove(u(this,Sn)),x(this,Sn,null),this.parent.drawLayer.remove(u(this,jt)),x(this,jt,null))},pd=function(t=this.parent){u(this,Sn)===null&&({id:Qn(this,Sn)._,clipPathId:Qn(this,qa)._}=t.drawLayer.highlight(u(this,nr),this.color,u(this,Xa)),x(this,jt,t.drawLayer.highlightOutline(u(this,Ci))),u(this,Ga)&&(u(this,Ga).style.clipPath=u(this,qa)))},Pi=new WeakSet,rc=function({x:t,y:i,width:s,height:o},c){switch(c){case 90:return{x:1-i-o,y:t,width:o,height:s};case 180:return{x:1-t-s,y:1-i-o,width:s,height:o};case 270:return{x:i,y:1-t-s,width:o,height:s}}return{x:t,y:i,width:s,height:o}},Fx=function(t){nt._keyboardManager.exec(this,t)},og=function(t){if(!u(this,Zc))return;const i=window.getSelection();t?i.setPosition(u(this,Zc),u(this,Gh)):i.setPosition(u(this,Xh),u(this,Kh))},gd=function(){return u(this,li)?this.rotation:0},Ox=function(){if(u(this,li))return null;const[t,i]=this.pageDimensions,s=u(this,go),o=new Float32Array(s.length*8);let c=0;for(const{x:d,y:f,width:p,height:g}of s){const y=d*t,w=(1-f-g)*i;o[c]=o[c+4]=y,o[c+1]=o[c+3]=w,o[c+2]=o[c+6]=y+p*t,o[c+5]=o[c+7]=w+g*i,c+=8}return o},Nx=function(t){return u(this,nr).serialize(t,C(this,Ve,gd).call(this))},jx=function(t,i){this._freeHighlight.add(i)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},zx=function(t,i){this._freeHighlight.isEmpty()?t.drawLayer.removeFreeHighlight(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},T(nt,Pi),ze(nt,"_defaultColor",null),ze(nt,"_defaultOpacity",1),ze(nt,"_defaultThickness",12),ze(nt,"_l10nPromise"),ze(nt,"_type","highlight"),ze(nt,"_editorType",Xe.HIGHLIGHT),ze(nt,"_freeHighlightId",-1),ze(nt,"_freeHighlight",null),ze(nt,"_freeHighlightClipId","");let Eg=nt;var Ka,Ya,Qh,Jh,Zh,Qa,Cr,ms,ki,Ja,Za,ys,el,tl,mo,fe,Bx,Hx,Ux,$x,y0,Wx,v0,Vx,qx,Gx,Xx,Kx,sa,w0,ag,lg,sc,A0,cg,Ts,Yx,b0,Qx,Jx,S0,ug,md;const At=class At extends rt{constructor(t){super({...t,name:"inkEditor"});T(this,fe);T(this,Ka,0);T(this,Ya,0);T(this,Qh,this.canvasPointermove.bind(this));T(this,Jh,this.canvasPointerleave.bind(this));T(this,Zh,this.canvasPointerup.bind(this));T(this,Qa,this.canvasPointerdown.bind(this));T(this,Cr,null);T(this,ms,new Path2D);T(this,ki,!1);T(this,Ja,!1);T(this,Za,!1);T(this,ys,null);T(this,el,0);T(this,tl,0);T(this,mo,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,i){rt.initialize(t,i)}static updateDefaultParams(t,i){switch(t){case Ne.INK_THICKNESS:At._defaultThickness=i;break;case Ne.INK_COLOR:At._defaultColor=i;break;case Ne.INK_OPACITY:At._defaultOpacity=i/100;break}}updateParams(t,i){switch(t){case Ne.INK_THICKNESS:C(this,fe,Bx).call(this,i);break;case Ne.INK_COLOR:C(this,fe,Hx).call(this,i);break;case Ne.INK_OPACITY:C(this,fe,Ux).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[Ne.INK_THICKNESS,At._defaultThickness],[Ne.INK_COLOR,At._defaultColor||rt._defaultLineColor],[Ne.INK_OPACITY,Math.round(At._defaultOpacity*100)]]}get propertiesToUpdate(){return[[Ne.INK_THICKNESS,this.thickness||At._defaultThickness],[Ne.INK_COLOR,this.color||At._defaultColor||rt._defaultLineColor],[Ne.INK_OPACITY,Math.round(100*(this.opacity??At._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(C(this,fe,ag).call(this),C(this,fe,lg).call(this)),this.isAttachedToDOM||(this.parent.add(this),C(this,fe,sc).call(this)),C(this,fe,md).call(this)))}remove(){var t;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,u(this,Cr)&&(clearTimeout(u(this,Cr)),x(this,Cr,null)),(t=u(this,ys))==null||t.disconnect(),x(this,ys,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,i]=this.parentDimensions,s=this.width*t,o=this.height*i;this.setDimensions(s,o)}enableEditMode(){u(this,ki)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",u(this,Qa),{signal:this._uiManager._signal}))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",u(this,Qa)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){u(this,ki)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),x(this,ki,!0),this.div.classList.add("disabled"),C(this,fe,md).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||u(this,ki)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),C(this,fe,Wx).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),C(this,fe,v0).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),C(this,fe,w0).call(this,t)}canvasPointerleave(t){C(this,fe,w0).call(this,t)}get isResizable(){return!this.isEmpty()&&u(this,ki)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[s,o,c,d]=C(this,fe,$x).call(this);if(this.setAt(s,o,0,0),this.setDims(c,d),C(this,fe,ag).call(this),this.width){const[f,p]=this.parentDimensions;this.setAspectRatio(this.width*f,this.height*p),this.setAt(t*f,i*p,this.width*f,this.height*p),x(this,Za,!0),C(this,fe,sc).call(this),this.setDims(this.width*f,this.height*p),C(this,fe,sa).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return C(this,fe,lg).call(this),this.div}setDimensions(t,i){const s=Math.round(t),o=Math.round(i);if(u(this,el)===s&&u(this,tl)===o)return;x(this,el,s),x(this,tl,o),this.canvas.style.visibility="hidden";const[c,d]=this.parentDimensions;this.width=t/c,this.height=i/d,this.fixAndSetPosition(),u(this,ki)&&C(this,fe,A0).call(this,t,i),C(this,fe,sc).call(this),C(this,fe,sa).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(t,i,s){var _,R,D;if(t instanceof yx)return null;const o=super.deserialize(t,i,s);o.thickness=t.thickness,o.color=Ee.makeHexColor(...t.color),o.opacity=t.opacity;const[c,d]=o.pageDimensions,f=o.width*c,p=o.height*d,g=o.parentScale,y=t.thickness/2;x(o,ki,!0),x(o,el,Math.round(f)),x(o,tl,Math.round(p));const{paths:w,rect:b,rotation:A}=t;for(let{bezier:j}of w){j=C(_=At,Ts,Qx).call(_,j,b,A);const z=[];o.paths.push(z);let B=g*(j[0]-y),F=g*(j[1]-y);for(let Y=2,Q=j.length;Y<Q;Y+=6){const ne=g*(j[Y]-y),oe=g*(j[Y+1]-y),_e=g*(j[Y+2]-y),ge=g*(j[Y+3]-y),de=g*(j[Y+4]-y),ie=g*(j[Y+5]-y);z.push([[B,F],[ne,oe],[_e,ge],[de,ie]]),B=de,F=ie}const X=C(this,Ts,Yx).call(this,z);o.bezierPath2D.push(X)}const k=C(R=o,fe,S0).call(R);return x(o,Ya,Math.max(rt.MIN_SIZE,k[2]-k[0])),x(o,Ka,Math.max(rt.MIN_SIZE,k[3]-k[1])),C(D=o,fe,A0).call(D,f,p),o}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),i=rt._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Xe.INK,color:i,thickness:this.thickness,opacity:this.opacity,paths:C(this,fe,Jx).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};Ka=new WeakMap,Ya=new WeakMap,Qh=new WeakMap,Jh=new WeakMap,Zh=new WeakMap,Qa=new WeakMap,Cr=new WeakMap,ms=new WeakMap,ki=new WeakMap,Ja=new WeakMap,Za=new WeakMap,ys=new WeakMap,el=new WeakMap,tl=new WeakMap,mo=new WeakMap,fe=new WeakSet,Bx=function(t){const i=o=>{this.thickness=o,C(this,fe,md).call(this)},s=this.thickness;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ne.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Hx=function(t){const i=o=>{this.color=o,C(this,fe,sa).call(this)},s=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ne.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Ux=function(t){const i=o=>{this.opacity=o,C(this,fe,sa).call(this)};t/=100;const s=this.opacity;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ne.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},$x=function(){const{parentRotation:t,parentDimensions:[i,s]}=this;switch(t){case 90:return[0,s,s,i];case 180:return[i,s,i,s];case 270:return[i,0,s,i];default:return[0,0,i,s]}},y0=function(){const{ctx:t,color:i,opacity:s,thickness:o,parentScale:c,scaleFactor:d}=this;t.lineWidth=o*c/d,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${i}${yR(s)}`},Wx=function(t,i){const s=this._uiManager._signal;this.canvas.addEventListener("contextmenu",$n,{signal:s}),this.canvas.addEventListener("pointerleave",u(this,Jh),{signal:s}),this.canvas.addEventListener("pointermove",u(this,Qh),{signal:s}),this.canvas.addEventListener("pointerup",u(this,Zh),{signal:s}),this.canvas.removeEventListener("pointerdown",u(this,Qa)),this.isEditing=!0,u(this,Za)||(x(this,Za,!0),C(this,fe,sc).call(this),this.thickness||(this.thickness=At._defaultThickness),this.color||(this.color=At._defaultColor||rt._defaultLineColor),this.opacity??(this.opacity=At._defaultOpacity)),this.currentPath.push([t,i]),x(this,Ja,!1),C(this,fe,y0).call(this),x(this,mo,()=>{C(this,fe,Gx).call(this),u(this,mo)&&window.requestAnimationFrame(u(this,mo))}),window.requestAnimationFrame(u(this,mo))},v0=function(t,i){const[s,o]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===s&&i===o)return;const c=this.currentPath;let d=u(this,ms);if(c.push([t,i]),x(this,Ja,!0),c.length<=2){d.moveTo(...c[0]),d.lineTo(t,i);return}c.length===3&&(x(this,ms,d=new Path2D),d.moveTo(...c[0])),C(this,fe,Xx).call(this,d,...c.at(-3),...c.at(-2),t,i)},Vx=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);u(this,ms).lineTo(...t)},qx=function(t,i){x(this,mo,null),t=Math.min(Math.max(t,0),this.canvas.width),i=Math.min(Math.max(i,0),this.canvas.height),C(this,fe,v0).call(this,t,i),C(this,fe,Vx).call(this);let s;if(this.currentPath.length!==1)s=C(this,fe,Kx).call(this);else{const p=[t,i];s=[[p,p.slice(),p.slice(),p]]}const o=u(this,ms),c=this.currentPath;this.currentPath=[],x(this,ms,new Path2D);const d=()=>{this.allRawPaths.push(c),this.paths.push(s),this.bezierPath2D.push(o),this._uiManager.rebuild(this)},f=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(C(this,fe,ag).call(this),C(this,fe,lg).call(this)),C(this,fe,md).call(this))};this.addCommands({cmd:d,undo:f,mustExec:!0})},Gx=function(){if(!u(this,Ja))return;x(this,Ja,!1);const t=Math.ceil(this.thickness*this.parentScale),i=this.currentPath.slice(-3),s=i.map(d=>d[0]),o=i.map(d=>d[1]);Math.min(...s)-t,Math.max(...s)+t,Math.min(...o)-t,Math.max(...o)+t;const{ctx:c}=this;c.save(),c.clearRect(0,0,this.canvas.width,this.canvas.height);for(const d of this.bezierPath2D)c.stroke(d);c.stroke(u(this,ms)),c.restore()},Xx=function(t,i,s,o,c,d,f){const p=(i+o)/2,g=(s+c)/2,y=(o+d)/2,w=(c+f)/2;t.bezierCurveTo(p+2*(o-p)/3,g+2*(c-g)/3,y+2*(o-y)/3,w+2*(c-w)/3,y,w)},Kx=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const i=[];let s,[o,c]=t[0];for(s=1;s<t.length-2;s++){const[b,A]=t[s],[k,_]=t[s+1],R=(b+k)/2,D=(A+_)/2,j=[o+2*(b-o)/3,c+2*(A-c)/3],z=[R+2*(b-R)/3,D+2*(A-D)/3];i.push([[o,c],j,z,[R,D]]),[o,c]=[R,D]}const[d,f]=t[s],[p,g]=t[s+1],y=[o+2*(d-o)/3,c+2*(f-c)/3],w=[p+2*(d-p)/3,g+2*(f-g)/3];return i.push([[o,c],y,w,[p,g]]),i},sa=function(){if(this.isEmpty()){C(this,fe,cg).call(this);return}C(this,fe,y0).call(this);const{canvas:t,ctx:i}=this;i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.width,t.height),C(this,fe,cg).call(this);for(const s of this.bezierPath2D)i.stroke(s)},w0=function(t){this.canvas.removeEventListener("pointerleave",u(this,Jh)),this.canvas.removeEventListener("pointermove",u(this,Qh)),this.canvas.removeEventListener("pointerup",u(this,Zh)),this.canvas.addEventListener("pointerdown",u(this,Qa),{signal:this._uiManager._signal}),u(this,Cr)&&clearTimeout(u(this,Cr)),x(this,Cr,setTimeout(()=>{x(this,Cr,null),this.canvas.removeEventListener("contextmenu",$n)},10)),C(this,fe,qx).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},ag=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},lg=function(){x(this,ys,new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&this.setDimensions(i.width,i.height)})),u(this,ys).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=u(this,ys))==null||t.disconnect(),x(this,ys,null)},{once:!0})},sc=function(){if(!u(this,Za))return;const[t,i]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*i),C(this,fe,cg).call(this)},A0=function(t,i){const s=C(this,fe,ug).call(this),o=(t-s)/u(this,Ya),c=(i-s)/u(this,Ka);this.scaleFactor=Math.min(o,c)},cg=function(){const t=C(this,fe,ug).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},Ts=new WeakSet,Yx=function(t){const i=new Path2D;for(let s=0,o=t.length;s<o;s++){const[c,d,f,p]=t[s];s===0&&i.moveTo(...c),i.bezierCurveTo(d[0],d[1],f[0],f[1],p[0],p[1])}return i},b0=function(t,i,s){const[o,c,d,f]=i;switch(s){case 0:for(let p=0,g=t.length;p<g;p+=2)t[p]+=o,t[p+1]=f-t[p+1];break;case 90:for(let p=0,g=t.length;p<g;p+=2){const y=t[p];t[p]=t[p+1]+o,t[p+1]=y+c}break;case 180:for(let p=0,g=t.length;p<g;p+=2)t[p]=d-t[p],t[p+1]+=c;break;case 270:for(let p=0,g=t.length;p<g;p+=2){const y=t[p];t[p]=d-t[p+1],t[p+1]=f-y}break;default:throw new Error("Invalid rotation")}return t},Qx=function(t,i,s){const[o,c,d,f]=i;switch(s){case 0:for(let p=0,g=t.length;p<g;p+=2)t[p]-=o,t[p+1]=f-t[p+1];break;case 90:for(let p=0,g=t.length;p<g;p+=2){const y=t[p];t[p]=t[p+1]-c,t[p+1]=y-o}break;case 180:for(let p=0,g=t.length;p<g;p+=2)t[p]=d-t[p],t[p+1]-=c;break;case 270:for(let p=0,g=t.length;p<g;p+=2){const y=t[p];t[p]=f-t[p+1],t[p+1]=d-y}break;default:throw new Error("Invalid rotation")}return t},Jx=function(t,i,s,o){var g,y;const c=[],d=this.thickness/2,f=t*i+d,p=t*s+d;for(const w of this.paths){const b=[],A=[];for(let k=0,_=w.length;k<_;k++){const[R,D,j,z]=w[k];if(R[0]===z[0]&&R[1]===z[1]&&_===1){const ge=t*R[0]+f,de=t*R[1]+p;b.push(ge,de),A.push(ge,de);break}const B=t*R[0]+f,F=t*R[1]+p,X=t*D[0]+f,Y=t*D[1]+p,Q=t*j[0]+f,ne=t*j[1]+p,oe=t*z[0]+f,_e=t*z[1]+p;k===0&&(b.push(B,F),A.push(B,F)),b.push(X,Y,Q,ne,oe,_e),A.push(X,Y),k===_-1&&A.push(oe,_e)}c.push({bezier:C(g=At,Ts,b0).call(g,b,o,this.rotation),points:C(y=At,Ts,b0).call(y,A,o,this.rotation)})}return c},S0=function(){let t=1/0,i=-1/0,s=1/0,o=-1/0;for(const c of this.paths)for(const[d,f,p,g]of c){const y=Ee.bezierBoundingBox(...d,...f,...p,...g);t=Math.min(t,y[0]),s=Math.min(s,y[1]),i=Math.max(i,y[2]),o=Math.max(o,y[3])}return[t,s,i,o]},ug=function(){return u(this,ki)?Math.ceil(this.thickness*this.parentScale):0},md=function(t=!1){if(this.isEmpty())return;if(!u(this,ki)){C(this,fe,sa).call(this);return}const i=C(this,fe,S0).call(this),s=C(this,fe,ug).call(this);x(this,Ya,Math.max(rt.MIN_SIZE,i[2]-i[0])),x(this,Ka,Math.max(rt.MIN_SIZE,i[3]-i[1]));const o=Math.ceil(s+u(this,Ya)*this.scaleFactor),c=Math.ceil(s+u(this,Ka)*this.scaleFactor),[d,f]=this.parentDimensions;this.width=o/d,this.height=c/f,this.setAspectRatio(o,c);const p=this.translationX,g=this.translationY;this.translationX=-i[0],this.translationY=-i[1],C(this,fe,sc).call(this),C(this,fe,sa).call(this),x(this,el,o),x(this,tl,c),this.setDims(o,c);const y=t?s/this.scaleFactor/2:0;this.translate(p-this.translationX-y,g-this.translationY-y)},T(At,Ts),ze(At,"_defaultColor",null),ze(At,"_defaultOpacity",1),ze(At,"_defaultThickness",1),ze(At,"_type","ink"),ze(At,"_editorType",Xe.INK);let m0=At;var rn,sn,yo,vs,vo,iu,kr,ws,Tr,ir,ef,Ze,yd,vd,dg,x0,Zx,e_,_0,hg,t_;const Sd=class Sd extends rt{constructor(t){super({...t,name:"stampEditor"});T(this,Ze);T(this,rn,null);T(this,sn,null);T(this,yo,null);T(this,vs,null);T(this,vo,null);T(this,iu,"");T(this,kr,null);T(this,ws,null);T(this,Tr,null);T(this,ir,!1);T(this,ef,!1);x(this,vs,t.bitmapUrl),x(this,vo,t.bitmapFile)}static initialize(t,i){rt.initialize(t,i)}static get supportedTypes(){return Qe(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return Qe(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,i){i.pasteEditor(Xe.STAMP,{bitmapFile:t.getAsFile()})}remove(){var t,i;u(this,sn)&&(x(this,rn,null),this._uiManager.imageManager.deleteId(u(this,sn)),(t=u(this,kr))==null||t.remove(),x(this,kr,null),(i=u(this,ws))==null||i.disconnect(),x(this,ws,null),u(this,Tr)&&(clearTimeout(u(this,Tr)),x(this,Tr,null))),super.remove()}rebuild(){if(!this.parent){u(this,sn)&&C(this,Ze,dg).call(this);return}super.rebuild(),this.div!==null&&(u(this,sn)&&u(this,kr)===null&&C(this,Ze,dg).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(u(this,yo)||u(this,rn)||u(this,vs)||u(this,vo)||u(this,sn))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;if(this.width&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),u(this,rn)?C(this,Ze,x0).call(this):C(this,Ze,dg).call(this),this.width){const[s,o]=this.parentDimensions;this.setAt(t*s,i*o,this.width*s,this.height*o)}return this.div}getImageForAltText(){return u(this,kr)}static deserialize(t,i,s){if(t instanceof vx)return null;const o=super.deserialize(t,i,s),{rect:c,bitmapUrl:d,bitmapId:f,isSvg:p,accessibilityData:g}=t;f&&s.imageManager.isValidId(f)?x(o,sn,f):x(o,vs,d),x(o,ir,p);const[y,w]=o.pageDimensions;return o.width=(c[2]-c[0])/y,o.height=(c[3]-c[1])/w,g&&(o.altTextData=g),o}serialize(t=!1,i=null){if(this.isEmpty())return null;const s={annotationType:Xe.STAMP,bitmapId:u(this,sn),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:u(this,ir),structTreeParentId:this._structTreeParentId};if(t)return s.bitmapUrl=C(this,Ze,hg).call(this,!0),s.accessibilityData=this.altTextData,s;const{decorative:o,altText:c}=this.altTextData;if(!o&&c&&(s.accessibilityData={type:"Figure",alt:c}),i===null)return s;i.stamps||(i.stamps=new Map);const d=u(this,ir)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(u(this,sn)))i.stamps.set(u(this,sn),{area:d,serialized:s}),s.bitmap=C(this,Ze,hg).call(this,!1);else if(u(this,ir)){const f=i.stamps.get(u(this,sn));d>f.area&&(f.area=d,f.serialized.bitmap.close(),f.serialized.bitmap=C(this,Ze,hg).call(this,!1))}return s}};rn=new WeakMap,sn=new WeakMap,yo=new WeakMap,vs=new WeakMap,vo=new WeakMap,iu=new WeakMap,kr=new WeakMap,ws=new WeakMap,Tr=new WeakMap,ir=new WeakMap,ef=new WeakMap,Ze=new WeakSet,yd=function(t,i=!1){if(!t){this.remove();return}x(this,rn,t.bitmap),i||(x(this,sn,t.id),x(this,ir,t.isSvg)),t.file&&x(this,iu,t.file.name),C(this,Ze,x0).call(this)},vd=function(){x(this,yo,null),this._uiManager.enableWaiting(!1),u(this,kr)&&this.div.focus()},dg=function(){if(u(this,sn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(u(this,sn)).then(s=>C(this,Ze,yd).call(this,s,!0)).finally(()=>C(this,Ze,vd).call(this));return}if(u(this,vs)){const s=u(this,vs);x(this,vs,null),this._uiManager.enableWaiting(!0),x(this,yo,this._uiManager.imageManager.getFromUrl(s).then(o=>C(this,Ze,yd).call(this,o)).finally(()=>C(this,Ze,vd).call(this)));return}if(u(this,vo)){const s=u(this,vo);x(this,vo,null),this._uiManager.enableWaiting(!0),x(this,yo,this._uiManager.imageManager.getFromFile(s).then(o=>C(this,Ze,yd).call(this,o)).finally(()=>C(this,Ze,vd).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Sd.supportedTypesStr;const i=this._uiManager._signal;x(this,yo,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(t.files[0]);C(this,Ze,yd).call(this,o)}s()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>C(this,Ze,vd).call(this))),t.click()},x0=function(){const{div:t}=this;let{width:i,height:s}=u(this,rn);const[o,c]=this.pageDimensions,d=.75;if(this.width)i=this.width*o,s=this.height*c;else if(i>d*o||s>d*c){const y=Math.min(d*o/i,d*c/s);i*=y,s*=y}const[f,p]=this.parentDimensions;this.setDims(i*f/o,s*p/c),this._uiManager.enableWaiting(!1);const g=x(this,kr,document.createElement("canvas"));t.append(g),t.hidden=!1,C(this,Ze,_0).call(this,i,s),C(this,Ze,t_).call(this),u(this,ef)||(this.parent.addUndoableEditor(this),x(this,ef,!0)),this._reportTelemetry({action:"inserted_image"}),u(this,iu)&&g.setAttribute("aria-label",u(this,iu))},Zx=function(t,i){var d;const[s,o]=this.parentDimensions;this.width=t/s,this.height=i/o,this.setDims(t,i),(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,u(this,Tr)!==null&&clearTimeout(u(this,Tr)),x(this,Tr,setTimeout(()=>{x(this,Tr,null),C(this,Ze,_0).call(this,t,i)},200))},e_=function(t,i){const{width:s,height:o}=u(this,rn);let c=s,d=o,f=u(this,rn);for(;c>2*t||d>2*i;){const p=c,g=d;c>2*t&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2)),d>2*i&&(d=d>=16384?Math.floor(d/2)-1:Math.ceil(d/2));const y=new OffscreenCanvas(c,d);y.getContext("2d").drawImage(f,0,0,p,g,0,0,c,d),f=y.transferToImageBitmap()}return f},_0=function(t,i){t=Math.ceil(t),i=Math.ceil(i);const s=u(this,kr);if(!s||s.width===t&&s.height===i)return;s.width=t,s.height=i;const o=u(this,ir)?u(this,rn):C(this,Ze,e_).call(this,t,i);if(this._uiManager.hasMLManager&&!this.hasAltText()){const f=new OffscreenCanvas(t,i).getContext("2d");f.drawImage(o,0,0,o.width,o.height,0,0,t,i),this._uiManager.mlGuess({service:"image-to-text",request:{data:f.getImageData(0,0,t,i).data,width:t,height:i,channels:4}}).then(p=>{const g=(p==null?void 0:p.output)||"";this.parent&&g&&!this.hasAltText()&&(this.altTextData={altText:g,decorative:!1})})}const c=s.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(o,0,0,o.width,o.height,0,0,t,i)},hg=function(t){if(t){if(u(this,ir)){const o=this._uiManager.imageManager.getSvgUrl(u(this,sn));if(o)return o}const i=document.createElement("canvas");return{width:i.width,height:i.height}=u(this,rn),i.getContext("2d").drawImage(u(this,rn),0,0),i.toDataURL()}if(u(this,ir)){const[i,s]=this.pageDimensions,o=Math.round(this.width*i*Eo.PDF_TO_CSS_UNITS),c=Math.round(this.height*s*Eo.PDF_TO_CSS_UNITS),d=new OffscreenCanvas(o,c);return d.getContext("2d").drawImage(u(this,rn),0,0,u(this,rn).width,u(this,rn).height,0,0,o,c),d.transferToImageBitmap()}return structuredClone(u(this,rn))},t_=function(){this._uiManager._signal&&(x(this,ws,new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&C(this,Ze,Zx).call(this,i.width,i.height)})),u(this,ws).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=u(this,ws))==null||t.disconnect(),x(this,ws,null)},{once:!0}))},ze(Sd,"_type","stamp"),ze(Sd,"_editorType",Xe.STAMP);let E0=Sd;var nl,ru,Rr,il,As,bs,Ss,ci,wo,su,ou,En,ke,Ao,on,n_,k0,T0,R0,fg;const $i=class $i{constructor({uiManager:e,pageIndex:t,div:i,accessibilityManager:s,annotationLayer:o,drawLayer:c,textLayer:d,viewport:f,l10n:p}){T(this,on);T(this,nl);T(this,ru,!1);T(this,Rr,null);T(this,il,null);T(this,As,null);T(this,bs,null);T(this,Ss,null);T(this,ci,new Map);T(this,wo,!1);T(this,su,!1);T(this,ou,!1);T(this,En,null);T(this,ke);const g=[...u($i,Ao).values()];if(!$i._initialized){$i._initialized=!0;for(const y of g)y.initialize(p,e)}e.registerEditorTypes(g),x(this,ke,e),this.pageIndex=t,this.div=i,x(this,nl,s),x(this,Rr,o),this.viewport=f,x(this,En,d),this.drawLayer=c,u(this,ke).addLayer(this)}get isEmpty(){return u(this,ci).size===0}get isInvisible(){return this.isEmpty&&u(this,ke).getMode()===Xe.NONE}updateToolbar(e){u(this,ke).updateToolbar(e)}updateMode(e=u(this,ke).getMode()){switch(C(this,on,fg).call(this),e){case Xe.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Xe.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Xe.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const i of u($i,Ao).values())t.toggle(`${i._type}Editing`,e===i._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=u(this,En))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(u(this,ke).getMode()!==Xe.INK)return;if(!e){for(const i of u(this,ci).values())if(i.isEmpty()){i.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){u(this,ke).setEditingState(e)}addCommands(e){u(this,ke).addCommands(e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=u(this,Rr))==null||t.div.classList.toggle("disabled",!e)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const i of u(this,ci).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(u(this,ke).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!u(this,Rr))return;const t=u(this,Rr).getEditableAnnotations();for(const i of t){if(i.hide(),u(this,ke).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const s=this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}}disable(){var s;x(this,ou,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const o of u(this,ci).values())if(o.disableEditing(),!!o.annotationElementId){if(o.serialize()!==null){e.set(o.annotationElementId,o);continue}else t.set(o.annotationElementId,o);(s=this.getEditableAnnotation(o.annotationElementId))==null||s.show(),o.remove()}if(u(this,Rr)){const o=u(this,Rr).getEditableAnnotations();for(const c of o){const{id:d}=c.data;if(u(this,ke).isDeletedAnnotationElement(d))continue;let f=t.get(d);if(f){f.resetAnnotationElement(c),f.show(!1),c.show();continue}f=e.get(d),f&&(u(this,ke).addChangedExistingAnnotation(f),f.renderAnnotationElement(c),f.show(!1)),c.show()}}C(this,on,fg).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const o of u($i,Ao).values())i.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),x(this,ou,!1)}getEditableAnnotation(e){var t;return((t=u(this,Rr))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){u(this,ke).getActive()!==e&&u(this,ke).setActiveEditor(e)}enableTextSelection(){var e;this.div.tabIndex=-1,(e=u(this,En))!=null&&e.div&&!u(this,bs)&&(x(this,bs,C(this,on,n_).bind(this)),u(this,En).div.addEventListener("pointerdown",u(this,bs),{signal:u(this,ke)._signal}),u(this,En).div.classList.add("highlighting"))}disableTextSelection(){var e;this.div.tabIndex=0,(e=u(this,En))!=null&&e.div&&u(this,bs)&&(u(this,En).div.removeEventListener("pointerdown",u(this,bs)),x(this,bs,null),u(this,En).div.classList.remove("highlighting"))}enableClick(){if(u(this,As))return;const e=u(this,ke)._signal;x(this,As,this.pointerdown.bind(this)),x(this,il,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",u(this,As),{signal:e}),this.div.addEventListener("pointerup",u(this,il),{signal:e})}disableClick(){u(this,As)&&(this.div.removeEventListener("pointerdown",u(this,As)),this.div.removeEventListener("pointerup",u(this,il)),x(this,As,null),x(this,il,null))}attach(e){u(this,ci).set(e.id,e);const{annotationElementId:t}=e;t&&u(this,ke).isDeletedAnnotationElement(t)&&u(this,ke).removeDeletedAnnotationElement(e)}detach(e){var t;u(this,ci).delete(e.id),(t=u(this,nl))==null||t.removePointerInTextLayer(e.contentDiv),!u(this,ou)&&e.annotationElementId&&u(this,ke).addDeletedAnnotationElement(e)}remove(e){this.detach(e),u(this,ke).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,u(this,su)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(u(this,ke).addDeletedAnnotationElement(e.annotationElementId),rt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),u(this,ke).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),u(this,ke).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var i;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!u(this,Ss)&&(e._focusEventsAllowed=!1,x(this,Ss,setTimeout(()=>{x(this,Ss,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:u(this,ke)._signal}),t.focus())},0))),e._structTreeParentId=(i=u(this,nl))==null?void 0:i.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:t,undo:i,mustExec:!1})}getNextId(){return u(this,ke).getId()}get _signal(){return u(this,ke)._signal}canCreateNewEmptyEditor(){var e;return(e=u(this,on,k0))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){u(this,ke).updateToolbar(e),u(this,ke).updateMode(e);const{offsetX:i,offsetY:s}=C(this,on,R0).call(this),o=this.getNextId(),c=C(this,on,T0).call(this,{parent:this,id:o,x:i,y:s,uiManager:u(this,ke),isCentered:!0,...t});c&&this.add(c)}deserialize(e){var t;return((t=u($i,Ao).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,u(this,ke)))||null}createAndAddNewEditor(e,t,i={}){const s=this.getNextId(),o=C(this,on,T0).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:u(this,ke),isCentered:t,...i});return o&&this.add(o),o}addNewEditor(){this.createAndAddNewEditor(C(this,on,R0).call(this),!0)}setSelected(e){u(this,ke).setSelected(e)}toggleSelected(e){u(this,ke).toggleSelected(e)}isSelected(e){return u(this,ke).isSelected(e)}unselect(e){u(this,ke).unselect(e)}pointerup(e){const{isMac:t}=zn.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&u(this,wo)){if(x(this,wo,!1),!u(this,ru)){x(this,ru,!0);return}if(u(this,ke).getMode()===Xe.STAMP){u(this,ke).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(u(this,ke).getMode()===Xe.HIGHLIGHT&&this.enableTextSelection(),u(this,wo)){x(this,wo,!1);return}const{isMac:t}=zn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;x(this,wo,!0);const i=u(this,ke).getActive();x(this,ru,!i||i.isEmpty())}findNewParent(e,t,i){const s=u(this,ke).findParent(t,i);return s===null||s===this?!1:(s.changeParent(e),!0)}destroy(){var e,t;((e=u(this,ke).getActive())==null?void 0:e.parent)===this&&(u(this,ke).commitOrRemove(),u(this,ke).setActiveEditor(null)),u(this,Ss)&&(clearTimeout(u(this,Ss)),x(this,Ss,null));for(const i of u(this,ci).values())(t=u(this,nl))==null||t.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,u(this,ci).clear(),u(this,ke).removeLayer(this)}render({viewport:e}){this.viewport=e,al(this.div,e);for(const t of u(this,ke).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){u(this,ke).commitOrRemove(),C(this,on,fg).call(this);const t=this.viewport.rotation,i=e.rotation;if(this.viewport=e,al(this.div,{rotation:i}),t!==i)for(const s of u(this,ci).values())s.rotate(i);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return u(this,ke).viewParameters.realScale}};nl=new WeakMap,ru=new WeakMap,Rr=new WeakMap,il=new WeakMap,As=new WeakMap,bs=new WeakMap,Ss=new WeakMap,ci=new WeakMap,wo=new WeakMap,su=new WeakMap,ou=new WeakMap,En=new WeakMap,ke=new WeakMap,Ao=new WeakMap,on=new WeakSet,n_=function(e){if(u(this,ke).unselectAll(),e.target===u(this,En).div){const{isMac:t}=zn.platform;if(e.button!==0||e.ctrlKey&&t)return;u(this,ke).showAllEditors("highlight",!0,!0),u(this,En).div.classList.add("free"),Eg.startHighlighting(this,u(this,ke).direction==="ltr",e),u(this,En).div.addEventListener("pointerup",()=>{u(this,En).div.classList.remove("free")},{once:!0,signal:u(this,ke)._signal}),e.preventDefault()}},k0=function(){return u($i,Ao).get(u(this,ke).getMode())},T0=function(e){const t=u(this,on,k0);return t?new t.prototype.constructor(e):null},R0=function(){const{x:e,y:t,width:i,height:s}=this.div.getBoundingClientRect(),o=Math.max(0,e),c=Math.max(0,t),d=Math.min(window.innerWidth,e+i),f=Math.min(window.innerHeight,t+s),p=(o+d)/2-e,g=(c+f)/2-t,[y,w]=this.viewport.rotation%180===0?[p,g]:[g,p];return{offsetX:y,offsetY:w}},fg=function(){x(this,su,!0);for(const e of u(this,ci).values())e.isEmpty()&&e.remove();x(this,su,!1)},ze($i,"_initialized",!1),T($i,Ao,new Map([s0,m0,E0,Eg].map(e=>[e._editorType,e])));let C0=$i;var Pr,tf,zt,bo,nf,L0,hl,M0,i_;const Jt=class Jt{constructor({pageIndex:e}){T(this,hl);T(this,Pr,null);T(this,tf,0);T(this,zt,new Map);T(this,bo,new Map);this.pageIndex=e}setParent(e){if(!u(this,Pr)){x(this,Pr,e);return}if(u(this,Pr)!==e){if(u(this,zt).size>0)for(const t of u(this,zt).values())t.remove(),e.append(t);x(this,Pr,e)}}static get _svgFactory(){return Qe(this,"_svgFactory",new $0)}highlight(e,t,i,s=!1){const o=Qn(this,tf)._++,c=C(this,hl,M0).call(this,e.box);c.classList.add("highlight"),e.free&&c.classList.add("free");const d=Jt._svgFactory.createElement("defs");c.append(d);const f=Jt._svgFactory.createElement("path");d.append(f);const p=`path_p${this.pageIndex}_${o}`;f.setAttribute("id",p),f.setAttribute("d",e.toSVGPath()),s&&u(this,bo).set(o,f);const g=C(this,hl,i_).call(this,d,p),y=Jt._svgFactory.createElement("use");return c.append(y),c.setAttribute("fill",t),c.setAttribute("fill-opacity",i),y.setAttribute("href",`#${p}`),u(this,zt).set(o,c),{id:o,clipPathId:`url(#${g})`}}highlightOutline(e){const t=Qn(this,tf)._++,i=C(this,hl,M0).call(this,e.box);i.classList.add("highlightOutline");const s=Jt._svgFactory.createElement("defs");i.append(s);const o=Jt._svgFactory.createElement("path");s.append(o);const c=`path_p${this.pageIndex}_${t}`;o.setAttribute("id",c),o.setAttribute("d",e.toSVGPath()),o.setAttribute("vector-effect","non-scaling-stroke");let d;if(e.free){i.classList.add("free");const g=Jt._svgFactory.createElement("mask");s.append(g),d=`mask_p${this.pageIndex}_${t}`,g.setAttribute("id",d),g.setAttribute("maskUnits","objectBoundingBox");const y=Jt._svgFactory.createElement("rect");g.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const w=Jt._svgFactory.createElement("use");g.append(w),w.setAttribute("href",`#${c}`),w.setAttribute("stroke","none"),w.setAttribute("fill","black"),w.setAttribute("fill-rule","nonzero"),w.classList.add("mask")}const f=Jt._svgFactory.createElement("use");i.append(f),f.setAttribute("href",`#${c}`),d&&f.setAttribute("mask",`url(#${d})`);const p=f.cloneNode();return i.append(p),f.classList.add("mainOutline"),p.classList.add("secondaryOutline"),u(this,zt).set(t,i),t}finalizeLine(e,t){const i=u(this,bo).get(e);u(this,bo).delete(e),this.updateBox(e,t.box),i.setAttribute("d",t.toSVGPath())}updateLine(e,t){u(this,zt).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}removeFreeHighlight(e){this.remove(e),u(this,bo).delete(e)}updatePath(e,t){u(this,bo).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var i;C(i=Jt,nf,L0).call(i,u(this,zt).get(e),t)}show(e,t){u(this,zt).get(e).classList.toggle("hidden",!t)}rotate(e,t){u(this,zt).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){u(this,zt).get(e).setAttribute("fill",t)}changeOpacity(e,t){u(this,zt).get(e).setAttribute("fill-opacity",t)}addClass(e,t){u(this,zt).get(e).classList.add(t)}removeClass(e,t){u(this,zt).get(e).classList.remove(t)}remove(e){u(this,Pr)!==null&&(u(this,zt).get(e).remove(),u(this,zt).delete(e))}destroy(){x(this,Pr,null);for(const e of u(this,zt).values())e.remove();u(this,zt).clear()}};Pr=new WeakMap,tf=new WeakMap,zt=new WeakMap,bo=new WeakMap,nf=new WeakSet,L0=function(e,{x:t=0,y:i=0,width:s=1,height:o=1}={}){const{style:c}=e;c.top=`${100*i}%`,c.left=`${100*t}%`,c.width=`${100*s}%`,c.height=`${100*o}%`},hl=new WeakSet,M0=function(e){var i;const t=Jt._svgFactory.create(1,1,!0);return u(this,Pr).append(t),t.setAttribute("aria-hidden",!0),C(i=Jt,nf,L0).call(i,t,e),t},i_=function(e,t){const i=Jt._svgFactory.createElement("clipPath");e.append(i);const s=`clip_${t}`;i.setAttribute("id",s),i.setAttribute("clipPathUnits","objectBoundingBox");const o=Jt._svgFactory.createElement("use");return i.append(o),o.setAttribute("href",`#${t}`),o.classList.add("clip"),s},T(Jt,nf);let P0=Jt;Fe.AbortException;Fe.AnnotationEditorLayer;Fe.AnnotationEditorParamsType;Fe.AnnotationEditorType;Fe.AnnotationEditorUIManager;var r_=Fe.AnnotationLayer,s_=Fe.AnnotationMode;Fe.CMapCompressionType;Fe.ColorPicker;Fe.DOMSVGFactory;Fe.DrawLayer;Fe.FeatureTest;var Q0=Fe.GlobalWorkerOptions;Fe.ImageKind;Fe.InvalidPDFException;Fe.MissingPDFException;Fe.OPS;Fe.Outliner;var XP=Fe.PDFDataRangeTransport;Fe.PDFDateString;Fe.PDFWorker;Fe.PasswordResponses;Fe.PermissionFlag;Fe.PixelsPerInch;Fe.RenderingCancelledException;var o_=Fe.TextLayer;Fe.UnexpectedResponseException;Fe.Util;Fe.VerbosityLevel;Fe.XfaLayer;Fe.build;Fe.createValidAbsoluteUrl;Fe.fetchData;var a_=Fe.getDocument;Fe.getFilenameFromUrl;Fe.getPdfFilenameFromUrl;Fe.getXfaPageViewport;Fe.isDataScheme;Fe.isPdfFile;Fe.noContextMenu;Fe.normalizeUnicode;Fe.renderTextLayer;Fe.setLayerDimensions;Fe.shadow;Fe.updateTextLayer;Fe.version;const KP=Object.freeze(Object.defineProperty({__proto__:null,AnnotationLayer:r_,AnnotationMode:s_,GlobalWorkerOptions:Q0,PDFDataRangeTransport:XP,TextLayer:o_,getDocument:a_},Symbol.toStringTag,{value:"Module"}));var Vt=function(l,e,t){if(t||arguments.length===2)for(var i=0,s=e.length,o;i<s;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return l.concat(o||Array.prototype.slice.call(e))},YP=["onCopy","onCut","onPaste"],QP=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],JP=["onFocus","onBlur"],ZP=["onInput","onInvalid","onReset","onSubmit"],eL=["onLoad","onError"],tL=["onKeyDown","onKeyPress","onKeyUp"],nL=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],iL=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],rL=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],sL=["onSelect"],oL=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],aL=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],lL=["onScroll"],cL=["onWheel"],uL=["onAnimationStart","onAnimationEnd","onAnimationIteration"],dL=["onTransitionEnd"],hL=["onToggle"],fL=["onChange"],pL=Vt(Vt(Vt(Vt(Vt(Vt(Vt(Vt(Vt(Vt(Vt(Vt(Vt(Vt(Vt(Vt(Vt(Vt([],YP,!0),QP,!0),JP,!0),ZP,!0),eL,!0),tL,!0),nL,!0),iL,!0),rL,!0),sL,!0),oL,!0),aL,!0),lL,!0),cL,!0),uL,!0),dL,!0),fL,!0),hL,!0);function l_(l,e){var t={};return pL.forEach(function(i){var s=l[i];s&&(e?t[i]=(function(o){return s(o,e(i))}):t[i]=s)}),t}function pf(l){var e=!1,t=new Promise(function(i,s){l.then(function(o){return!e&&i(o)}).catch(function(o){return!e&&s(o)})});return{promise:t,cancel:function(){e=!0}}}function c_(l){var e,t,i="";if(typeof l=="string"||typeof l=="number")i+=l;else if(typeof l=="object")if(Array.isArray(l)){var s=l.length;for(e=0;e<s;e++)l[e]&&(t=c_(l[e]))&&(i&&(i+=" "),i+=t)}else for(t in l)l[t]&&(i&&(i+=" "),i+=t);return i}function sm(){for(var l,e,t=0,i="",s=arguments.length;t<s;t++)(l=arguments[t])&&(e=c_(l))&&(i&&(i+=" "),i+=e);return i}var gL="Invariant failed";function ct(l,e){if(!l)throw new Error(gL)}var uv,hS;function mL(){if(hS)return uv;hS=1;var l=function(){};return uv=l,uv}var yL=mL();const mn=PS(yL);var fS=Object.prototype.hasOwnProperty;function pS(l,e,t){for(t of l.keys())if(uc(t,e))return t}function uc(l,e){var t,i,s;if(l===e)return!0;if(l&&e&&(t=l.constructor)===e.constructor){if(t===Date)return l.getTime()===e.getTime();if(t===RegExp)return l.toString()===e.toString();if(t===Array){if((i=l.length)===e.length)for(;i--&&uc(l[i],e[i]););return i===-1}if(t===Set){if(l.size!==e.size)return!1;for(i of l)if(s=i,s&&typeof s=="object"&&(s=pS(e,s),!s)||!e.has(s))return!1;return!0}if(t===Map){if(l.size!==e.size)return!1;for(i of l)if(s=i[0],s&&typeof s=="object"&&(s=pS(e,s),!s)||!uc(i[1],e.get(s)))return!1;return!0}if(t===ArrayBuffer)l=new Uint8Array(l),e=new Uint8Array(e);else if(t===DataView){if((i=l.byteLength)===e.byteLength)for(;i--&&l.getInt8(i)===e.getInt8(i););return i===-1}if(ArrayBuffer.isView(l)){if((i=l.byteLength)===e.byteLength)for(;i--&&l[i]===e[i];);return i===-1}if(!t||typeof l=="object"){i=0;for(t in l)if(fS.call(l,t)&&++i&&!fS.call(e,t)||!(t in e)||!uc(l[t],e[t]))return!1;return Object.keys(e).length===i}}return l!==l&&e!==e}const u_=H.createContext(null);function dc({children:l,type:e}){return P.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:l})}const vL="noopener noreferrer nofollow";class wL{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return ct(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){ct(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{ct(this.pdfDocument),ct(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{ct(Array.isArray(t));const i=t[0];new Promise(s=>{ct(this.pdfDocument),i instanceof Object?this.pdfDocument.getPageIndex(i).then(o=>{s(o)}).catch(()=>{ct(!1)}):typeof i=="number"?s(i):ct(!1)}).then(s=>{const o=s+1;ct(this.pdfViewer),ct(o>=1&&o<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:s,pageNumber:o})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;ct(this.pdfViewer),ct(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,i){e.href=t,e.rel=this.externalLinkRel||vL,e.target=i?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const gS={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},om=typeof document<"u",d_=om&&window.location.protocol==="file:";function AL(l){return typeof l<"u"}function ta(l){return AL(l)&&l!==null}function bL(l){return typeof l=="string"}function SL(l){return l instanceof ArrayBuffer}function EL(l){return ct(om),l instanceof Blob}function D0(l){return bL(l)&&/^data:/.test(l)}function mS(l){ct(D0(l));const[e="",t=""]=l.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function xL(){return om&&window.devicePixelRatio||1}const h_="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function yS(){mn(!d_,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${h_}`)}function _L(){mn(!d_,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${h_}`)}function ul(l){l!=null&&l.cancel&&l.cancel()}function I0(l,e){return Object.defineProperty(l,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(l,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(l,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(l,"originalHeight",{get(){return this.view[3]},configurable:!0}),l}function CL(l){return l.name==="RenderingCancelledException"}function kL(l){return new Promise((e,t)=>{const i=new FileReader;i.onload=()=>{if(!i.result)return t(new Error("Error while reading a file."));e(i.result)},i.onerror=s=>{if(!s.target)return t(new Error("Error while reading a file."));const{error:o}=s.target;if(!o)return t(new Error("Error while reading a file."));switch(o.code){case o.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case o.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case o.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},i.readAsArrayBuffer(l)})}function TL(l,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return l}}function lu(){return H.useReducer(TL,{value:void 0,error:void 0})}var RL=function(l,e,t,i){function s(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function d(g){try{p(i.next(g))}catch(y){c(y)}}function f(g){try{p(i.throw(g))}catch(y){c(y)}}function p(g){g.done?o(g.value):s(g.value).then(d,f)}p((i=i.apply(l,e||[])).next())})},vS=function(l,e){var t={};for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&e.indexOf(i)<0&&(t[i]=l[i]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(l);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(l,i[s])&&(t[i[s]]=l[i[s]]);return t};const{PDFDataRangeTransport:PL}=KP,LL=(l,e)=>{switch(e){case gS.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");l(t);break}case gS.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");l(t);break}}};function wS(l){return typeof l=="object"&&l!==null&&("data"in l||"range"in l||"url"in l)}const ML=H.forwardRef(function(e,t){var{children:i,className:s,error:o="Failed to load PDF file.",externalLinkRel:c,externalLinkTarget:d,file:f,inputRef:p,imageResourcesPath:g,loading:y="Loading PDF",noData:w="No PDF file specified.",onItemClick:b,onLoadError:A,onLoadProgress:k,onLoadSuccess:_,onPassword:R=LL,onSourceError:D,onSourceSuccess:j,options:z,renderMode:B,rotate:F}=e,X=vS(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[Y,Q]=lu(),{value:ne,error:oe}=Y,[_e,ge]=lu(),{value:de,error:ie}=_e,re=H.useRef(new wL),Z=H.useRef([]),q=H.useRef(void 0),ue=H.useRef(void 0);f&&f!==q.current&&wS(f)&&(mn(!uc(f,q.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),q.current=f),z&&z!==ue.current&&(mn(!uc(z,ue.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),ue.current=z);const ae=H.useRef({scrollPageIntoView:qe=>{const{dest:Oe,pageNumber:je,pageIndex:et=je-1}=qe;if(b){b({dest:Oe,pageIndex:et,pageNumber:je});return}const Lt=Z.current[et];if(Lt){Lt.scrollIntoView();return}mn(!1,`An internal link leading to page ${je} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});H.useImperativeHandle(t,()=>({linkService:re,pages:Z,viewer:ae}),[]);function M(){j&&j()}function $(){oe&&(mn(!1,oe.toString()),D&&D(oe))}function le(){Q({type:"RESET"})}H.useEffect(le,[f,Q]);const me=H.useCallback(()=>RL(this,void 0,void 0,function*(){if(!f)return null;if(typeof f=="string")return D0(f)?{data:mS(f)}:(yS(),{url:f});if(f instanceof PL)return{range:f};if(SL(f))return{data:f};if(om&&EL(f))return{data:yield kL(f)};if(ct(typeof f=="object"),ct(wS(f)),"url"in f&&typeof f.url=="string"){if(D0(f.url)){const{url:qe}=f,Oe=vS(f,["url"]),je=mS(qe);return Object.assign({data:je},Oe)}yS()}return f}),[f]);H.useEffect(()=>{const qe=pf(me());return qe.promise.then(Oe=>{Q({type:"RESOLVE",value:Oe})}).catch(Oe=>{Q({type:"REJECT",error:Oe})}),()=>{ul(qe)}},[me,Q]),H.useEffect(()=>{if(!(typeof ne>"u")){if(ne===!1){$();return}M()}},[ne]);function Se(){de&&(_&&_(de),Z.current=new Array(de.numPages),re.current.setDocument(de))}function Te(){ie&&(mn(!1,ie.toString()),A&&A(ie))}H.useEffect(function(){ge({type:"RESET"})},[ge,ne]),H.useEffect(function(){if(!ne)return;const Oe=Object.assign(Object.assign({},ne),z),je=a_(Oe);k&&(je.onProgress=k),R&&(je.onPassword=R);const et=je;return et.promise.then(Lt=>{ge({type:"RESOLVE",value:Lt})}).catch(Lt=>{et.destroyed||ge({type:"REJECT",error:Lt})}),()=>{et.destroy()}},[z,ge,ne]),H.useEffect(()=>{if(!(typeof de>"u")){if(de===!1){Te();return}Se()}},[de]),H.useEffect(function(){re.current.setViewer(ae.current),re.current.setExternalLinkRel(c),re.current.setExternalLinkTarget(d)},[c,d]);const Ce=H.useCallback((qe,Oe)=>{Z.current[qe]=Oe},[]),De=H.useCallback(qe=>{delete Z.current[qe]},[]),He=H.useMemo(()=>({imageResourcesPath:g,linkService:re.current,onItemClick:b,pdf:de,registerPage:Ce,renderMode:B,rotate:F,unregisterPage:De}),[g,b,de,Ce,B,F,De]),Be=H.useMemo(()=>l_(X,()=>de),[X,de]);function Wn(){return P.jsx(u_.Provider,{value:He,children:i})}function vn(){return f?de==null?P.jsx(dc,{type:"loading",children:typeof y=="function"?y():y}):de===!1?P.jsx(dc,{type:"error",children:typeof o=="function"?o():o}):Wn():P.jsx(dc,{type:"no-data",children:typeof w=="function"?w():w})}return P.jsx("div",Object.assign({className:sm("react-pdf__Document",s),ref:p,style:{"--scale-factor":"1"}},Be,{children:vn()}))});function f_(){return H.useContext(u_)}function p_(){for(var l=[],e=0;e<arguments.length;e++)l[e]=arguments[e];var t=l.filter(Boolean);if(t.length<=1){var i=t[0];return i||null}return function(o){t.forEach(function(c){typeof c=="function"?c(o):c&&(c.current=o)})}}const g_=H.createContext(null),m_={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},DL=/^H(\d+)$/;function IL(l){return l in m_}function am(l){return"children"in l}function y_(l){return am(l)?l.children.length===1&&0 in l.children&&"id"in l.children[0]:!1}function FL(l){const e={};if(am(l)){const{role:t}=l,i=t.match(DL);if(i)e.role="heading",e["aria-level"]=Number(i[1]);else if(IL(t)){const s=m_[t];s&&(e.role=s)}}return e}function v_(l){const e={};if(am(l)){if(l.alt!==void 0&&(e["aria-label"]=l.alt),l.lang!==void 0&&(e.lang=l.lang),y_(l)){const[t]=l.children;if(t){const i=v_(t);return Object.assign(Object.assign({},e),i)}}}else"id"in l&&(e["aria-owns"]=l.id);return e}function OL(l){return l?Object.assign(Object.assign({},FL(l)),v_(l)):null}function w_({className:l,node:e}){const t=H.useMemo(()=>OL(e),[e]),i=H.useMemo(()=>!am(e)||y_(e)?null:e.children.map((s,o)=>P.jsx(w_,{node:s},o)),[e]);return P.jsx("span",Object.assign({className:l},t,{children:i}))}function lm(){return H.useContext(g_)}function NL(){const l=lm();ct(l);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=l,[i,s]=lu(),{value:o,error:c}=i,{customTextRenderer:d,page:f}=l;function p(){o&&t&&t(o)}function g(){c&&(mn(!1,c.toString()),e&&e(c))}return H.useEffect(function(){s({type:"RESET"})},[s,f]),H.useEffect(function(){if(d||!f)return;const w=pf(f.getStructTree()),b=w;return w.promise.then(A=>{s({type:"RESOLVE",value:A})}).catch(A=>{s({type:"REJECT",error:A})}),()=>ul(b)},[d,f,s]),H.useEffect(()=>{if(o!==void 0){if(o===!1){g();return}p()}},[o]),o?P.jsx(w_,{className:"react-pdf__Page__structTree structTree",node:o}):null}const AS=s_;function jL(l){const e=lm();ct(e);const t=Object.assign(Object.assign({},e),l),{_className:i,canvasBackground:s,devicePixelRatio:o=xL(),onRenderError:c,onRenderSuccess:d,page:f,renderForms:p,renderTextLayer:g,rotate:y,scale:w}=t,{canvasRef:b}=l;ct(f);const A=H.useRef(null);function k(){f&&d&&d(I0(f,w))}function _(z){CL(z)||(mn(!1,z.toString()),c&&c(z))}const R=H.useMemo(()=>f.getViewport({scale:w*o,rotation:y}),[o,f,y,w]),D=H.useMemo(()=>f.getViewport({scale:w,rotation:y}),[f,y,w]);H.useEffect(function(){if(!f)return;f.cleanup();const{current:B}=A;if(!B)return;B.width=R.width,B.height=R.height,B.style.width=`${Math.floor(D.width)}px`,B.style.height=`${Math.floor(D.height)}px`,B.style.visibility="hidden";const F={annotationMode:p?AS.ENABLE_FORMS:AS.ENABLE,canvasContext:B.getContext("2d",{alpha:!1}),viewport:R};s&&(F.background=s);const X=f.render(F),Y=X;return X.promise.then(()=>{B.style.visibility="",k()}).catch(_),()=>ul(Y)},[s,f,p,R,D]);const j=H.useCallback(()=>{const{current:z}=A;z&&(z.width=0,z.height=0)},[]);return H.useEffect(()=>j,[j]),P.jsx("canvas",{className:`${i}__canvas`,dir:"ltr",ref:p_(b,A),style:{display:"block",userSelect:"none"},children:g?P.jsx(NL,{}):null})}function zL(l){return"str"in l}function BL(){const l=lm();ct(l);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:i,onRenderTextLayerError:s,onRenderTextLayerSuccess:o,page:c,pageIndex:d,pageNumber:f,rotate:p,scale:g}=l;ct(c);const[y,w]=lu(),{value:b,error:A}=y,k=H.useRef(null),_=H.useRef(void 0);mn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function R(){b&&i&&i(b)}function D(){A&&(mn(!1,A.toString()),t&&t(A))}H.useEffect(function(){w({type:"RESET"})},[c,w]),H.useEffect(function(){if(!c)return;const Q=pf(c.getTextContent()),ne=Q;return Q.promise.then(oe=>{w({type:"RESOLVE",value:oe})}).catch(oe=>{w({type:"REJECT",error:oe})}),()=>ul(ne)},[c,w]),H.useEffect(()=>{if(b!==void 0){if(b===!1){D();return}R()}},[b]);const j=H.useCallback(()=>{o&&o()},[o]),z=H.useCallback(Y=>{mn(!1,Y.toString()),s&&s(Y)},[s]);function B(){const Y=_.current;Y&&Y.classList.add("active")}function F(){const Y=_.current;Y&&Y.classList.remove("active")}const X=H.useMemo(()=>c.getViewport({scale:g,rotation:p}),[c,p,g]);return H.useLayoutEffect(function(){if(!c||!b)return;const{current:Q}=k;if(!Q)return;Q.innerHTML="";const ne=c.streamTextContent({includeMarkedContent:!0}),oe={container:Q,textContentSource:ne,viewport:X},_e=new o_(oe),ge=_e;return _e.render().then(()=>{const de=document.createElement("div");de.className="endOfContent",Q.append(de),_.current=de;const ie=Q.querySelectorAll('[role="presentation"]');if(e){let re=0;b.items.forEach((Z,q)=>{if(!zL(Z))return;const ue=ie[re];if(!ue)return;const ae=e(Object.assign({pageIndex:d,pageNumber:f,itemIndex:q},Z));ue.innerHTML=ae,re+=Z.str&&Z.hasEOL?2:1})}j()}).catch(z),()=>ul(ge)},[e,z,j,c,d,f,b,X]),P.jsx("div",{className:sm("react-pdf__Page__textContent","textLayer"),onMouseUp:F,onMouseDown:B,ref:k})}function HL(){const l=f_(),e=lm();ct(e);const t=Object.assign(Object.assign({},l),e),{imageResourcesPath:i,linkService:s,onGetAnnotationsError:o,onGetAnnotationsSuccess:c,onRenderAnnotationLayerError:d,onRenderAnnotationLayerSuccess:f,page:p,pdf:g,renderForms:y,rotate:w,scale:b=1}=t;ct(g),ct(p),ct(s);const[A,k]=lu(),{value:_,error:R}=A,D=H.useRef(null);mn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function j(){_&&c&&c(_)}function z(){R&&(mn(!1,R.toString()),o&&o(R))}H.useEffect(function(){k({type:"RESET"})},[k,p]),H.useEffect(function(){if(!p)return;const Q=pf(p.getAnnotations()),ne=Q;return Q.promise.then(oe=>{k({type:"RESOLVE",value:oe})}).catch(oe=>{k({type:"REJECT",error:oe})}),()=>{ul(ne)}},[k,p]),H.useEffect(()=>{if(_!==void 0){if(_===!1){z();return}j()}},[_]);function B(){f&&f()}function F(Y){mn(!1,`${Y}`),d&&d(Y)}const X=H.useMemo(()=>p.getViewport({scale:b,rotation:w}),[p,w,b]);return H.useEffect(function(){if(!g||!p||!s||!_)return;const{current:Q}=D;if(!Q)return;const ne=X.clone({dontFlip:!0}),oe={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:Q,l10n:null,page:p,viewport:ne},_e={annotations:_,annotationStorage:g.annotationStorage,div:Q,imageResourcesPath:i,linkService:s,page:p,renderForms:y,viewport:ne};Q.innerHTML="";try{new r_(oe).render(_e),B()}catch(ge){F(ge)}return()=>{}},[_,i,s,p,g,y,X]),P.jsx("div",{className:sm("react-pdf__Page__annotations","annotationLayer"),ref:D})}var UL=function(l,e){var t={};for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&e.indexOf(i)<0&&(t[i]=l[i]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(l);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(l,i[s])&&(t[i[s]]=l[i[s]]);return t};const bS=1;function $L(l){const e=f_(),t=Object.assign(Object.assign({},e),l),{_className:i="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:o,canvasRef:c,children:d,className:f,customRenderer:p,customTextRenderer:g,devicePixelRatio:y,error:w="Failed to load the page.",height:b,inputRef:A,loading:k="Loading page",noData:_="No page specified.",onGetAnnotationsError:R,onGetAnnotationsSuccess:D,onGetStructTreeError:j,onGetStructTreeSuccess:z,onGetTextError:B,onGetTextSuccess:F,onLoadError:X,onLoadSuccess:Y,onRenderAnnotationLayerError:Q,onRenderAnnotationLayerSuccess:ne,onRenderError:oe,onRenderSuccess:_e,onRenderTextLayerError:ge,onRenderTextLayerSuccess:de,pageIndex:ie,pageNumber:re,pdf:Z,registerPage:q,renderAnnotationLayer:ue=!0,renderForms:ae=!1,renderMode:M="canvas",renderTextLayer:$=!0,rotate:le,scale:me=bS,unregisterPage:Se,width:Te}=t,Ce=UL(t,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[De,He]=lu(),{value:Be,error:Wn}=De,vn=H.useRef(null);ct(Z);const qe=ta(re)?re-1:ie??null,Oe=re??(ta(ie)?ie+1:null),je=le??(Be?Be.rotate:null),et=H.useMemo(()=>{if(!Be)return null;let Xt=1;const hi=me??bS;if(Te||b){const ar=Be.getViewport({scale:1,rotation:je});Te?Xt=Te/ar.width:b&&(Xt=b/ar.height)}return hi*Xt},[b,Be,je,me,Te]);H.useEffect(function(){return()=>{ta(qe)&&s&&Se&&Se(qe)}},[s,Z,qe,Se]);function Lt(){if(Y){if(!Be||!et)return;Y(I0(Be,et))}if(s&&q){if(!ta(qe)||!vn.current)return;q(qe,vn.current)}}function xt(){Wn&&(mn(!1,Wn.toString()),X&&X(Wn))}H.useEffect(function(){He({type:"RESET"})},[He,Z,qe]),H.useEffect(function(){if(!Z||!Oe)return;const hi=pf(Z.getPage(Oe)),ar=hi;return hi.promise.then(fi=>{He({type:"RESOLVE",value:fi})}).catch(fi=>{He({type:"REJECT",error:fi})}),()=>ul(ar)},[He,Z,Oe]),H.useEffect(()=>{if(Be!==void 0){if(Be===!1){xt();return}Lt()}},[Be,et]);const kn=H.useMemo(()=>Be&&ta(qe)&&Oe&&ta(je)&&ta(et)?{_className:i,canvasBackground:o,customTextRenderer:g,devicePixelRatio:y,onGetAnnotationsError:R,onGetAnnotationsSuccess:D,onGetStructTreeError:j,onGetStructTreeSuccess:z,onGetTextError:B,onGetTextSuccess:F,onRenderAnnotationLayerError:Q,onRenderAnnotationLayerSuccess:ne,onRenderError:oe,onRenderSuccess:_e,onRenderTextLayerError:ge,onRenderTextLayerSuccess:de,page:Be,pageIndex:qe,pageNumber:Oe,renderForms:ae,renderTextLayer:$,rotate:je,scale:et}:null,[i,o,g,y,R,D,j,z,B,F,Q,ne,oe,_e,ge,de,Be,qe,Oe,ae,$,je,et]),Li=H.useMemo(()=>l_(Ce,()=>Be&&(et?I0(Be,et):void 0)),[Ce,Be,et]),gt=`${qe}@${et}/${je}`;function Ir(){switch(M){case"custom":return ct(p),P.jsx(p,{},`${gt}_custom`);case"none":return null;case"canvas":default:return P.jsx(jL,{canvasRef:c},`${gt}_canvas`)}}function ml(){return $?P.jsx(BL,{},`${gt}_text`):null}function Mi(){return ue?P.jsx(HL,{},`${gt}_annotations`):null}function sr(){return P.jsxs(g_.Provider,{value:kn,children:[Ir(),ml(),Mi(),d]})}function or(){return Oe?Z===null||Be===void 0||Be===null?P.jsx(dc,{type:"loading",children:typeof k=="function"?k():k}):Z===!1||Be===!1?P.jsx(dc,{type:"error",children:typeof w=="function"?w():w}):sr():P.jsx(dc,{type:"no-data",children:typeof _=="function"?_():_})}return P.jsx("div",Object.assign({className:sm(i,f),"data-page-number":Oe,ref:p_(A,vn),style:{"--scale-factor":`${et}`,backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},Li,{children:or()}))}_L();Q0.workerSrc="pdf.worker.mjs";const WL="/agenda/assets/pdf.worker.min-DGf6LXVo.mjs";Q0.workerSrc=WL;function VL(){return P.jsx(sC,{clientId:"1084797424608-n4cq13jldhrvgrajf2s0li453mpmdld7.apps.googleusercontent.com",children:P.jsx(qL,{})})}function qL(){const[l,e]=H.useState(null),[t,i]=H.useState(null),[s,o]=H.useState(localStorage.getItem("nombre_personalizado")||"Admin"),[c,d]=H.useState(25),[f,p]=H.useState(1500),[g,y]=H.useState(!1),[w,b]=H.useState(!1),[A,k]=H.useState("25"),[_,R]=H.useState([]),[D,j]=H.useState(null),[z,B]=H.useState(null),[F,X]=H.useState(null),[Y,Q]=H.useState([]),[ne,oe]=H.useState([]),[_e,ge]=H.useState([]),[de,ie]=H.useState([]),[re,Z]=H.useState(""),[q,ue]=H.useState(null),[ae,M]=H.useState(!1),[$,le]=H.useState(""),[me,Se]=H.useState(""),[Te,Ce]=H.useState(""),[De,He]=H.useState(""),[Be,Wn]=H.useState(""),[vn,qe]=H.useState([]),[Oe,je]=H.useState("escritorio"),[et,Lt]=H.useState(!1),[xt,kn]=H.useState(null),[Li,gt]=H.useState("izq"),[Ir,ml]=H.useState(null),[Mi,sr]=H.useState([]),[or,Xt]=H.useState([]),[hi,ar]=H.useState(!0),[fi,Rs]=H.useState(!0),[gf,uu]=H.useState(!1),[du]=H.useState(H.useRef(null)),[hu,yl]=H.useState(""),[Ps,Di]=H.useState([]),[vl,ko]=H.useState(null),[Fr,Ls]=H.useState(new Date().toLocaleTimeString()),[fu,pu]=H.useState(null),[To,wl]=H.useState([]),[Ro,Po]=H.useState([]),[Lo,Or]=H.useState([]),[Ms,Nr]=H.useState([]),[gu,Ds]=H.useState(""),[Is,Mo]=H.useState(""),[Do,cm]=H.useState(""),[mu,mf]=H.useState(""),[Ii,yf]=H.useState(""),[Al,vf]=H.useState(""),[bl,wf]=H.useState(""),[Af,bf]=H.useState(window.innerWidth);H.useEffect(()=>{const S=setInterval(()=>Ls(new Date().toLocaleTimeString()),1e3),N=()=>bf(window.innerWidth);return window.addEventListener("resize",N),()=>{clearInterval(S),window.removeEventListener("resize",N)}},[]),H.useEffect(()=>{const S=localStorage.getItem("google_token"),N=localStorage.getItem("google_user");if(S&&N){const K=S;i(K),e(JSON.parse(N)),mt(K),Vn(K)}},[]),H.useEffect(()=>{if(!l||!F)return;const S={carpetaActual:F,historial:Y,ventanaActiva:Oe,ventanasAbiertas:vn,editoresAbiertos:Mi,pdfsAbiertos:or.map(N=>({...N,blob:null}))};localStorage.setItem("workspace_state",JSON.stringify(S))},[F,Y,Oe,vn,Mi,or,l]),H.useEffect(()=>{let S=null;return g&&f>0?S=setInterval(()=>p(N=>N-1),1e3):f===0&&g&&(y(!1),alert(" Fin del Pomodoro"),p(c*60)),()=>clearInterval(S)},[g,f,c]);const um=()=>{const S=parseInt(A)||25;d(S),p(S*60),b(!1),y(!1)};H.useEffect(()=>{t&&F&&(R([]),F.id==="TRASH"?wu(t):(Mt(t,F.id),lr(t,F.id)))},[F,t]);const dm=lC({onSuccess:async S=>{const N=S.access_token;i(N),localStorage.setItem("google_token",N);const K=await Le.get(`https://www.googleapis.com/oauth2/v1/userinfo?access_token=${N}`,{headers:{Authorization:`Bearer ${N}`,Accept:"application/json"}});e(K.data),localStorage.setItem("google_user",JSON.stringify(K.data)),s==="Sistema"&&Sl(K.data.given_name),mt(N),Vn(N)},onError:S=>console.log("Login Failed:",S),scope:"https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/calendar"}),mt=async S=>{try{const K=await Le.get("https://www.googleapis.com/drive/v3/files",{headers:{Authorization:`Bearer ${S}`},params:{q:"name = 'mi_agenda' and mimeType = 'application/vnd.google-apps.folder' and trashed = false"}});let ce;K.data.files&&K.data.files.length>0?ce=K.data.files[0].id:ce=(await Le.post("https://www.googleapis.com/drive/v3/files",{name:"mi_agenda",mimeType:"application/vnd.google-apps.folder"},{headers:{Authorization:`Bearer ${S}`}})).data.id,B(ce);const xe=JSON.parse(localStorage.getItem("workspace_state"));xe&&xe.carpetaActual?(X(xe.carpetaActual),Q(xe.historial||[]),qe(xe.ventanasAbiertas||[]),sr(xe.editoresAbiertos||[]),je(xe.ventanaActiva||"escritorio"),xe.pdfsAbiertos&&xe.pdfsAbiertos.length>0&&(Xt(xe.pdfsAbiertos),xe.pdfsAbiertos.forEach(async tt=>{try{const pi=await Le.get(`https://www.googleapis.com/drive/v3/files/${tt.id}?alt=media`,{headers:{Authorization:`Bearer ${S}`},responseType:"blob"});Xt(Ll=>Ll.map(gi=>gi.id===tt.id?{...gi,blob:pi.data,error:null}:gi))}catch{console.error("Error recargando PDF al iniciar")}}))):X({id:ce,name:"mi_agenda"}),zo(S,ce)}catch(N){N.response&&N.response.status===401&&yu()}},yu=()=>{aC(),e(null),i(null),localStorage.removeItem("google_token"),localStorage.removeItem("google_user"),localStorage.removeItem("workspace_state"),X(null),B(null),Q([]),qe([]),je("escritorio"),ie([]),ue(null),sr([]),Xt([]),R([])},Sl=S=>{const N=S||prompt("Nombre para la ventana:");N&&(o(N),localStorage.setItem("nombre_personalizado",N))},vu=(S,N,K)=>{S.stopPropagation();const ce=_.find(xe=>xe.id===N.id);S.ctrlKey||S.metaKey?R(ce?_.filter(xe=>xe.id!==N.id):[..._,{...N,tipo:K}]):ce&&_.length===1?R([]):R([{...N,tipo:K}])},El=async()=>{if(_.length!==1)return;const S=_[0],N=prompt("Nuevo nombre:",S.name);if(N&&N!==S.name)try{await Le.patch(`https://www.googleapis.com/drive/v3/files/${S.id}`,{name:N},{headers:{Authorization:`Bearer ${t}`}}),Mt(t,F.id),R([])}catch{alert("Error al renombrar")}},hm=async()=>{if(_.length!==0&&window.confirm(`Mover ${_.length} elemento(s) a la papelera?`))try{await Promise.all(_.map(S=>Le.patch(`https://www.googleapis.com/drive/v3/files/${S.id}`,{trashed:!0,appProperties:{deletedBy:"agenda_web"}},{headers:{Authorization:`Bearer ${t}`}}))),Mt(t,F.id),R([])}catch{alert("Error al borrar algunos archivos")}},Sf=()=>{if(_.length===0)return;const S=_.map(N=>({id:N.id,oldParent:F.id,name:N.name}));j(S),R([])},xl=async()=>{if(!(!D||!D.length||!F||!t))try{await Promise.all(D.map(S=>Le.patch(`https://www.googleapis.com/drive/v3/files/${S.id}?addParents=${F.id}&removeParents=${S.oldParent}`,{},{headers:{Authorization:`Bearer ${t}`}}))),j(null),Mt(t,F.id)}catch{alert("Error al mover los archivos")}},Vn=async S=>{try{const N=await Le.get("https://www.googleapis.com/calendar/v3/users/me/calendarList",{headers:{Authorization:`Bearer ${S}`}});ie(N.data.items),N.data.items.length>0&&Z(N.data.items[0].id);let K="https://calendar.google.com/calendar/embed?ctz=Europe%2FMadrid&showTitle=0&showNav=1&showDate=1&showPrint=0&showTabs=1&showCalendars=0";N.data.items.forEach(ce=>{const xe=encodeURIComponent(ce.id),tt=encodeURIComponent(ce.backgroundColor||"#245ED1");K+=`&src=${xe}&color=${tt}`}),ue(K)}catch(N){console.error(N)}},fm=async()=>{if(!$||!me||!re||!t)return alert("Falta Ttulo o Fecha");let S={summary:$};const N=De||me;if(Te){const K=Te,ce=Be||"23:59";S.start={dateTime:new Date(`${me}T${K}`).toISOString()},S.end={dateTime:new Date(`${N}T${ce}`).toISOString()}}else{S.start={date:me};const K=new Date(N);K.setDate(K.getDate()+1),S.end={date:K.toISOString().split("T")[0]}}try{await Le.post(`https://www.googleapis.com/calendar/v3/calendars/${re}/events`,S,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),alert(" Evento aadido"),le(""),Se(""),Ce(""),He(""),Wn(""),M(!1);const K=q;ue(null),setTimeout(()=>ue(K),200)}catch{alert("Error creando evento")}},Mt=(S,N)=>{const K=`'${N}' in parents and trashed = false and name != '_notes_config.json' and name != '_widgets_config.json'`;Le.get("https://www.googleapis.com/drive/v3/files",{headers:{Authorization:`Bearer ${S}`},params:{q:K,fields:"files(id, name, mimeType, webViewLink, iconLink)",pageSize:100}}).then(ce=>{const xe=ce.data.files||[],tt=(pi,Ll)=>pi.name.localeCompare(Ll.name,void 0,{numeric:!0,sensitivity:"base"});oe(xe.filter(pi=>pi.mimeType==="application/vnd.google-apps.folder").sort(tt)),ge(xe.filter(pi=>pi.mimeType!=="application/vnd.google-apps.folder").sort(tt))}).catch(ce=>{var xe;((xe=ce.response)==null?void 0:xe.status)===401&&yu()})},wu=S=>{Le.get("https://www.googleapis.com/drive/v3/files",{headers:{Authorization:`Bearer ${S}`},params:{q:"trashed = true and appProperties has { key='deletedBy' and value='agenda_web' }",fields:"files(id, name, mimeType)",pageSize:50}}).then(K=>{const ce=K.data.files||[];oe(ce.filter(xe=>xe.mimeType==="application/vnd.google-apps.folder")),ge(ce.filter(xe=>xe.mimeType!=="application/vnd.google-apps.folder"))})},Ef=async S=>{window.confirm("Restaurar archivo?")&&(await Le.patch(`https://www.googleapis.com/drive/v3/files/${S}`,{trashed:!1},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),wu(t))},xf=async S=>{window.confirm(" ELIMINAR PARA SIEMPRE.")&&(await Le.delete(`https://www.googleapis.com/drive/v3/files/${S}`,{headers:{Authorization:`Bearer ${t}`}}),wu(t))},Io=()=>{if(F&&F.id==="TRASH")X({id:z,name:"mi_agenda"}),Di([]);else if(Y.length>0){const S=Y[Y.length-1];Q(Y.slice(0,-1)),X(S)}},Fi=S=>{uu(!1);let N=prompt("Nombre del archivo:");if(!N||!t)return;S==="txt"&&(N.endsWith(".txt")||(N+=".txt"));const ce={name:N,mimeType:S==="folder"?"application/vnd.google-apps.folder":S==="doc"?"application/vnd.google-apps.document":S==="sheet"?"application/vnd.google-apps.spreadsheet":S==="slide"?"application/vnd.google-apps.presentation":"text/plain",parents:[F.id],appProperties:{createdBy:"agenda_web"}};if(S==="txt"||S==="code"){const xe=new FormData;xe.append("metadata",new Blob([JSON.stringify(ce)],{type:"application/json"})),xe.append("file",new Blob([""],{type:"text/plain"})),Le.post("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",xe,{headers:{Authorization:`Bearer ${t}`}}).then(()=>Mt(t,F.id))}else Le.post("https://www.googleapis.com/drive/v3/files",ce,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}).then(()=>Mt(t,F.id))},Fo=S=>{const N=S.target.files[0];if(!N||!t)return;const K=new FormData;K.append("metadata",new Blob([JSON.stringify({name:N.name,parents:[F.id],appProperties:{createdBy:"agenda_web"}})],{type:"application/json"})),K.append("file",N),Le.post("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",K,{headers:{Authorization:`Bearer ${t}`}}).then(()=>{alert("Subido"),Mt(t,F.id)})},_l=S=>{const N=S.split(".").pop().toLowerCase();return N==="js"||N==="jsx"?"javascript":N==="html"?"html":N==="css"?"css":N==="json"?"json":"plaintext"},pm=S=>{const N=S.name.toLowerCase(),K=S.mimeType;return K==="text/plain"||K==="text/html"||K.includes("json")||K.includes("javascript")||N.endsWith(".js")||N.endsWith(".py")||N.endsWith(".css")||N.endsWith(".txt")},gm=async(S,N)=>{if(Mi.find(K=>K.id===S.id)){je(S.id);return}try{const K=await Le.get(`https://www.googleapis.com/drive/v3/files/${S.id}`,{headers:{Authorization:`Bearer ${t}`},params:{alt:"media"},responseType:"text"});sr(ce=>[...ce,{id:S.id,file:S,content:K.data,modo:N}]),je(S.id)}catch{alert("Error leyendo archivo")}},Au=async S=>{const N=Mi.find(K=>K.id===S);if(N)try{await Le.patch(`https://www.googleapis.com/upload/drive/v3/files/${S}?uploadType=media`,N.content,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"text/plain"}}),alert(" Guardado correctamente")}catch{console.error("Error al guardar")}},Cl=(S,N)=>{sr(K=>K.map(ce=>ce.id===S?{...ce,content:N}:ce))},bu=(S,N)=>{if(S.key==="Tab"){S.preventDefault();const K=S.target.selectionStart,ce=S.target.selectionEnd,xe=S.target.value;Cl(N,xe.substring(0,K)+"	"+xe.substring(ce)),setTimeout(()=>{S.target.selectionStart=S.target.selectionEnd=K+1},0)}},qn=(S,N)=>{Xt(K=>K.map(ce=>ce.id===S?{...ce,...N}:ce))},mm=async S=>{const N=S.mimeType,K=S.name.toLowerCase();if(pm(S)){const ce=K.endsWith(".txt");gm(S,ce?"txt":"code")}else if(N.includes("pdf")){if(or.find(ce=>ce.id===S.id)){je(S.id);return}try{const ce=await Le.get(`https://www.googleapis.com/drive/v3/files/${S.id}?alt=media`,{headers:{Authorization:`Bearer ${t}`},responseType:"blob"});Xt(xe=>[...xe,{id:S.id,file:S,blob:ce.data,pageNumber:1,numPages:null,error:null}]),je(S.id)}catch{alert("Error al descargar el PDF de Drive.")}}else if(N.includes("image"))try{const ce=await Le.get(`https://www.googleapis.com/drive/v3/files/${S.id}?alt=media`,{headers:{Authorization:`Bearer ${t}`},responseType:"blob"}),xe=URL.createObjectURL(ce.data);kl(S.id,S.name,xe,N)}catch{alert("Error cargando vista previa.")}else{let ce=S.webViewLink;ce.includes("embedded=true")||(ce+=(ce.includes("?")?"&":"?")+"embedded=true"),kl(S.id,S.name,ce,N)}},kl=(S,N,K,ce)=>{vn.find(tt=>tt.id===S)||qe([...vn,{id:S,title:N,url:K,mimeType:ce}]),je(S)},Ke=S=>{et?Oe===S&&xt?(je(xt),kn(null),Lt(!1)):xt===S?(kn(null),Lt(!1)):Oe===S&&(je("escritorio"),Lt(!1)):Oe===S&&je("escritorio")},_f=(S,N)=>{N&&N.stopPropagation(),qe(K=>K.filter(ce=>ce.id!==S)),Ke(S)},Cf=(S,N)=>{N&&N.stopPropagation(),Xt(K=>K.filter(ce=>ce.id!==S)),Ke(S)},Su=(S,N)=>{N&&N.stopPropagation(),sr(K=>K.filter(ce=>ce.id!==S)),Ke(S)},Tl=(S,N)=>{const K=Oe===S,ce=et&&xt===S&&Oe!=="escritorio",xe=K||ce,tt=et&&(K&&Li==="izq"||ce&&Li==="der");return{display:xe?"flex":"none",position:"absolute",top:0,left:ce?"50%":"0",width:et&&xe?"50%":"100%",height:"100%",background:N,flexDirection:"column",zIndex:tt?205:xe?200:50,border:tt?"3px solid #C99597":"none",boxSizing:"border-box",boxShadow:ce?"-5px 0 15px rgba(0,0,0,0.2)":"none"}},Oo=S=>{if(S==="escritorio"){ml(Oe),je("escritorio");return}if(et){if(Oe===S){gt("izq");return}if(xt===S){Oe==="escritorio"&&Ir&&je(Ir),gt("der");return}if(Oe==="escritorio"&&S===Ir){je(S),gt("izq");return}!Oe||Oe==="escritorio"?(je(S),gt("izq")):!xt||xt==="escritorio"?(kn(S),gt("der")):Li==="der"?kn(S):je(S)}else je(S)},Rl=(S,N)=>{N.stopPropagation(),Lt(!1),je(S),kn(null)},No=(S,N)=>{if(N.stopPropagation(),Lt(!0),Oe===S){gt("izq");return}const K=Oe;je(S),kn(K&&K!=="escritorio"?K:null),gt("izq")},Fs=(S,N)=>{if(N.stopPropagation(),Lt(!0),xt===S){gt("der");return}const K=xt;kn(S),je(K&&K!=="escritorio"?K:"escritorio"),gt("der")},lr=async(S,N)=>{try{const K=`name = '_notes_config.json' and '${N}' in parents and trashed = false`,ce=await Le.get("https://www.googleapis.com/drive/v3/files",{headers:{Authorization:`Bearer ${S}`},params:{q:K}});if(ce.data.files&&ce.data.files.length>0){const xe=ce.data.files[0].id;ko(xe);const tt=await Le.get(`https://www.googleapis.com/drive/v3/files/${xe}?alt=media`,{headers:{Authorization:`Bearer ${S}`}});Di(tt.data||[])}else ko(null),Di([])}catch(K){console.error("Error notas",K),Di([])}},Oi=async S=>{try{const N=new Blob([JSON.stringify(S)],{type:"application/json"});if(vl)await Le.patch(`https://www.googleapis.com/upload/drive/v3/files/${vl}?uploadType=media`,N,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});else{const K={name:"_notes_config.json",parents:[F.id],mimeType:"application/json"},ce=new FormData;ce.append("metadata",new Blob([JSON.stringify(K)],{type:"application/json"})),ce.append("file",N);const xe=await Le.post("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",ce,{headers:{Authorization:`Bearer ${t}`}});ko(xe.data.id)}}catch(N){console.error("Error guardando notas",N)}},cr=()=>{if(!hu)return;const S=[...Ps,{id:Date.now(),text:hu}];Di(S),Oi(S),yl("")},jo=S=>{const N=Ps.filter(K=>K.id!==S);Di(N),Oi(N)},zo=async(S,N)=>{try{const K=await Le.get("https://www.googleapis.com/drive/v3/files",{headers:{Authorization:`Bearer ${S}`},params:{q:`name = '_widgets_config.json' and '${N}' in parents and trashed = false`}});if(K.data.files&&K.data.files.length>0){const ce=K.data.files[0].id;pu(ce);const tt=(await Le.get(`https://www.googleapis.com/drive/v3/files/${ce}?alt=media`,{headers:{Authorization:`Bearer ${S}`}})).data||{};tt.tareas&&wl(tt.tareas),tt.examenes&&Po(tt.examenes),tt.entregas&&Or(tt.entregas),tt.cuentasAtras&&Nr(tt.cuentasAtras)}}catch(K){console.error("Error cargando widgets",K)}},Kt=async S=>{const N={tareas:S.tareas!==void 0?S.tareas:To,examenes:S.examenes!==void 0?S.examenes:Ro,entregas:S.entregas!==void 0?S.entregas:Lo,cuentasAtras:S.cuentasAtras!==void 0?S.cuentasAtras:Ms};try{const K=new Blob([JSON.stringify(N)],{type:"application/json"});if(fu)await Le.patch(`https://www.googleapis.com/upload/drive/v3/files/${fu}?uploadType=media`,K,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});else{if(!z)return;const ce={name:"_widgets_config.json",parents:[z],mimeType:"application/json"},xe=new FormData;xe.append("metadata",new Blob([JSON.stringify(ce)],{type:"application/json"})),xe.append("file",K);const tt=await Le.post("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",xe,{headers:{Authorization:`Bearer ${t}`}});pu(tt.data.id)}}catch(K){console.error("Error guardando widgets",K)}},ym=()=>{if(gu){const S=[...To,{id:Date.now(),txt:gu}];wl(S),Kt({tareas:S}),Ds("")}},kf=S=>{const N=To.filter(K=>K.id!==S);wl(N),Kt({tareas:N})},Bo=()=>{if(Is&&Do){const S=[...Ro,{id:Date.now(),txt:Is,fecha:Do}];Po(S),Kt({examenes:S}),Mo("")}},vm=S=>{const N=Ro.filter(K=>K.id!==S);Po(N),Kt({examenes:N})},Tf=()=>{if(mu&&Ii){const S=[...Lo,{id:Date.now(),txt:mu,fecha:Ii}];Or(S),Kt({entregas:S}),mf("")}},Pl=S=>{const N=Lo.filter(K=>K.id!==S);Or(N),Kt({entregas:N})},Rf=()=>{if(Al&&bl){const S=[...Ms,{id:Date.now(),txt:Al,fecha:bl}];Nr(S),Kt({cuentasAtras:S}),vf("")}},wm=S=>{const N=Ms.filter(K=>K.id!==S);Nr(N),Kt({cuentasAtras:N})},Ho=S=>Math.ceil((new Date(S)-new Date)/(1e3*60*60*24)),Uo=S=>{const N=Math.floor(S/60),K=S%60;return`${N}:${K<10?"0":""}${K}`};return P.jsxs("div",{style:GL,children:[P.jsx("style",{children:"@import url('https://fonts.googleapis.com/css2?family=Mali:wght@400;700&family=Roboto+Mono:wght@400;700&display=swap');"}),P.jsxs("div",{style:XL,children:[P.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[P.jsx("div",{style:{fontWeight:"bold",fontSize:"15px"},children:s}),P.jsx("div",{style:{display:"flex",alignItems:"center",gap:"5px",background:"rgba(255,255,255,0.2)",padding:"2px 8px",borderRadius:"10px"},children:w?P.jsxs(P.Fragment,{children:[P.jsx("span",{style:{fontSize:"14px"},children:"Mins:"}),P.jsx("input",{type:"number",value:A,onChange:S=>k(S.target.value),style:{width:"40px",fontSize:"12px",textAlign:"center",fontFamily:"'Mali', cursive"}}),P.jsx("button",{onClick:um,style:{...nd,color:"#fff",fontSize:"12px"},children:""}),P.jsx("button",{onClick:()=>b(!1),style:{...nd,color:"#ffcccb",fontSize:"12px"},children:""})]}):P.jsxs(P.Fragment,{children:[P.jsxs("span",{style:{fontSize:"15px",fontWeight:"bold"},children:[" ",Uo(f)]}),P.jsx("button",{onClick:()=>y(!g),style:nd,children:g?"":""}),P.jsx("button",{onClick:()=>{y(!1),p(c*60)},style:nd,children:""}),P.jsx("button",{onClick:()=>{b(!0),k(c.toString())},style:nd,children:""})]})})]}),l?P.jsxs("div",{style:{fontSize:"13px",display:"flex",gap:"15px",alignItems:"center"},children:[P.jsx("span",{children:Fr}),P.jsx("span",{onClick:()=>Sl(),style:SS,children:"Renombrar"}),P.jsx("span",{onClick:yu,style:SS,children:"Salir"})]}):P.jsx("div",{style:{fontSize:"13px"},children:Fr})]}),l?P.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1,overflow:"hidden"},children:[P.jsxs("div",{style:{position:"relative",flex:1,overflow:"hidden",display:"flex"},children:[P.jsxs("div",{style:{display:Oe==="escritorio"?"flex":"none",width:"100%",height:"100%",overflow:"hidden"},className:"agenda-main-layout",children:[hi&&P.jsxs("div",{style:{width:"250px",minWidth:"250px",borderRight:"3px solid #C99597",background:"#EAD4D5",padding:"10px",display:"flex",flexDirection:"column",overflowY:"auto"},className:"agenda-column",children:[P.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[P.jsx("span",{style:{fontWeight:"bold",color:"#C99597"},children:"Widgets"}),P.jsx("button",{onClick:()=>ar(!1),style:{cursor:"pointer",border:"none",background:"transparent",color:"#C99597"},children:"Efec. "})]}),P.jsxs("div",{style:{flex:1},children:[P.jsxs("div",{style:ed,children:[P.jsx("div",{style:td,children:" Tareas"}),P.jsxs("div",{style:Np,children:[To.map(S=>P.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[P.jsxs("span",{children:[" ",S.txt]}),P.jsx("span",{onClick:()=>kf(S.id),style:{color:"red",cursor:"pointer"},children:"x"})]},S.id)),P.jsxs("div",{style:{display:"flex",marginTop:"3px"},children:[P.jsx("input",{value:gu,onChange:S=>Ds(S.target.value),style:Zn}),P.jsx("button",{onClick:ym,style:Zl,children:"+"})]})]})]}),P.jsxs("div",{style:ed,children:[P.jsx("div",{style:td,children:" Entregas"}),P.jsxs("div",{style:Np,children:[Lo.map(S=>P.jsxs("div",{children:[" ",S.txt," (",S.fecha,") ",P.jsx("span",{onClick:()=>Pl(S.id),style:{color:"red",cursor:"pointer"},children:"x"})]},S.id)),P.jsxs("div",{style:{marginTop:"3px"},children:[P.jsx("input",{value:mu,onChange:S=>mf(S.target.value),placeholder:"Prctica",style:Zn}),P.jsx("input",{type:"date",value:Ii,onChange:S=>yf(S.target.value),style:Zn}),P.jsx("button",{onClick:Tf,style:{...Zl,width:"100%"},children:"Aadir"})]})]})]}),P.jsxs("div",{style:ed,children:[P.jsx("div",{style:td,children:" Cuentas Atrs"}),P.jsxs("div",{style:Np,children:[Ms.map(S=>P.jsxs("div",{style:{background:"#fff",border:"1px solid #eee",textAlign:"center",marginBottom:"2px"},children:[P.jsx("div",{style:{fontSize:"11px"},children:S.txt}),P.jsxs("div",{style:{color:"#C99597",fontWeight:"bold"},children:[Ho(S.fecha)," das"]}),P.jsx("div",{onClick:()=>wm(S.id),style:{fontSize:"10px",cursor:"pointer"},children:"borrar"})]},S.id)),P.jsxs("div",{style:{marginTop:"3px"},children:[P.jsx("input",{value:Al,onChange:S=>vf(S.target.value),placeholder:"Evento",style:Zn}),P.jsx("input",{type:"date",value:bl,onChange:S=>wf(S.target.value),style:Zn}),P.jsx("button",{onClick:Rf,style:{...Zl,width:"100%"},children:"Crear"})]})]})]}),P.jsxs("div",{style:ed,children:[P.jsx("div",{style:td,children:" Exmenes"}),P.jsxs("div",{style:Np,children:[Ro.map(S=>P.jsxs("div",{style:{borderBottom:"1px dashed #ccc"},children:[P.jsx("b",{children:S.txt})," (",S.fecha,") ",P.jsx("span",{onClick:()=>vm(S.id),style:{color:"red",cursor:"pointer"},children:"x"})]},S.id)),P.jsxs("div",{style:{marginTop:"3px"},children:[P.jsx("input",{value:Is,onChange:S=>Mo(S.target.value),placeholder:"Asignatura",style:Zn}),P.jsx("input",{type:"date",value:Do,onChange:S=>cm(S.target.value),style:Zn}),P.jsx("button",{onClick:Bo,style:{...Zl,width:"100%"},children:"Aadir"})]})]})]})]}),P.jsx("div",{style:{marginTop:"20px"},children:P.jsx("div",{onClick:()=>{X({id:"TRASH",name:"Papelera"}),Di([])},style:{...ed,cursor:"pointer",background:(F==null?void 0:F.id)==="TRASH"?"#fff":"rgba(255,255,255,0.6)"},children:P.jsx("div",{style:td,children:" Papelera"})})})]}),P.jsxs("div",{style:{flex:1,minWidth:"300px",display:"flex",flexDirection:"column",borderRight:"3px solid #C99597",background:"white"},className:"agenda-column",children:[P.jsxs("div",{style:{display:"flex",background:"#FAF6F4",borderBottom:"1px solid #ccc"},children:[!hi&&P.jsx("button",{onClick:()=>ar(!0),style:{border:"none",background:"transparent",cursor:"pointer",fontSize:"12px",padding:"5px"},children:" Mostrar Widgets"}),P.jsx("div",{style:{flex:1}}),!fi&&P.jsx("button",{onClick:()=>Rs(!0),style:{border:"none",background:"transparent",cursor:"pointer",fontSize:"12px",padding:"5px"},children:" Mostrar Calendario"})]}),(F==null?void 0:F.id)!=="TRASH"?P.jsxs(P.Fragment,{children:[P.jsxs("div",{style:{padding:"8px",borderBottom:"1px solid #DDB2B5",background:"#FAF6F4",display:"flex",gap:"10px",alignItems:"center"},children:[P.jsx("button",{onClick:Io,disabled:!F||F.id===z,style:ES,children:" Subir"}),P.jsxs("div",{style:JL,children:["C:\\",s,"\\",F?F.name:"..."]})]}),P.jsxs("div",{style:ZL,className:"agenda-action-bar",children:[P.jsxs("div",{style:{position:"relative"},children:[P.jsx("button",{onClick:()=>uu(!gf),style:{...ei,background:"#C99597",color:"white"},children:" Nuevo... "}),gf&&P.jsxs("div",{style:sM,children:[P.jsx("div",{onClick:()=>Fi("folder"),style:na,children:" Carpeta"}),P.jsx("div",{onClick:()=>Fi("txt"),style:na,children:" Nota Texto"}),P.jsx("div",{onClick:()=>Fi("code"),style:na,children:" Cdigo"}),P.jsx("div",{onClick:()=>Fi("doc"),style:na,children:" Google Doc"}),P.jsx("div",{onClick:()=>Fi("sheet"),style:na,children:" Google Sheet"}),P.jsx("div",{onClick:()=>Fi("slide"),style:na,children:" Google Slide"}),P.jsx("div",{style:{borderTop:"1px solid #eee",margin:"5px 0"}}),P.jsx("div",{onClick:()=>du.current.click(),style:{...na,fontWeight:"bold",color:"#2E7D32"},children:" Subir Archivo"})]}),P.jsx("input",{type:"file",ref:du,style:{display:"none"},onChange:Fo})]}),_.length>0?P.jsxs("div",{style:{display:"flex",gap:"10px",marginLeft:"10px",alignItems:"center",background:"#E3C0C2",padding:"2px 10px",borderRadius:"4px",flex:1},children:[P.jsx("span",{style:{fontWeight:"bold",fontSize:"12px",color:"white"},children:_.length===1?`Seleccionado: ${_[0].name}`:`${_.length} seleccionados`}),_.length===1&&P.jsx("button",{onClick:El,style:{...ei,fontSize:"12px",padding:"2px 8px"},children:" Renombrar"}),P.jsx("button",{onClick:Sf,style:{...ei,fontSize:"12px",padding:"2px 8px"},children:" Cortar"}),P.jsx("button",{onClick:hm,style:{...ei,fontSize:"12px",padding:"2px 8px",color:"red"},children:" Borrar"}),P.jsx("button",{onClick:()=>R([]),style:{...ei,fontSize:"12px",padding:"2px 8px"},children:""})]}):P.jsxs("div",{style:{borderLeft:"1px solid #ccc",paddingLeft:"10px",display:"flex",gap:"5px",flex:1,alignItems:"center"},children:[P.jsx("input",{type:"text",value:hu,onChange:S=>yl(S.target.value),placeholder:"Nota...",style:{...eM,background:"#FFF5E5"}}),P.jsx("button",{onClick:cr,style:{...ei,background:"#FFF5E5"},children:""}),D&&P.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"5px"},children:[P.jsxs("span",{style:{fontSize:"12px",color:"#C99597"},children:["En portapapeles: ",D.length," item(s)"]}),P.jsx("button",{onClick:xl,style:{...ei,background:"#e6ffed",color:"#2E7D32",border:"1px outset #A5D6A7"},children:" Pegar Aqu"}),P.jsx("button",{onClick:()=>j(null),style:{...ei,color:"red",padding:"2px 6px"},children:"x"})]})]})]})]}):P.jsxs("div",{style:{padding:"8px",background:"#333",color:"white",borderBottom:"1px solid #000",display:"flex",alignItems:"center",gap:"10px"},children:[P.jsx("button",{onClick:Io,style:ES,children:" Salir"}),P.jsx("span",{children:" PAPELERA"})]}),P.jsxs("div",{style:{padding:"20px",overflowY:"auto",flex:1},children:[Ps.length>0&&F.id!=="TRASH"&&P.jsxs("div",{style:{marginBottom:"20px"},children:[P.jsxs("div",{style:xS,children:[" Notas (",F.name,")"]}),P.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:Ps.map(S=>P.jsxs("div",{style:iM,children:[S.text,P.jsx("div",{onClick:()=>jo(S.id),style:rM,children:"x"})]},S.id))})]}),P.jsx("div",{style:xS,children:(F==null?void 0:F.id)==="TRASH"?"Archivos Eliminados":" Archivos"}),P.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(90px, 1fr))",gap:"15px"},children:[ne.map(S=>P.jsx("div",{onClick:N=>vu(N,S,"folder"),onDoubleClick:()=>{Q([...Y,F]),X(S)},style:{...kS,background:_.find(N=>N.id===S.id)?"#DCEAF7":"transparent",border:_.find(N=>N.id===S.id)?"1px dotted #245ED1":"1px solid transparent",opacity:D!=null&&D.find(N=>N.id===S.id)?.5:1},children:(F==null?void 0:F.id)==="TRASH"?P.jsxs("div",{style:{textAlign:"center"},children:[P.jsx("div",{style:{..._S,opacity:.5}}),P.jsx("div",{style:jp,children:S.name}),P.jsx("button",{onClick:()=>Ef(S.id),style:{fontSize:"12px"},children:""}),P.jsx("button",{onClick:()=>xf(S.id),style:{fontSize:"12px",color:"red"},children:""})]}):P.jsx(P.Fragment,{children:P.jsxs("div",{style:{cursor:"pointer"},children:[P.jsx("div",{style:_S}),P.jsx("div",{style:jp,children:S.name})]})})},S.id)),_e.map(S=>P.jsx("div",{onClick:N=>vu(N,S,"file"),onDoubleClick:()=>mm(S),style:{...kS,background:_.find(N=>N.id===S.id)?"#DCEAF7":"transparent",border:_.find(N=>N.id===S.id)?"1px dotted #245ED1":"1px solid transparent",opacity:D!=null&&D.find(N=>N.id===S.id)?.5:1},children:(F==null?void 0:F.id)==="TRASH"?P.jsxs("div",{style:{textAlign:"center"},children:[P.jsx("div",{style:{...CS,opacity:.5}}),P.jsx("div",{style:jp,children:S.name}),P.jsx("button",{onClick:()=>Ef(S.id),style:{fontSize:"12px"},children:""}),P.jsx("button",{onClick:()=>xf(S.id),style:{fontSize:"12px",color:"red"},children:""})]}):P.jsx(P.Fragment,{children:P.jsxs("div",{style:{cursor:"pointer"},children:[P.jsx("div",{style:CS,children:P.jsx("div",{style:nM})}),P.jsx("div",{style:jp,children:S.name})]})})},S.id))]})]})]}),fi&&P.jsxs("div",{style:{width:"400px",minWidth:"300px",display:"flex",flexDirection:"column",background:"#fff"},className:"agenda-column",children:[P.jsx("div",{style:{display:"flex",justifyContent:"flex-end",padding:"5px",background:"#FAF6F4"},children:P.jsx("button",{onClick:()=>Rs(!1),style:{cursor:"pointer",border:"none",background:"transparent",color:"#C99597"},children:"Ocultar "})}),P.jsxs("div",{style:dv,children:[" Agenda Google",P.jsx("button",{onClick:()=>M(!ae),style:{...Zl,marginLeft:"10px",color:"black"},children:ae?" Cancelar":" Aadir Evento"})]}),ae&&P.jsxs("div",{style:{padding:"10px",background:"#F7E8E8",borderBottom:"1px solid #C99597"},children:[P.jsx("div",{style:{fontSize:"12px",fontWeight:"bold",color:"#C99597",marginBottom:"5px"},children:"Nuevo Evento:"}),P.jsx("input",{value:$,onChange:S=>le(S.target.value),placeholder:"Ttulo",style:{...Zn,marginBottom:"5px"}}),P.jsx("div",{style:{marginBottom:"5px"},children:P.jsx("select",{value:re,onChange:S=>Z(S.target.value),style:Zn,children:de.map(S=>P.jsx("option",{value:S.id,children:S.summary},S.id))})}),P.jsxs("div",{style:{display:"flex",gap:"5px",marginBottom:"5px"},children:[P.jsxs("div",{style:{flex:1},children:[P.jsx("span",{style:{fontSize:"10px",color:"#666"},children:"Inicio:"}),P.jsx("input",{type:"date",value:me,onChange:S=>Se(S.target.value),style:Zn}),P.jsx("input",{type:"time",value:Te,onChange:S=>Ce(S.target.value),style:Zn})]}),P.jsxs("div",{style:{flex:1},children:[P.jsx("span",{style:{fontSize:"10px",color:"#666"},children:"Fin (Opc):"}),P.jsx("input",{type:"date",value:De,onChange:S=>He(S.target.value),style:Zn}),P.jsx("input",{type:"time",value:Be,onChange:S=>Wn(S.target.value),style:Zn})]})]}),P.jsx("button",{onClick:fm,style:{...Zl,width:"100%",background:"#C99597",color:"white"},children:"Crear"})]}),q&&P.jsx("iframe",{src:q,style:{flex:1,border:"none",width:"100%"}})]})]}),vn.map(S=>P.jsxs("div",{style:Tl(S.id,"#F1D8D9"),onMouseDown:()=>{et&&gt(xt===S.id?"der":"izq")},children:[P.jsxs("div",{style:dv,children:[P.jsxs("span",{children:[" ",S.title]}),P.jsxs("div",{style:{display:"flex",gap:"5px"},children:[P.jsx("button",{onClick:N=>No(S.id,N),style:Fn,title:"Mover a Izquierda",children:""}),P.jsx("button",{onClick:N=>Fs(S.id,N),style:Fn,title:"Mover a Derecha",children:""}),P.jsx("button",{onClick:N=>Rl(S.id,N),style:Fn,title:"Pantalla Completa",children:""}),P.jsx("button",{onClick:()=>window.open(S.url,"_blank"),style:{...Fn,width:"auto",padding:"0 5px"},title:"Abrir en pestaa nueva",children:""}),P.jsx("button",{onClick:()=>je("escritorio"),style:Fn,children:"_"}),P.jsx("button",{onClick:N=>_f(S.id,N),style:hv,children:""})]})]}),P.jsx("div",{style:{flex:1,background:"white",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center"},children:S.mimeType&&S.mimeType.includes("image")?P.jsx("img",{src:S.url,style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"},alt:S.title}):P.jsx("iframe",{src:S.url,style:{width:"100%",height:"100%",border:"none"}})})]},S.id)),or.map(S=>P.jsxs("div",{style:Tl(S.id,"#525659"),onMouseDown:()=>{et&&gt(xt===S.id?"der":"izq")},children:[P.jsxs("div",{style:dv,children:[P.jsxs("span",{children:[" PDF: ",S.file.name]}),P.jsxs("div",{style:{display:"flex",gap:"5px"},children:[P.jsx("button",{onClick:N=>No(S.id,N),style:Fn,title:"Mover a Izquierda",children:""}),P.jsx("button",{onClick:N=>Fs(S.id,N),style:Fn,title:"Mover a Derecha",children:""}),P.jsx("button",{onClick:N=>Rl(S.id,N),style:Fn,title:"Pantalla Completa",children:""}),P.jsx("button",{onClick:()=>je("escritorio"),style:Fn,children:"_"}),P.jsx("button",{onClick:N=>Cf(S.id,N),style:hv,children:""})]})]}),P.jsxs("div",{style:{padding:"5px",background:"#333",color:"white",display:"flex",gap:"10px",justifyContent:"center",alignItems:"center",flexWrap:"wrap"},children:[P.jsx("button",{onClick:()=>qn(S.id,{pageNumber:Math.max(1,S.pageNumber-1)}),disabled:S.pageNumber<=1,style:ei,children:" Ant"}),P.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[P.jsx("span",{children:"Pg"}),P.jsx("input",{type:"number",value:S.pageNumber,onChange:N=>{let K=parseInt(N.target.value);isNaN(K)||(S.numPages&&K>S.numPages&&(K=S.numPages),K<1&&(K=1),qn(S.id,{pageNumber:K}))},style:{width:"50px",textAlign:"center",borderRadius:"3px",border:"none",padding:"2px",fontFamily:"'Mali', cursive",outline:"none",color:"black"}}),P.jsxs("span",{children:[" ",S.numPages?`de ${S.numPages}`:""]})]}),P.jsx("button",{onClick:()=>qn(S.id,{pageNumber:Math.min(S.numPages||999,S.pageNumber+1)}),disabled:S.numPages&&S.pageNumber>=S.numPages,style:ei,children:"Sig "}),P.jsx("div",{style:{borderLeft:"2px solid #555",height:"20px",margin:"0 5px"}}),P.jsx("button",{onClick:()=>qn(S.id,{zoom:Math.max(.5,(S.zoom||1)-.2)}),style:ei,children:" -"}),P.jsxs("span",{style:{fontSize:"13px",width:"45px",textAlign:"center"},children:[Math.round((S.zoom||1)*100),"%"]}),P.jsx("button",{onClick:()=>qn(S.id,{zoom:Math.min(3,(S.zoom||1)+.2)}),style:ei,children:" +"})]}),P.jsx("div",{style:{flex:1,overflow:"auto",display:"flex",justifyContent:"center",background:"#525659",padding:"20px"},children:S.error?P.jsx("div",{style:{color:"white",padding:"20px"},children:S.error}):S.blob?P.jsx(ML,{file:S.blob,onLoadSuccess:({numPages:N})=>qn(S.id,{numPages:N,error:null}),onLoadError:N=>qn(S.id,{error:"Error al abrir PDF: "+N.message}),loading:P.jsx("div",{style:{color:"white"},children:"Cargando documento..."}),children:P.jsx($L,{pageNumber:S.pageNumber,renderTextLayer:!1,renderAnnotationLayer:!1,width:Math.min(Af*.9,800)*(S.zoom||1)})}):P.jsx("div",{style:{color:"white"},children:"Descargando..."})})]},S.id)),Mi.map(S=>P.jsxs("div",{style:{...Tl(S.id,S.modo==="code"?"#1e1e1e":"#fff"),color:S.modo==="code"?"#d4d4d4":"#000"},onMouseDown:()=>{et&&gt(xt===S.id?"der":"izq")},children:[P.jsxs("div",{style:{background:S.modo==="code"?"#3c3c3c":"#C99597",color:"white",padding:"5px 10px",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"13px",borderBottom:S.modo==="code"?"1px solid #252526":"2px solid #A67577"},children:[P.jsx("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:P.jsxs("span",{style:{fontWeight:"bold"},children:[S.modo==="code"?" Visual Studio":" Bloc de Notas XP"," - ",S.file.name]})}),P.jsxs("div",{style:{display:"flex",gap:"5px"},children:[P.jsx("button",{onClick:N=>No(S.id,N),style:Fn,title:"Mover a Izquierda",children:""}),P.jsx("button",{onClick:N=>Fs(S.id,N),style:Fn,title:"Mover a Derecha",children:""}),P.jsx("button",{onClick:N=>Rl(S.id,N),style:Fn,title:"Pantalla Completa",children:""}),P.jsx("button",{onClick:()=>je("escritorio"),style:Fn,children:"_"}),P.jsx("button",{onClick:N=>Su(S.id,N),style:hv,children:""})]})]}),P.jsx("div",{style:{padding:"5px",background:S.modo==="code"?"#007acc":"#f0f0f0",borderBottom:"1px solid #ccc",display:"flex",justifyContent:"flex-end"},children:P.jsx("button",{onClick:()=>Au(S.id),style:{...ei,background:S.modo==="code"?"transparent":"#faf6f4",color:S.modo==="code"?"white":"#C99597",border:S.modo==="code"?"1px solid white":"1px outset #DDB2B5"},children:" GUARDAR"})}),P.jsx("div",{style:{flex:1,overflow:"hidden",position:"relative"},children:S.modo==="code"?P.jsx(qT,{height:"100%",defaultLanguage:"javascript",language:_l(S.file.name),theme:"vs-dark",value:S.content,onChange:N=>Cl(S.id,N),loading:P.jsx("div",{style:{color:"white",padding:"20px"},children:"Cargando editor..."}),options:{minimap:{enabled:!0},fontSize:14,wordWrap:"on",automaticLayout:!0}}):P.jsx("textarea",{value:S.content,onChange:N=>Cl(S.id,N.target.value),onKeyDown:N=>bu(N,S.id),style:{width:"100%",height:"100%",background:"#fff",color:"#000",border:"none",padding:"20px",fontFamily:"'Mali', cursive",fontSize:"14px",outline:"none",resize:"none",boxSizing:"border-box"},spellCheck:"false"})})]},S.id))]}),P.jsxs("div",{style:KL,children:[P.jsx("button",{onClick:()=>Oo("escritorio"),style:{...Op,background:Oe==="escritorio"&&!et?"#E3C0C2":"#FAF6F4",fontWeight:"bold",borderRight:"2px solid #A67577",width:"100px"},children:" INICIO"}),P.jsxs("div",{style:{display:"flex",gap:"5px",overflowX:"auto",flex:1,paddingLeft:"10px"},children:[vn.map(S=>P.jsxs("button",{onClick:()=>Oo(S.id),style:{...Op,background:Oe===S.id||xt===S.id?"#E3C0C2":"#FAF6F4",width:"150px"},title:S.title,children:[" ",S.title]},S.id)),or.map(S=>P.jsxs("button",{onClick:()=>Oo(S.id),style:{...Op,background:Oe===S.id||xt===S.id?"#E3C0C2":"#fff",width:"150px"},children:[" PDF ",S.file.name]},`btn-pdf-${S.id}`)),Mi.map(S=>P.jsxs("button",{onClick:()=>Oo(S.id),style:{...Op,background:Oe===S.id||xt===S.id?S.modo==="code"?"#007acc":"#E3C0C2":"#fff",color:(Oe===S.id||xt===S.id)&&S.modo==="code"?"white":"black",border:"1px solid #000",width:"150px"},children:[S.modo==="code"?"":""," ",S.file.name]},`btn-ed-${S.id}`))]})]})]}):P.jsxs("div",{style:YL,children:[P.jsx("div",{style:QL,children:"Login"}),P.jsxs("div",{style:{padding:"40px",textAlign:"center"},children:[P.jsx("p",{style:{marginBottom:"20px"},children:"Iniciando Sistema..."}),P.jsx("button",{onClick:()=>dm(),style:tM,children:" Autorizar Google"})]})]})]})}const GL={background:"#F1D8D9",height:"100vh",display:"flex",flexDirection:"column",fontFamily:"'Mali', cursive",width:"100vw",position:"fixed",top:0,left:0},XL={background:"#C99597",color:"white",padding:"4px 15px",display:"flex",justifyContent:"space-between",fontSize:"13px"},KL={height:"35px",background:"linear-gradient(to bottom, #DDB2B5 0%, #C99597 100%)",borderTop:"2px solid #F1D8D9",display:"flex",alignItems:"center",padding:"2px 5px"},Op={height:"26px",border:"1px solid #A67577",borderRadius:"3px 3px 0 0",cursor:"pointer",fontSize:"13px",textAlign:"left",padding:"0 8px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:"#444",fontFamily:"'Mali', cursive"},YL={width:"350px",margin:"100px auto",background:"#FAF6F4",border:"3px solid #C99597",boxShadow:"5px 5px 0 rgba(0,0,0,0.1)"},QL={background:"#C99597",color:"white",padding:"5px",fontWeight:"bold",fontSize:"13px"},SS={cursor:"pointer",textDecoration:"underline"},ed={background:"rgba(255,255,255,0.7)",borderRadius:"3px",border:"1px solid #C99597",overflow:"hidden",marginBottom:"10px"},td={background:"#FAF6F4",padding:"4px 8px",fontWeight:"bold",color:"#C99597",fontSize:"13px",borderBottom:"1px solid #E0E0E0"},Np={padding:"8px",fontSize:"13px",color:"#444"},Zn={width:"100%",marginBottom:"3px",border:"1px solid #ccc",padding:"2px",fontSize:"12px",boxSizing:"border-box",fontFamily:"'Mali', cursive"},Zl={cursor:"pointer",background:"#fff",border:"1px solid #ccc",fontSize:"12px",padding:"2px 5px",fontFamily:"'Mali', cursive"},JL={flex:1,border:"1px solid #DDB2B5",background:"white",padding:"3px 6px",fontSize:"13px",fontFamily:"'Mali', cursive"},ZL={padding:"10px",background:"#F7E8E8",display:"flex",gap:"20px",alignItems:"center"},eM={flex:1,border:"1px solid #C99597",padding:"4px",fontSize:"13px",fontFamily:"'Mali', cursive"},ei={background:"#FAF6F4",border:"1px outset #DDB2B5",cursor:"pointer",fontSize:"13px",color:"#C99597",fontWeight:"bold",padding:"4px 12px",whiteSpace:"nowrap",fontFamily:"'Mali', cursive"},ES={background:"#F0F0F0",border:"1px outset #ccc",cursor:"pointer",fontSize:"13px",padding:"2px 8px",fontFamily:"'Mali', cursive"},tM={background:"#EAEAEA",border:"2px outset white",cursor:"pointer",padding:"8px 20px",fontWeight:"bold",fontFamily:"'Mali', cursive"},xS={fontSize:"14px",fontWeight:"bold",color:"#C99597",borderBottom:"1px solid #F1D8D9",marginBottom:"10px",paddingBottom:"2px"},_S={width:"40px",height:"30px",background:"#DDB2B5",border:"1px solid #C99597",borderRadius:"2px",boxShadow:"2px 2px 0 rgba(0,0,0,0.1)",margin:"0 auto"},CS={width:"30px",height:"40px",background:"#FAF6F4",border:"1px solid #DDB2B5",position:"relative",boxShadow:"1px 1px 0 rgba(0,0,0,0.1)",margin:"0 auto"},nM={position:"absolute",top:0,right:0,width:0,height:0,borderTop:"10px solid #F1D8D9",borderLeft:"10px solid transparent"},kS={display:"flex",flexDirection:"column",alignItems:"center",width:"90px",padding:"5px",position:"relative"},jp={fontSize:"12px",marginTop:"5px",textAlign:"center",wordBreak:"break-all",lineHeight:"1.2"},iM={width:"120px",minHeight:"80px",background:"#FFF5E5",border:"1px solid #DDB2B5",padding:"8px",fontSize:"12px",position:"relative",boxShadow:"2px 2px 0 rgba(0,0,0,0.1)",fontFamily:"'Mali', cursive"},rM={position:"absolute",top:0,right:"3px",color:"#C99597",cursor:"pointer",fontWeight:"bold"},dv={background:"#C99597",color:"white",padding:"5px 10px",display:"flex",justifyContent:"space-between",alignItems:"center",fontWeight:"bold",fontSize:"13px",borderBottom:"2px solid #A67577"},Fn={width:"24px",height:"24px",background:"rgba(255, 255, 255, 0.15)",border:"none",borderRadius:"4px",cursor:"pointer",color:"white",fontSize:"13px",marginLeft:"3px",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"none",fontFamily:"Arial, sans-serif"},hv={...Fn,background:"rgba(255, 80, 80, 0.4)"},sM={position:"absolute",top:"100%",left:0,background:"white",border:"1px solid #A67577",boxShadow:"2px 2px 5px rgba(0,0,0,0.2)",zIndex:100,minWidth:"150px"},na={padding:"8px 15px",fontSize:"13px",cursor:"pointer",borderBottom:"1px solid #eee",color:"#333"},nd={border:"none",background:"transparent",cursor:"pointer",color:"white",fontWeight:"bold"};iC.createRoot(document.getElementById("root")).render(P.jsx(H.StrictMode,{children:P.jsx(VL,{})}));
